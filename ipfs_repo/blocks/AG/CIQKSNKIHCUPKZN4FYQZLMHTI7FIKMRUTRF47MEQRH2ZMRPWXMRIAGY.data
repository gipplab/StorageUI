
Š€€€tograms;}});tr.ui.side_panel.SidePanelRegistry.register(function(){return document.createElement('tr-ui-sp-metrics-side-panel');});return{};});'use strict';Polymer({is:'tr-ui-e-s-alerts-side-panel',behaviors:[tr.ui.behaviors.SidePanel],ready:function(){this.rangeOfInterest_=new tr.b.Range();this.selection_=undefined;},get model(){return this.model_;},set model(model){this.model_=model;this.updateContents_();},set selection(selection){},set rangeOfInterest(rangeOfInterest){},selectAlertsOfType:function(alertTypeString){var alertsOfType=this.model_.alerts.filter(function(alert){return alert.title===alertTypeString;});var event=new tr.model.RequestSelectionChangeEvent();event.selection=new tr.model.EventSet(alertsOfType);this.dispatchEvent(event);},alertsByType_:function(alerts){var alertsByType={};alerts.forEach(function(alert){if(!alertsByType[alert.title])
alertsByType[alert.title]=[];alertsByType[alert.title].push(alert);});return alertsByType;},alertsTableRows_:function(alertsByType){return Object.keys(alertsByType).map(function(key){return{alertType:key,count:alertsByType[key].length};});},alertsTableColumns_:function(){return[{title:'Alert type',value:function(row){return row.alertType;},width:'180px'},{title:'Count',width:'100%',value:function(row){return row.count;}}];},createAlertsTable_:function(alerts){var alertsByType=this.alertsByType_(alerts);var table=document.createElement('tr-ui-b-table');table.tableColumns=this.alertsTableColumns_();table.tableRows=this.alertsTableRows_(alertsByType);table.selectionMode=tr.ui.b.TableFormat.SelectionMode.ROW;table.addEventListener('selection-changed',function(e){var row=table.selectedTableRow;if(row)
this.selectAlertsOfType(row.alertType);}.bind(this));return table;},updateContents_:function(){Polymer.dom(this.$.result_area).textContent='';if(this.model_===undefined)
return;var panel=this.createAlertsTable_(this.model_.alerts);Polymer.dom(this.$.result_area).appendChild(panel);},supportsModel:function(m){if(m===undefined){return{supported:false,reason:'Unknown tracing model'};}else if(m.alerts.length===0){return{supported:false,reason:'No alerts in tracing model'};}
return{supported:true};},get textLabel(){return'Alerts';}});tr.ui.side_panel.SidePanelRegistry.register(function(){return document.createElement('tr-ui-e-s-alerts-side-panel');});'use strict';tr.exportTo('tr.ui.e.about_tracing',function(){window.profilingView=undefined;document.addEventListener('DOMContentLoaded',function(){window.profilingView=new tr.ui.e.about_tracing.ProfilingView();profilingView.timelineView.globalMode=true;Polymer.dom(document.body).appendChild(profilingView);});return{};});
<!DOCTYPE html>

<html i18n-values="dir:textdirection;lang:language">

<head>
<meta charset="utf-8">
<meta name="google" value="notranslate">

<script>
function addRow(name, url, isdir,
    size, size_string, date_modified, date_modified_string) {
  if (name == ".")
    return;

  var root = document.location.pathname;
  if (root.substr(-1) !== "/")
    root += "/";

  var tbody = document.getElementById("tbody");
  var row = document.createElement("tr");
  var file_cell = document.createElement("td");
  var link = document.createElement("a");

  link.className = isdir ? "icon dir" : "icon file";

  if (name == "..") {
    link.href = root + "..";
    link.innerText = document.getElementById("parentDirText").innerText;
    link.className = "icon up";
    size = 0;
    size_string = "";
    date_modified = 0;
    date_modified_string = "";
  } else {
    if (isdir) {
      name = name + "/";
      url = url + "/";
      size = 0;
      size_string = "";
    } else {
      link.draggable = "true";
      link.addEventListener("dragstart", onDragStart, false);
    }
    link.innerText = name;
    link.href = root + url;
  }
  file_cell.dataset.value = name;
  file_cell.appendChild(link);

  row.appendChild(file_cell);
  row.appendChild(createCell(size, size_string));
  row.appendChild(createCell(date_modified, date_modified_string));

  tbody.appendChild(row);
}

function onDragStart(e) {
  var el = e.srcElement;
  var name = el.innerText.replace(":", "");
  var download_url_data = "application/octet-stream:" + name + ":" + el.href;
  e.dataTransfer.setData("DownloadURL", download_url_data);
  e.dataTransfer.effectAllowed = "copy";
}

function createCell(value, text) {
  var cell = document.createElement("td");
  cell.setAttribute("class", "detailsColumn");
  cell.dataset.value = value;
  cell.innerText = text;
  return cell;
}

function start(location) {
  var header = document.getElementById("header");
  header.innerText = header.innerText.replace("LOCATION", location);

  document.getElementById("title").innerText = header.innerText;
}

function onListingParsingError() {
  var box = document.getElementById("listingParsingErrorBox");
  box.innerHTML = box.innerHTML.replace("LOCATION", encodeURI(document.location)
      + "?raw");
  box.style.display = "block";
}

function sortTable(column) {
  var theader = document.getElementById("theader");
  var oldOrder = theader.cells[column].dataset.order || '1';
  oldOrder = parseInt(oldOrder, 10)
  var newOrder = 0 - oldOrder;
  theader.cells[column].dataset.order = newOrder;

  var tbody = document.getElementById("tbody");
  var rows = tbody.rows;
  var list = [], i;
  for (i = 0; i < rows.length; i++) {
    list.push(rows[i]);
  }

  list.sort(function(row1, row2) {
    var a = row1.cells[column].dataset.value;
    var b = row2.cells[column].dataset.value;
    if (column) {
      a = parseInt(a, 10);
      b = parseInt(b, 10);
      return a > b ? newOrder : a < b ? oldOrder : 0;
    }

    // Column 0 is text.
    // Also the parent directory should always be sorted at one of the ends.
    if (b == ".." | a > b) {
      return newOrder;
    } else if (a == ".." | a < b) {
      return oldOrder;
    } else {
      return 0;
    }
  });

  // Appending an existing child again just moves it.
  for (i = 0; i < list.length; i++) {
    tbody.appendChild(list[i]);
  }
}
</script>

<style>

  h1 {
    border-bottom: 1px solid #c0c0c0;
    margin-bottom: 10px;
    padding-bottom: 10px;
    white-space: nowrap;
  }

  table {
    border-collapse: collapse;
  }

  th {
    cursor: pointer;
  }

  td.detailsColumn {
    -webkit-padding-start: 2em;
    text-align: end;
    white-space: nowrap;
  }

  a.icon {
    -webkit-padding-start: 1.5em;
    text-decoration: none;
  }

  a.icon:hover {
    text-decoration: underline;
  }

  a.file {
    background : url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABnRSTlMAAAAAAABupgeRAAABHUlEQVR42o2RMW7DIBiF3498iHRJD5JKHurL+CRVBp+i2T16tTynF2gO0KSb5ZrBBl4HHDBuK/WXACH4eO9/CAAAbdvijzLGNE1TVZXfZuHg6XCAQESAZXbOKaXO57eiKG6ft9PrKQIkCQqFoIiQFBGlFIB5nvM8t9aOX2Nd18oDzjnPgCDpn/BH4zh2XZdlWVmWiUK4IgCBoFMUz9eP6zRN75cLgEQhcmTQIbl72O0f9865qLAAsURAAgKBJKEtgLXWvyjLuFsThCSstb8rBCaAQhDYWgIZ7myM+TUBjDHrHlZcbMYYk34cN0YSLcgS+wL0fe9TXDMbY33fR2AYBvyQ8L0Gk8MwREBrTfKe4TpTzwhArXWi8HI84h/1DfwI5mhxJamFAAAAAElFTkSuQmCC ") left top no-repeat;
  }

  a.dir {
    background : url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAd5JREFUeNqMU79rFUEQ/vbuodFEEkzAImBpkUabFP4ldpaJhZXYm/RiZWsv/hkWFglBUyTIgyAIIfgIRjHv3r39MePM7N3LcbxAFvZ2b2bn22/mm3XMjF+HL3YW7q28YSIw8mBKoBihhhgCsoORot9d3/ywg3YowMXwNde/PzGnk2vn6PitrT+/PGeNaecg4+qNY3D43vy16A5wDDd4Aqg/ngmrjl/GoN0U5V1QquHQG3q+TPDVhVwyBffcmQGJmSVfyZk7R3SngI4JKfwDJ2+05zIg8gbiereTZRHhJ5KCMOwDFLjhoBTn2g0ghagfKeIYJDPFyibJVBtTREwq60SpYvh5++PpwatHsxSm9QRLSQpEVSd7/TYJUb49TX7gztpjjEffnoVw66+Ytovs14Yp7HaKmUXeX9rKUoMoLNW3srqI5fWn8JejrVkK0QcrkFLOgS39yoKUQe292WJ1guUHG8K2o8K00oO1BTvXoW4yasclUTgZYJY9aFNfAThX5CZRmczAV52oAPoupHhWRIUUAOoyUIlYVaAa/VbLbyiZUiyFbjQFNwiZQSGl4IDy9sO5Wrty0QLKhdZPxmgGcDo8ejn+c/6eiK9poz15Kw7Dr/vN/z6W7q++091/AQYA5mZ8GYJ9K0AAAAAASUVORK5CYII= ") left top no-repeat;
  }

  a.up {
    background : url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAmlJREFUeNpsU0toU0EUPfPysx/tTxuDH9SCWhUDooIbd7oRUUTMouqi2iIoCO6lceHWhegy4EJFinWjrlQUpVm0IIoFpVDEIthm0dpikpf3ZuZ6Z94nrXhhMjM3c8895977BBHB2PznK8WPtDgyWH5q77cPH8PpdXuhpQT4ifR9u5sfJb1bmw6VivahATDrxcRZ2njfoaMv+2j7mLDn93MPiNRMvGbL18L9IpF8h9/TN+EYkMffSiOXJ5+hkD+PdqcLpICWHOHc2CC+LEyA/K+cKQMnlQHJX8wqYG3MAJy88Wa4OLDvEqAEOpJd0LxHIMdHBziowSwVlF8D6QaicK01krw/JynwcKoEwZczewroTvZirlKJs5CqQ5CG8pb57FnJUA0LYCXMX5fibd+p8LWDDemcPZbzQyjvH+Ki1TlIciElA7ghwLKV4kRZstt2sANWRjYTAGzuP2hXZFpJ/GsxgGJ0ox1aoFWsDXyyxqCs26+ydmagFN/rRjymJ1898bzGzmQE0HCZpmk5A0RFIv8Pn0WYPsiu6t/Rsj6PauVTwffTSzGAGZhUG2F06hEc9ibS7OPMNp6ErYFlKavo7MkhmTqCxZ/jwzGA9Hx82H2BZSw1NTN9Gx8ycHkajU/7M+jInsDC7DiaEmo1bNl1AMr9ASFgqVu9MCTIzoGUimXVAnnaN0PdBBDCCYbEtMk6wkpQwIG0sn0PQIUF4GsTwLSIFKNqF6DVrQq+IWVrQDxAYQC/1SsYOI4pOxKZrfifiUSbDUisif7XlpGIPufXd/uvdvZm760M0no1FZcnrzUdjw7au3vu/BVgAFLXeuTxhTXVAAAAAElFTkSuQmCC ") left top no-repeat;
  }

  html[dir=rtl] a {
    background-position-x: right;
  }

  #listingParsingErrorBox {
    border: 1px solid black;
    background: #fae691;
    padding: 10px;
    display: none;
  }
</style>

<title id="title"></title>

</head>

<body>

<div id="listingParsingErrorBox" i18n-values=".innerHTML:listingParsingErrorBoxText"></div>

<span id="parentDirText" style="display:none" i18n-content="parentDirText"></span>

<h1 id="header" i18n-content="header"></h1>

<table>
  <thead>
    <tr class="header" id="theader">
      <th i18n-content="headerName" onclick="javascript:sortTable(0);"></th>
      <th class="detailsColumn" i18n-content="headerSize" onclick="javascript:sortTable(1);"></th>
      <th class="detailsColumn" i18n-content="headerDateModified" onclick="javascript:sortTable(2);"></th>
    </tr>
  </thead>
  <tbody id="tbody">
  </tbody>
</table>

</body>

</html>
‰PNG

   IHDR         &”N:  ‡IDAT(SI/CQ†¿µ_„¥„Ÿ 6XX³°·"$jèÀ5Tç•HŒMìÄXAÕâVU¥† ¸´h¯×ù·Q¹¢oò,Î9Ï³9P
DTF?ç÷ e?ğ˜1ç)£CQ°Wû|~œßé8NçLIŞ¼ËÇn!öz½8¹Ö9}“3ÎjêµòØ—±ÛíAüJÇvâ¿ÇwG"´ÙlEpC.—[†fÛŠg‰k¸¸Ëá^ËKø?¸!§sñKÇ/¦„O2ØOfqpöEêV74:êD,GH}.	v¹¡áá¨â°v¨•»¢!R”!¨y¬DµËÑGÌD¢îÄŠîárC48¨àH„‹{Ohµãå¨›¬4Ï5b6¬ï$\nˆç±°û Û’WÈ•…È ~²
›	W6d·;dèZšFßPÃT5Í…‚²ZíXO¤Ñ8]ógdĞlB4õn¨¿ßŠ¶…Ö#ã®w­½Ö>PggÚÛ;Ì ½u[,ø*e;5 ¶‹    IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   bKGD ÿ ÿ ÿ ½§“   	pHYs     šœ   ­IDATxÚíÓÁ   1tLdMÂ˜hhÿG                 ğ¢ñú™¹Næ«jü¼ÿ¶éz€  @    €  @    €  @    €  @    €  @    €  @    €  @                    § (pĞ     IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   bKGD ÿ ÿ ÿ ½§“   	pHYs     šœ  ÷IDATxÚíÜ!¯OÀáËÌfŒ±	Š"P(EÓ4Âo£Ñ4Q"™D£‰¢DA!I’¢llw³Ùlw÷r¤| Åû<ÛûŞó+÷ßs66                  şêYuÜ&æ°T?ª[Õ™À:ï«s¶27€¥úU=ªÛÎÌ ÖùZ]­vÙÒÌ ÖyU²©¹,ÕVu·Úgc3XçcuÑÖæ°ÎÓê˜íÍ`©¾W7«İ¶83€uŞUgmrn KµS=¬ÙèÌ ÖùR]±Õ¹¬ó¢:a»sXªŸÕíj¯-Ï`Õ›ÀRı®TGm|f ëlV7üv07€uŞVgln Kµ]İ¯x
3XçSuÉ“˜À:S‡à8U §÷tæ°şvğ¸:â)Í`oÕ5Ç©sXçµãÔÙ8N@[ÕÌàeuÒ›€7”†àÅá?yKÙOÁL
À?ƒ†àßÁCØ®îUû=…y¼©NÛş¼ 6«ëş¦Ÿ€³ğÁx1dh ^Às/‡ÎàsuÙVç°S=¨Úè¼ |"fh >58 Ÿ‰€EÀ5îà cÀ1æĞ cÀ1æĞ cÀ1&                 ğßù”ıv!«:kÍ    IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   bKGD ÿ ÿ ÿ ½§“   	pHYs     šœ  IDATxÚíÏ‹VU‡Õ13q“©¦ø´Ò$ÁDğOğq)ji‹Ä•F¨­Ú%º‘péN"šm‹7“Š2î’’À
ŒsİÜwÓ¼ßsç¾Ü{î}¸ËùŸ‡yß÷sÏ]°@DDDDDDDDDDDDDDDDDDDDDDDDDDD¤C cÎB¿ø¸ ìŞrFú'@1p½ ®;×œş	0x=¾ –9Kù†{|Ì^SÀA`±3šYø@Qƒ ³×]àg6£ğk  ¦o€×åÂ ³×-`³İòğG(@ü	|è¬·8ü  »€ËÀ³
<pö[~D€«¯Ëoı)¼ö˜BÃO` Şrà$ğ$Q‚İ¦Ñ²ğ«0P{ğ}‚Ï€í¦Ò¢ğç#À@;ŸOƒül0–„_‡ e{GÁ6'€%¦Ô‚ğë`à#á×`»§Lªá×)@ÙşàA İ`‹‰5~İ”ıxø-¸và’r“áB€²?ïÿÚ?lz†¼¸¨b¿>´ÿ0nŠ…`Ø\¡o+>5É†ÂOXš¾Mİô¬şl(yÃD¿ÂjàÀ›‰}ı*ĞOLµğ+.O +ú;X@ú©Omº*ö÷fÊ®àËÀ}· 
àlÂ˜Wö|¦ y	P ;Æ}aH­ ?&£•“ÌUëI/Cë˜ EtË°¢Ü"6W­÷ ?®'ŒıÆZû ?
`}pì§†Ô9£ y
p(8ö‡Ô¹¦ y
p>8ö­Ã–ˆ OîÇ¾~HG
§ S	¿æªóä)Àtpì‹›Ø ¢ 
  ~(À(¸í—À~pÎŸı`¯7‚¼ì­`ƒ†ÖºîbP÷Ø·ËÁ`2ºUÜ!İÀ-a=à»„1G6…T€¼¶…/MóQ·…×'Ğ‰†˜V&ôw™†´X‚D~N}g€†µ\‚  3ÀéÔ|84	müRõÈ×àãáÇL²A	õÇ*öë€Dd Áˆú³)ğ¯¿ ˜^ÃŒ ÑC¢îyHT$¨¹ıÕÀ}‰ËH‚Û}7á ÈÓ&Õ	jjo#ğ»GÅf(AíxXtÎÌ£¶ÇÅwA‚
õÆËš¾0¢$~Ã?á+c:&Aàïv—>ç}iTNş¦êmæ)`›³Şr	F$Àm_™‰5à«cs“ Fîy{7C	jÀ×Çw\’ÿş!pØõü~	0\>r)·?<.–;|V9#ı`ÌY‘¶ğ
à€úÙz–    IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   bKGD ÿ ÿ ÿ ½§“   	pHYs     šœ   IDATxÚíÉkA‡Š;‚h·xôâI\@…ñ/%‚"¸õ '=¸ zqÁƒÆíæM/Š‚=(ŠFA9	ŠHâ¾_A!Óõª§º»*ù>øİ¦_½÷aÆê†                            ÚÛÛ7KNIío8SÊwøÿ$}’Ó!J =}\’l’Lajù¿/T	úõ÷Kr]²J2‚)ú~ÔèÑäµd‡d,õ7üB%5ö×!@%=’­|VĞ¿éŠ75w	ÌğÍ:¨ä©d1¶¿¡’3eJP¾gLşHHF2é@%¨~TòD2›I&Aÿáç(€É{ÉR&ˆ_)€áªäg	Ì1k˜tÉÔ¾F€ªÍ’ƒÉ§~×Ï˜tI¤ßE€ªz$$_%XË¤–@^3WòÕ§ UµçHn:ş9heÒÅKĞš&‡·K~({î•´0éâ%h«%§HŞ){~Äu‚€$ğØ³ù“ğJÙó1¦ˆ{&éVôûW²„) A=Ï¼QôÛÅWÊHSÏ%ßıî`Â%K xİ°Œ=w(/³Ÿ L	¯y,Y”±ßkŠ^w3İ ®¦¬Ù—l`9.ir<v–íBTriy4ÓT‚~õîJ&;¿WÑç:&¨5¾ëŸèpü8ÅHw‡ÒğúJHf	jÔ{ åPcâºÀ4P‚”z5¦(ölA€ %°Ô[áPç²¥ÖMPK­—ÚíàÉÍ$iµ>‰­åà$¼î›¥Öe‰ÉEiµæ#@`ÈkVZ$¸çpî÷-=mF€8%hQû	K?' N	¶)Ï}½¥—§•ç¾ÌÒÇˆS‚gÊso±ôğâ” ÇáiëA€8%ø­<÷¶õ N	¾y:ÿ¿§İşô"@œÌSû\>Æ%€×ç$ûSŸ+€ ƒX‚ä6²´u®!@ñ)r{™m­£P|ŠÜ^öÜR#œ¤§"R1]ñx<¾.C€"$H%˜VóBJ o	{®4B /	ä5ã7ˆt @ ä(A[ŠæBÍ è@Ş” Á-&[’–uŠ’`S-IÅ:¾pİO‚·®7‚G	”ëä)ÁN&Y¢ëä!ÁrÉ¦X¢ëx— J– Ã:H0˜$È¸	êX	ƒu®ƒ±KPçM’Cel/OÔQ{äa™{ÁƒêMJîòıÂFS¨S‡S%‡%CÛmuH 8nµÙ¬¡xºÄ(â˜¬Ãı…H“ w$3% p	<`>î«lîL® AÈx k _I$8¯¬qŠÉ,Ì3ÿ·¥mêH$8g©óoÈ<-42IjÌìäÙe­¬“&ÃD óPçÛæW@³üô["ÁY†— Ÿ“_ş0ÿÌO÷P¯z£)Ã@€¦jV¾Edø                           àÄ¶.ÆXÚNoÅ    IEND®B`‚‰PNG

   IHDR   0   0   Wù‡   bKGD ÿ ÿ ÿ ½§“   	pHYs     šœ  ÎIDAThŞåšMNÂ@†»P/`±ºÕáWèÚ„˜àB×.•…zá4µKW~$JúùÆ4Òv:ıêâÙ4ÎûĞæ›ëèflÅ@”A´Àè¢GÇZtN™ÚDî;JãmP0_k2§¶uºVb;àŒC„^Æ;¸NĞ £ƒ«Œ¨Í¸ö§1¸Ê38ŒKà¼¥¨ç`f ¼dFB	TW©®+P4üË/ºÅ¿
4i¢¼…Uâóå§0¼ÄW?±ª@#Åá%—Ëœ”>:‹%g‘Àƒğ’GUÀFÊü+Pc^R
¸:R r<o‘Ù†á%§•x\šÕ©\„@—±@W-Æáà.ğÉızËÄKÌş3ÊşŒóPâLä¹æ¸§]îÍE¦JJ‹
e¶E}&¦UØOlÉ©E/Åá½US‹r5fÆ±?8øÓë™XàÈÄ“¤dp‘ï„ë2«ç2«d\irˆk_S_Ú¶ì‚;[ÄúÄ^’›=lÚ¨áFØìáÒ5l»U‚ä©²åi¼‚>˜}:Ö¦s*Ô&rßß>ãLKWÁé    IEND®B`‚‰PNG

   IHDR   0   0   Wù‡   bKGD ÿ ÿ ÿ ½§“   	pHYs     šœ  ÎIDAThŞåšMNÂ@†»P/`±ºÕáWèÚ„˜àB×.•…zá4µKW~$JúùÆ4Òv:ıêâÙ4ÎûĞæ›ëèflÅ@”A´Àè¢GÇZtN™ÚDî;JãmP0_k2§¶uºVb;àŒC„^Æ;¸NĞ £ƒ«Œ¨Í¸ö§1¸Ê38ŒKà¼¥¨ç`f ¼dFB	TW©®+P4üË/ºÅ¿
4i¢¼…Uâóå§0¼ÄW?±ª@#Åá%—Ëœ”>:‹%g‘Àƒğ’GUÀFÊü+Pc^R
¸:R r<o‘Ù†á%§•x\šÕ©\„@—±@W-Æáà.ğÉızËÄKÌş3ÊşŒóPâLä¹æ¸§]îÍE¦JJ‹
e¶E}&¦UØOlÉ©E/Åá½US‹r5fÆ±?8øÓë™XàÈÄ“¤dp‘ï„ë2«ç2«d\irˆk_S_Ú¶ì‚;[ÄúÄ^’›=lÚ¨áFØìáÒ5l»U‚ä©²åi¼‚>˜}:Ö¦s*Ô&rßß>ãLKWÁé    IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   bKGD ÿ ÿ ÿ ½§“   	pHYs     šœ  TIDATxÚíİAjaÇá¡ÒcH[Q İ”ãÑ…Šx ³´;=CW­×P7½A  Š­BÜÌ*T’L3æË—çwÙ~“¼?²H§IÓ              ,d˜äC’¯I®“Ìvt®Ûç`”d¸‹?Hr¾Ã_4çIj]ş ÉÄ’Î$É ¶å&[îÒ3®ê• É…¥®<µ,ÿÄ2;ÏI|´ÈÎsVC WÙy®jàEviXä=F €   @ €   @ €   @ ¨6€ßIŞ&y’d¿ÃÙûI&yŸäfÎÀÜ¯ñ:—ü„M+€¹yÕÃµ¼+ø\ÌÍÃ®åqÁç
 ïäA©ç
à?=ğRÏÀ’|‰ŸıÑG }Ÿ+€õ-bº¡ ¦(#€Ù†˜	  úxãÅ;€   @ €   x#ÈAåp»¡ nàAğç`ûÀİ²EôtkÖQÁç
`n^ôp-o
>W wÜıl×1lg©ç
àù•äeûº×áì½$’¼^ñŞüM+ # # # # # @ €   @ €   lQ ?-r·¿6î»EîöG~²ÈÎó¹† N-²óœ65HòÅ2WË¦í½ucK]zÆIšš$$™XîÂ™$45Jr˜äÒ’ÿı²Ÿä°©]ûê£$ßîûyú[>7ís0JrÜ              ,ğğâßä[Ãûd    IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   bKGD ÿ ÿ ÿ ½§“   	pHYs     šœ  <IDATxÚíÜËjSA€ñ¦¥ ®|¯x©+A(Xº)>Æ·õÄ.TÄ°UñV¾}
A»©+A+‚(õbÜTˆÍ¹dNNæÿ}0Ë“™ùQš“IgfÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌÌŠ\nW#ææÿúÀÄİü¾Ü|¸ù"ˆ `cÄæ‹ s àQA¯€Ó®¹xVğšÓ4¾¯5`)*‚÷Áü=GrB°‘ ÁóÌì ‹"ˆ —Ûo‚·"(=º¹ X)9qü+9 ¸_aâD@x€­Š“lå à{ˆàG ê.Bh@ Á 8G €à ‚#@p/‚ıÓ†@ Á <‚…œ 8GÀ.p8	Ì—=,ø³·Š|ïà?ş¹o…9Ï§€À7TßüóC®—ÁĞûÖ˜ÿòàü¿ JÕ=®™Áj‚5¸.€òãĞˆë¦Bp0Áœ@‚‰§@hæhâ,ä¸a 4õ±Â}?	`: TBP÷¯ Ú 4‚º›%€ö(…`ROşÑr™ÇÆ]ä l· šûp©•Ğì§‹Û%v€>°Ş&h@«`2 Zƒ@ “} S
‚Úàç˜_Oah€Ê¬×ıQ -™xê¿	Ğâ‰×9˜QB	«øZ5õî`\÷àR‚×rµÉ·ˆã¸od »À¹1¾¥Á5ûM#  Úø\ü
­pïYà8p¥ÎÙü=ÆZÁ·ˆª>,Š`Æ6p&G €à ‚#@p@ Á 8G €à ‚#@p9 øì†‹ ÈÀ¦›ğØŒ ¸à&‹à¥›ÁàL_ÏM`Øq“GwÀ\®/Üä‘ãæ¤ş­mS–GªßÔıú"°iÃßî‰@wE ‚"z)¾(kÓ œu¥b"pó#pó#póƒ#8ìJ˜™™™™™™™™™™™™™™™™™™™Yá~"yE¶4Nõ    IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   bKGD ÿ ÿ ÿ ½§“   	pHYs     šœ   ÂIDATxÚíÜ±  ÁÌéı÷ +PP äN¢wñeD                 À…$çå›¶G €   @ €  €MØ/ û`¿ ì€ı°_ öÀ~Ø/ û`¿ ì       ø‹ƒ@ €   @ €   @ €ı»ğQ¤   @ €   @                  À0Ê©4y‚@¸7    IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   bKGD ÿ ÿ ÿ ½§“   	pHYs     šœ   ­IDATxÚíÚ±	  EÁÌ™ı÷Ğ,á£w6y¥U                  t÷XMú~€  @    € €ƒÍkï€   @ €            ™!€   @ €   °{ ôı   €  @                     àKÊ©4yß{ğî    IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   bKGD ÿ ÿ ÿ ½§“   	pHYs     šœ  IDATxÚí[ˆMQÇ‡afëˆ”Kry3¢&OI!š„ID.o(Æ¹4…e4‘"÷‡ñìn¹5%“"&—rdÜ†|+ë I³¾½ÏÅ^{ÿ~õÒúNß^¿Ùö^{}òò                            ş¢²²²D²KÒ$ù"ùAºŒ9F÷ì1+ñyâ${%Ljè˜cW'éåãäŸg3–æ˜ú$@-“–ñìõeò'HÚ™°ŒÇÓ	>PÃde-5>ĞÄDe-M>ĞÆDe-m>Ğe¬ŒÄüø!                     Ç       b#€İÚ"y(i”\‘•l•,”Jò™êø
 ÙİúŞ~ulƒd²¤SŸ,:çd“d$S€T¾K®JIz @òè|VXæÕ·b £¤òD²DÒ’)@*·%å\L¾I¶Kz"@´›è+fïùçHÖIJ2ôî€[’Ñàgƒ$³%{$ÏÒà­‘ün6_2İ®~)Âæ8-$%öY€47ÄNæ»ËòrâI“ƒ$;C¼hâtÖxøç@Œ“\!A>ÄG‚n’•’$8âó5üû ˜WÏİ A5ü¿¾JŞØı ×ìÚZÉ”tNÏ2¶Ÿäl€‡Jó z˜+üz»1¤0Dí’CJ	>øø²å$-¿¶·}Å!®ö+?£1ŒhRiµÛÅz\@:¥¬¿¢-@*Í’Y>§À¾E[óİrˆ¾ ¿ßŠ-)R~VåİAƒ/û	àWî˜§‰ÊÏ+Q®,E 0y$¯üÌUŠzÏ|øå8Ph×óË$fQFr=äOÇ¼ŒUŞ\RÔ[ƒ ÿ¯±’*»Ç/èÅápEı2»c¨«ZÏ£şÀ(	B
ì)ûuÀk‚"EíŠZ‹ –œ Á>EÍŠı7 Z¯PœºS™«¨·QQg"D«é™Ê[9s%ßOqfùäëê`’·„ÍV	ªµ\ŒGuÏ@¢÷HƒË•Ï;êLUÔ™„ Ùi ÕşrØ{Û7:àøãŠÉÛ¢XhvÔ¨B€Ü4Ğa'u¤r¼YDzé8-®ÛBù÷İç ·˜3ÃÂşW0ßQcšâ%ùÛÌV­ÕŠ=§ğzGŞv{ZW5J ÇX	æ+êT).5n8jTf Ÿ\¦5¤&o¤£ÎpÅ¤©uñÛ<àn\09¡¨uİQc­c¼ë1ñ1ÏØ'Ì_÷(G­jGñ3ã/{$@{¯YÒ=`ëµ*ã/9Æ—:Æß÷H€Z_Vó‚4u&Í	lvŒêÿÊ.xóÅ×€=uÔ*v}ùÃ1¾k- âtØÙ^y¾°Á6G­‚tï‹³=>1ßhºkW2Kó                            şâ'ğ:ğÅñú°    IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   bKGD ÿ ÿ ÿ ½§“   	pHYs     šœ  "IDATxÚí[ˆUU€µÑqœJ%ÌÔhœ‰©ìµ%†„õ=DÑ…J({+†®hXTvóÁ„È
{È
KÉ$#¥¦¨´¤±rtF{YA¹ş½ÏeÎ>~¬Çõï³ÖúÎ>kıkí}ÆŒ9 xØ[NZ_¦>ë©òÀw«€µtÖ «8ø8€u+›€Î*	°ÚA«{YU•ÁŸ;`u/ÃÀ¼*°ÂÁjXYQv9P+»ª ÀÕ°2TNÚ3#mŞ
  
  
  
  
  
  
  ĞîÉP P P çP
  
  ÿÑ€#
p
/£)À]Àv8Åó(ÀåÀºv9g¨ åE8xµê"(@í"ô ï*€"\|¥ ­70CÀà`ğ1ğğ(p#ĞtÔéZ'€£
P­uüïéÑ±‡€‹±5^óR`T7‘³x8¯†ëv§Õ‚T8“wø¸Wòú÷¶òJAŠİn/óT,p5pPÚ#—ÿp+pZÁÏÑü¨ í³™³˜_ğ³Ìö*@ûìæMË¾ñ>ÏL`Ÿ4W‚ÉÀô´æ_< ¼l«Óm+0«Àç™İ*?§|&8X<ÔĞ™¿‹
Î	*@kÉĞ\™2…•ìÔåÑDRJ+@kÊpVÌ2ßÒW¢éeàhm¦ O•xÑÄÛÑœğ–´¾s€KHĞˆİ|­ ­/ÁØt4ì¼62' .ù€”a°»@G÷ã>® õ¬#À¯é<À§i‚¶4}ã:jˆÛ¼W`Sé†@Ì®‚b)@8¬OC&”ˆ=x9ØÙ‡"/[NKC…Tğş´ì›Zb^ğBğ;"¢ï(Àèí¦ãb“
&¢‡?Ä» YBøÿ²¸®Àu:Ó[´#ïØˆ·VZc7pĞ¼ÖéÁIÜ¶Üy`n3î
+_ Óƒ×ë	æ	nÄZ§ ­!Àqà[`nğšwâäşy¸Lj`BÊç÷‹~`KÉ¿ù	˜\lÄ»?k«4FŒs€eéŒ_ÑÉáŒ@ü¾À"?ä6ŒRêY(Bgºeï/8'è
Ä~:ë–LŒi|?{ÿîè"Û²Ïb8Oğy Îhwx¶ïú@¼å8Vuİ®»}×—r@wàÎòg­ÙAh~ÃïıX¹£½µ>ª iüÁ½ƒi™8q.R€Æ4`0ısØÆ´ì›U°şÁ{$È=²LšÓ€‘4¨3ƒõ§ ?g:â@nY¬ÌÄx_šÛ€Aà¦:ş,ÉÄ¸"ğ’Šhn÷bŒÜÂ×gbL
$tz ÉH,	ÄY˜NÈÄø,ƒ:´§™e°øgğffâÌl -ÈÄx>Sÿ±Š	°³]8¼ˆµ%ci¦~î1°×+&ÀÊv`87«?ãÅLık2õ7WH€áVœ³ÔÚafb-ÎÔÿ(S¿/Sw…X]•l^‘FmÌÄêÍÈÔ?;Sÿ—Š°©ÌË²ª À÷™XSsdêOÎåZ\€`Mî([•ÊÄêíıõQôCÀÎ”Éì#"""""""""""""""""""""""""""rt…ÀÅ[©!    IEND®B`‚‰PNG

   IHDR   À   À   RÜl   sRGB ®Îé  ¥IDATxÚíİËkWÀqÿNÅ÷|`\((_ˆàc¡(º"Š7nT\(.Ü¨µÆTKÒ„&&›6&mL“øhû[ÜtÎ¹¹ÆÌã³ø,ïæÎ7wÎ™33ËæççAS-³    € @       € @       € @       € @       € @       € @     € ì  € @   @…õõõõ={v¬££cfÍš5ï—/_şÿ/öQì«Øg±ïPQoß¾}|æÌ™×+V¬øèÀ^˜Øw±c_
 bggç”ƒøëˆ}Y×j@ü×rà~]±OP‘s~§=‹s:TÇ1AíˆÁ›vqÄ¾@ÉÅ†ƒuqÄ¾@É™ê\Ü)R”\êKtñÇş öŸ °ÿ€ |Àˆ |À( ø  _  à€ |        ÀÒZ¹rå‡6¼Û²eËìÎ;göîİûûñãÇÇ/_¾üòîİ»?õ÷÷÷ÎÍÍ9ØĞÌ+Áaıúõï<ø¦»»{¨	€€ 
mİºuöâÅ‹£ƒƒƒÏ €Æğ¥={öüqëÖ­ÁÙÙY y|ù«pãÆŸëühp ióæÍs7oŞ€ À¿b6©	f ğá.\xUçÓ"T\œãããO†‡‡{^¼xñÃ½{÷ú¯\¹òòÄ‰ã»víšşçKlûİ»wïí@ •311ñ$¢ˆ7ÄùıB#X·nİ»¸°& TVLu>xğ ïØ±c¿®ZµêÃBBèêê€ *ollìûóçÏ¿ZÈûNŸ>ıº.Ë+Ğp1~ˆWµú±£GşV‡Á± ø$ĞqU¸ÕªşK  şs,˜‹¦­œ	@ µÒÛÛû<–F4a`,€İWoO<9~õêÕáçí,p‹éÓ}ûöe¿}¾ªS¤¨ñ níÚµï><çB¬ÓÓÓ92‘{`hh¨G (åRˆø•¸téÒÈÔÔÔw­N:õKÎßˆ+ÏU›@ÃÖÅÕàXöÜÊéQDûK× €Ò/†Û±cÇÌıû÷û[9ÊÄõ„*­"@ÃWƒÆjÏÜ¹üçÌÅ`\ ¨Ìrè¼™œœÌÄiÎu‚ªÜT# |ÒÑÑ1“;‹ËrÆU ââ?÷ÀÀÀ³‡şxûöíÁsçÎmÛ¶mv!lÜ¸q>'‚8eÊY6ƒm`IÄ@´««k4êV	rN‡bíPj]ŒÊş´	Ô\Ìñ Õ«W¿oeL30U¤©mÅ#W €R¬ÿ?tèĞD+³C9K©S÷Ä©’ PšÕñk{ŸpÎu‚¸ğ•ÚN™Ÿ@'€ºsçÎ@Î-‘q±,u¿,©mEt@é"ÈùÈ™É‰{ŒSƒa t>Ÿ%çóSèâFûÔvÊº<B ƒĞíÛ·ÿ¹ÿşÉë×¯ŒŒ<meL30U¤©§MlÚ´©pºµ»»{X Xô/0ææã¡X£££Osg‡RS¤±”:uU7;T´x? ğÍ¾ÀøeÈ½K+çT(µ­xøVê†™2Ş@/€z¯úxíÚµä©G\,K]1;ËR+ESÓ«ñº&à[/†û˜óKË&R·W¦¦D??‹´­û†óa¿­Š_QÔ`5h|‘©1AÌÒ¤¶7Úm#ÆEŸ÷U)€X%€š,‡ƒ3µ­Ô*ÒxÚDÑçã©ÔEŸ·WV)€Xë$€š³C©)ÒXJ]´xäJ;áœ;ÅÊrğWíÖNdˆëEÛŠû	Ú9€c‰tÑçã=ÆU	 ¦uëxñ³ÑÄÅ²¢mÅM5EŸ‡o}>^¢ÑÎçË@ggçT]ßŠÓè âŠqÑ¶âÎ²Ô±Ôòèv>¿ÔÄiOüç¯ó+¡@jZ/®}>n†/ú|8í|~)ˆ}³=1àmÂK-†£Ñ€ @       € @       € @       € @       € @       € @       € @   `'      @­ıOæ½İù¿    IEND®B`‚‰PNG

   IHDR   À   À   RÜl   sRGB ®Îé  xIDATxÚíİÛoMYÀñù;‰û5TÔA¢‰{Dâ–Â©R/^ÄƒDÜ«ƒÑÑL«v:Sí(ZŒ¿¤ãÅ8kíszznÉ÷qïÊÚë{öú]ÖÚ?}üøñĞªüd@ €         @ €         @ €         @ €         @ €         @ €         @ €  @ ƒ       @ € Ì‹/z?>ÜŞŞş~ñâÅŸçÍ›÷~LŒQŒUŒYŒ”wïŞİ?vìØÈüùó¿˜ØåcccI€›ü&ñìcÙ¬4¥ ñ«eâÎ.1¦h5¿eOu–CÍ4 ¼™°Õ!Æ– uNd0LÖêcK€:Gª³º)RÔ9©‡¨øcü ãG ?€  à‚  à€ ­û ›½˜E €   @ ü@ € ¶oß>şõA! Z–ÁÁÁÇgÎœZ½zõ4Ğ²LOOß»}ûö‹={öŒ5Ë[ (‹gÏı¼cÇq ¥ùúïùæÍ›ß€ -ÍÍ›7{ÛÚÚ>€ uÅ‚ş^¾|ù§5kÖLmØ°áıÖ­[ÿ:pàÀè¹sç^İ¸qã×ŞŞŞXÛÏÆßš˜˜xpäÈ‘ß	@€†Êã/[¶ìÓ®]»ŞtuuõÏÆaO·nİê]±bÅG !Yk×®:}úôP__ß“rÿîÈÈÈ£;w¾! º’»eË–·W¯^í›šš*ëïŸ?şU=§L	@€ì·ÂåË—+çTäë×¯¿ŒX„ hø^U«VM_¹r¥¯èÿãÎ;¿,Y²ä3ĞÍl‘M*0Gñ," š¢›3?uêÔë"Ë¢îz’€ M.@LÎÑÑÑ‡1ñâ8
V˜<xptãÆ“³ nÚ´i2î_äMP/Ë!´x%xllìaH_<©ä—yéÒ¥Ÿ¢°V$&¨‡À˜ Z!¾©ÎèöÜ¿ÿ.,krvvvÉÕ:EJ ü/ÃÃÃN<ùºœï=zt$·½b¦N@ Ô'?Ä§€Š~glß¾}æÇµ¬€ ÙkT…‹Jó&ˆ¶‰Zõ€ …v„EÃ\‘à5–C¹t @CĞÓÓó4Z#f;0®E+5Zh?@To:4záÂ…îîî§å6¸ı—>İ¶m[ö×çsR¤±Ÿ`®7Õ …+ÁQŒŠî19Ëir›œœ¼¿wïŞ±Ü:A²X5	`Î[!â-qöìÙÁø.>|8ké•çÑær1ğ]·g´=Y…¹o‚¨-äl´' jÚ·~ıú÷‘™)²Ê‰	¢ÓE:WG®€ %‰nÏÜªnÆ9Ù¡ÆsêsÑ&A $‰JíøøøƒÜiN gSÍÌ	t @í÷´··¿ÏÉâQ,Ë‰5Rq4æ€ ¿Ü/_¾|r÷îİç×®]ë;qâÄp[[ÛT9“%Úr$ˆ%SNÛDÛ©ûTû@^´h%8ÑÎÎÎ¡¢=8ñ&ÈYÅ>Õ@ñB*Û§R€ U}CÄ@‹-ú\$&È	Œ£‹4u¯8r%u4{5ƒaèúÖÿ¿{÷î±"Ù¡œVêÔ~‚X*¥î3ó‘ úİñ6ÈıÅÍ©Dá+uŸJN «u MHlUÌÙÅ²Ô>Ş,©{…t @İIóHer‚Øcœ
†	@€ºcf9”Ìç§èròù³q*5ğ„®[·îC’—.]ê¬J‘˜ '0.ÒÔi+W®,™níêê  ªş #7‡b=ÎÍ¥R¤ÑJªêÆ¹C¥îß'  æìÆ›!÷ «œ¥Pê^©.±af¶¾TC ä>À//^L.=¢X–ªGãZªS4•^Ï5€ sİ÷%çMm©í•©”èÌY¤í®§“¥ã-J€&è™Š	"K“ºOl´/uˆ=J]îk$¢/Š MÒ“3u¯Tiœ6QÉ1ˆñõÊF zĞ$Dv(•"VêR÷ˆ#W*	„svŠÕËäÏİÚI€Úu‚R÷Šı•Là™m?¼>¾cÜ(DZ·‹Ÿ--@ËJİ+6Õ”º>ß*u}|D£’ëëE€‰rÎQ"@ãR÷Še©‚Xª=º’ëk-@,{â—¿Y'ËJëE= Ôõ±¾Ôõ1q*¹¾Ä˜D¶'Şf\ók†    ` @ €         @ €         @ €         @ €         @ €         @ €         @ €  €A     ´
ÿ$Í‹qe¿µ    IEND®B`‚‰PNG

   IHDR   À   À   RÜl  ¨IDATxÚí[LUWÇÏDÓjmMhÅÄ¾ÚØ‰I­¶ÓMZjM&“`ëÃL/0‚
ŞbŒF5F4ŠÉ€
ã%BQ$V¼Œ8ÕÄˆ‚ÁpQ£Ä(Á=(Q”×¬5|»sÀsç²/kíõ7ù½4V8ß÷ÿÁÙë¬o-Ÿa>`	r¾à$q–q¶pŠ8'9—9œœ.£ÿÏ#^Ğë¢¿Ó@ÿÏIú7¶Ğ¿™D_ãCÔÛP„ÈÁ™ÌIåìäü‹Óêf§h¥¯-¾‡4úF ?Àj8?qr9Uœ>Â.}ô=î¤ï9ıƒ ‘ò'‘³S'qØÃ¥^K"½6ô¼ÃhN
§ŒÓãĞ£‡^c
½f ñ‹Éù™4{=ú`ôÒkÿ™j4a§€Ó­aèƒÑM5™¼ûÓ>Sƒ°‰¨Q†.¿¼ş?¡5ôN;b:©vŸ@ õG¿Ò{dK
¨¦@5ûİ¾-¼¦Ú&@ ùˆ£µî—ªí¼¢ZÇA ÷ÎÉÂ{|×²¨À¾¥Mc£»4R/ €CÄsJ<é=ùØ‹øÿ)Â&-O©GÀ†Õ
LD¯ÆB kHÂO}e$A€èù€³AR½ÔKã9õ§VŠ>ƒ á1“ó¡ñÏ©· ÃhóÕ[„Å³¼¥ƒ E“J‰œ¢C Zâ¼PhÇ6Ö¹şÏ9Mƒ¶4Q´`ŠÑ‚ 7]”­˜Š•0h…hª.ÌÀ¾}€—”OğM¡á oœ–ÀÉğOÃO~æo‚i^à+çğ€ÈÎ)úÚ+LÄjˆruh¢êˆ	¡h&ˆ’f»§ÌìŞÎ\…&‚©²s;µÛÊÑ<`åvm ³K€Íh°˜­ª0[šM[©ÿ,» ã±Ü	lD\ğ1AVÄƒ
ªvsÛÊ‡b+Øƒæ í¥ 	M“$‹ â $œÛÜ8œw¬àÄ6àæ	t®
‚& —IqK€xçò9Ş
Å»!@)Š$¡Ôi¾CÑd$:%€Ø”„s;lˆLwB€LHJ¦İÄáÁH>Eg§ ;Pd 9;ì ÁÀ©@~^œ9‰ ù(.P„|«ÇéEa"¼¦ÌZ&ÀßQT V	Oï«´,ä³gÏ&uŸâ­ [çBfgg³††JM²c`$§]ç"&''³9sæ°°ööv„J-:(ÃQ®{… &K—.e—/_F°Ô"#ª!@ò;lÛ¶=xğ áRƒêhøÅ,€ --?~œuuu!dò3)
Q¸à˜¬^½šÕÔÔ drS© âÜp† ‚””VPPÀ?~Œ°É‰Èò¨HHFÑÂÀdÑ¢EìÜ¹søì@NfG"À/(Xä˜lÜ¸‘İ¹sõ“‹²pøˆÓ‡‚E/€`îÜ¹¬¤¤„utt r ö²G€ù(Vì˜,_¾œ]½zµ”ƒ9áP†BY'€Inn.knnFMİåÔP¼oôAbY,€`Á‚¬¬¬ÉîÑC*À÷(’}˜¬]»–İºuõu‡é¡ÈEìÀÜ`WTTÄZ[[QggÉ% .¸pH “ÌÌLVYY‰Z;Gc0Æ 8Î`²yófvïŞ=ÔÜÆ`
ã ‚ùóç³#G°ÎÎNÔŞ^f`'
ã® &+W®d×¯_Gıícg p«»$˜ìvïŞÍ=z„>XOÕ`ÄØØFLÒÓÓÙéÓ§ñÙµˆ¬ğ`2Š"§ &b8¿¾¾=±Éş¤¢ r`~v°ÿ~ÖÖÖ†ŞÄNª¿ x V@ “%K–`8ß¢aS€JDL¶nİŠáüè©ô QO çÇD«)ÀHC]0œ#… PõÀp~TLü…ğ† &.dgÏÅgCó'!ÀÂ[˜lØ°Ãù¡Y"ÈA!¼)€9œøğaç&GPŒBxW ç‡¤Xp…ğ¾ ÎÈ	!À¿Q}0‡óO<‰ÏãWˆ!ì	€áüß¸-hAĞõÀüì`ß¾}ìÉ“':ö·Eğ]_ü‡ó/^¼¨[;„ ¸ıè:œßíCÈ!€ÆÃù= „Î¯ªªòt! É¦M›<ı€ @ĞÛnÎŸ?¯Å[ <C€Ë¢………º,‹şï!—áA€ß†jnŞ¼©İ2(>Ó\ 1VyâÄ	·F´`+„ælß¾555i½âW]?–-[Æ®\¹‚ÍpØ­— b@æàÁƒ¬½½ı¥íĞˆÑD€õë×³††ôuĞ@F"=.€’?sæ†äƒŒDb(Ş£ˆ5ıüü|±>ÄP<Eñ  «V­bÕÕÕèaÇ¢à`,	 vr=z×,…Çç8ÑCäää°û÷ï£oˆÃq ++W­Æp8.GWT \¶GÏCAÔ`İºu¬®®=Š<W$©'€8Ó§¼¼kú±3àŠ$\’§€ yyyìáÃ‡è‹5¸$×¤J,ÀŠ+Øµk×ĞëxC™pQöuF.æÍ›ÇJKKq²³õ¼sQ6nŠ”L 1Œ~÷î]ôÀv`
ã¾ ‹/f.\@ííeV Æ 0î	 6®íÙ³G×3:&! tI€5kÖ°ÚÚZÔÛı3?X€\È94Fw“ÜPLGœ@óat7ù!” ï‹Ó²P$ûÀ0º»'ÁQÆƒ
 8…BY/€F?tèÖôİ¥|pŞ	€}A †ÑQO÷™ qúP¬ØÃèØ¸&¯9£Ã@ğ
½ F—’²@Y&@2
 F—–Ù‘0ŠóE_€ÔÔTvìØ1£ËÉÊtØŠP8ÃèŞàÁrJ€? pÆÃè—.]BÀäç›hÔB€ÀÃèÅÅÅ¬­­á’ŸÚPJ€€atÅÉˆE 16Ö0Œ®(OÍÑÇhdë.À®]»XKK¥ÙCå;â9¯t-"†Ñ•åe7f((PŒÂp²® ãh/
TÙ÷ó©•òQX ùáæ:t~ J½÷k‡ ‚(0œ‘d:Râ8](2”.šg±M A&
$%+Ò<G#ÀpN=Š$£²i» ‚DHÆôh²­ ‚RHÂ?£Íq,ˆ™;Q|à2†áwÖ§“RĞ à2i±d8Vhp‰sœß¹-ÀX|6 \Zók~­@„† ‡™iEv­@°M±ÏªÜZ)ÀœÛh°‘±Q2
 ˜`àxu`=”1Ÿ¬şÂy‹f‹yKÙòÉ.€`,f›YµK€aFÿeh°‚rÊ”2˜ÅUhˆ‘*Ê’O5s¢‰ JQ†|ª
 ˜Èy†f‚yFÙñ©.€àkN7š
Â¤›2ãóŠ ‚iœ—h.‚—”Ÿ×ˆKŠqÀÆÎ'3é´ >zøM ıäŸátİ@0•óMÄs'ßöÈ €`
V‡ eà+·rè¦ ‚ßsšmi¦øtÀ<sôÂ 7bf÷’ æ½Äe…6œ²rO¿07ĞmÁVjÏoiŞb×Æ6Õ0™‰"Ï®ôü([Şd@0ÓˆĞxÑËÏdÌš¬˜Û©÷"<ÊSdçvf/àÿ–G0ªG§ŒoyTÀ<|'Ğ©ÃYÃ‚C« À»Ì1úoÿFÈää)õH™L©&€9eV‚°IG‰İÓ[` ßb¥HšïTÍ‘Ê˜×5eá!Ùµ‡Ü,#Šk‰ €õˆÛ+·¸ÇØ	^Q­ã¼¯à¿Z´Sg¶ jš¯Êê®˜|Ê)Àä™e“ZTSÏeÅ«øßcö7N‚1T»x/gÄë˜Œà¤sjì!5Ê šy>ºàÏ—œBç>‡§j£UtÀ³İlÄéÕ0ô½4˜2[æÍjÀFsæ’^¾à£‡^ã\zÍÚ÷á—÷8‰´Ö]çĞ×ÑkI¤×†C€ˆ‡öâäıGu÷Iö>úóè{N@ÿ €+JâL£¿RĞ.rÚ]{;}í<ú^¦è²rä}ø’†@–ıWúâœá\ãÜá4ÿÿórĞ‡MæŸ&Ú`v…Ş¯srèßü‘¾Ş¿[ÄëV‹âÚ-~    IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   sRGB ®Îé   bKGD ÿ ÿ ÿ ½§“   	pHYs  ×  ×B(›x  ;IDATxÚíš¿oe‡?o°¯A
”=[AQ;K„D™Â@¥ j"!w·x2e‚H©4EªÔĞH,ü˜²Ä'‘Z1%B¤HgeDü–Šlœ—%C¨JIrçûõ>Ïhç.§{÷ë;Ÿ%                            85¾ï_‚àFÖÿ÷N}şApÃsGÒ[Ífs*ã]pgåeŒùúØKo6—z½Ş¸!ÿÖÓ¯c2‹€ 
&ÿxÍfóå8wÀ1ùÇ¸Øl6ÏÇq¼M Õ¹à»yBù™D@ Ë—´z†M/6Wz½Ş6””0W$İ>ëöÆ˜7æææ&ã8ş=Íãš@M6+ßZ{7ánìáááŸi›AÏØå¯Jº™T¾µöÃ(Š~$ ä@Iäß‘t½Èò	Àqùà¸|Iª¡,=|ß¿+i¥,ò™ )Ë7Æ”J>8.Ÿ —/ñUp"Â0¼W¶Ï|&@Šò­µŸ•Y>8.Ÿ —O §$‚û’>­Š|p\>8.Ÿ —O Ë—xôŸø¾ÿ¤Oª,Ÿ	ğùÆ˜ÊË' Çå€ãò¥­®®NÌÌÌÔööö‹t"Â0¼%é‹Ä+Ê˜Ï»İîwe‰>Ó	°°°P›Ş°Ö÷<oy}}ı¯‚\í+éšK+?ó	ĞétêçE’Z’^F¯ÏÏÏ?ÜßßÿùŸ N§Şï÷#Iï?õÖv“Àuù™L€ÅÅÅsµZmKÒÒ3ŞÎmAğÀuùcŸ ív{r0ü"éÿùÓÏó–²šGò¯º.¬Éß’´xÂM2‰ ùÿfb\ò‡Ãá¯§/I—ƒÁãv»=‰ü_´Z-ÏZû³¤wÏ°ù«£Ñ¨9;;»upp0JYşm%ÿgéîó3Ÿ õz=2Æ\N°‹¥Z­¶Ùjµ¼”å™‚üë÷T!RÀZûƒ¤'	Oôåz½ş[«Õz1éñø¾¿–‚|k­½R5ùc	 Š¢]kíRÒ$]ª×ëD`|ß_3Æ|Ìg~w¾ï¿mŒy,)é*Ş‡Ë›››ON)ÿòsºÈy¤&_Ò•*ËëÈi˜ Ö$}”†ün·û“*N&Ï2ŠÀ„aø½µöä,€"@~ÑH9‚İáp¸tòË@ÚLMM-÷ûı5Iä—$ I
Ãğ=kíCIçîêI’µv%Š¢ûrÜ~šâ$`å—1€Dà¼üÜÈ1ä%€"@~ÑÈ0ä5€"@~ÑcÈ/K cˆ ùe Å_Ö Rˆ ùe AÈ¯J gˆ ùUà ¿ªœ äW=€çD€|WxFÈw-€c<’tùÁÎ                             ¸Á?êL¶‰yí*w    IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   sRGB ®Îé   bKGD ÿ ÿ ÿ ½§“   	pHYs  ×  ×B(›x  wIDATxÚíİOheÇñß£“u1‰Ôú¿
z°‚,ŠŠ^
bÀ)¦g6‹!B¼xoÒƒ
C2˜ ±‚Bæ`A1Dğ`ÑŠmÚÄ’ÔÔÌî¼¬âAL6;ûç|?ÛÎÎ³ÏûËûÎ»ìÎJ            h¬•ƒ«Õj£Ñ–tÜ9÷ˆ¤ÛÍì6IeZÛ×œs—%ıjf_KZHÓt1I’Í Ã»ÌìI/Kêg\ºjCÒ{’NÆq¼Öö „axØÌæ% ÷=å¼¤‘8Ï6sĞM~hfK~Oº_Ò™(ŠoËEÑÓ’>•Ğë–Jãx)· ŒîïëëûNÒô×—Ò4}8I’+¹,¥Ré-ß+÷Ağf.3@µZ½³Ñhü$é&úê×–1‚û¦§§/·4Ôëõ¾—Êõz}¤å%ÀÌÒKoËãàAúè­ƒy€=¿¿îÍ# ôÑ[ƒ¹lQ\€ € € € € € € € € € € € €  ¨ºù'é#I§Ò4ıRÒF’$[y<ñäääÍëëëƒ’5³$Iê+X}¹ØöSÁQ¹6œwÍÌ^œ]ìÄ‹;”eÙ‚¤
RßÅql½¶ÔsÏuª¹’433óM–eGô×)}¯Ïûk€SµZíL§O:77÷£™½[€úü@–eïwí¢Ã¹yßëó> FãÛn5¸\.Ÿó½>ï$ÉF·<55µî{}EÚş§J¥r‹sîÆ®z»¾…Û“õùp¸İ:ø™¤ÕİşEQ´o/×ç} @ @ °g/s°Eõ1€ € € € € € € € € € € € €  ìeEü<Àşÿûù´6}ÕÍÛú˜XÀĞCœsëf¶¶ÛãK¥’ÛËõy€Z­v¤—ÿcz½>– ôv &&&»õbÇÇÇ÷ù^Ÿ÷ØÜÜ<Ô­omm=î{}ŞÀÌÆ»8ã½ê{}E¸x)Ã§:}ÒJ¥rBÒHêó> ™®T*Ïtê„QM:çfR_¾3òŠk×¾õŸÛ°•ËåÏó¾9Âèèèİ¥RiØ9÷š¤'
Xßlw—°n Ğ‹·‰Ã^~              =€Úä­õ<p>úÉÌ~Î# çh¥Ÿœsß· çÜ‡´Ò[´€ NKúƒ^zçZo÷ mıjyyùêĞĞĞ ™=IO½òöÌÌÌ'¹lëõúII¿ĞSo\JÓôÜŞH’d5Ë²g%ıNo{ŞÕ,Ë&Ire'Şñ ®¬¬\úÁÌ©˜÷*Äº/©Z«Õ–v¼Ulöa6³yIèwO9/i$ã³ÍÔô[ÁµZí‹ƒ’^—t‰¾wİEI¯¤iúP³ƒ¿«àßªÕj£Ñ–t\Òc×g…[“¶ZsÎ]0³¯$-¤iº˜$É&m           û,…¿:“~=µ    IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   sBIT|dˆ  IDATxœíÚ=j[QĞ¥5¼lÁàmL² /@¤I©ÚËpmHuZ€7¼CŠ`p¶ HãtÓÈ…m]'Ÿ~æœöqaÄûx‚¹_                 °‹rÛŒm6›-—Ë‹ÖÚykí$""3ï2óz†Ë«««_ÛqL¥0NÏ"bŞZ;Şô<3ï#âób±¸s®m*€étz¶Z­¾eæ«¿93Wñ±J&Û`³Ùì("æÿzù­µIDÌ×g^‰ ¬ÿó7~ö7i­/—Ë‹·œiW”@kí|Œ3û¨J NÆ8³J€¾ÈÌ»1Îì£*¸ãÌ>*€a.×Kÿ’™÷Ã0\¾åL»Â"è‹ µX,n&“É‡×¾ëge^~DÄ»m0¦ÛÛÛŸ§§§_şDÄûÖÚQDüÎÌï™ùe†OóùüÇ¶ç  €7RføH)ô©RP
}©L ÜlVâ.@)´¯D ”BûJ@)´¯J ”B;J€¾P
í« ¥ĞP
í³zÆ"è@)…n¦ª
  @e6”BŸ* ¥Ğ—ÊÀ]Àf%î”BûJ@)´¯D ”Bûª@)´£D è+ ¥Ğ¾*P
í( ¥Ğ>‹ g,‚”RèfJ¡J¡                 Àú/i@æôŞ6ò    IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   sRGB ®Îé  NIDATxíİ=nQ†a&q„T°’¬ Óe”A¦qãÎeäXJ‡DË
Ò%{`'TüQ„ï´Hã×ç;ç¾–R$š™{æ9¯"¹ÀîõøB @ @ @ @ @ @ @ @ @ @ @ @ @ @ 1»M9ŸÏ?m·Û?İ®Î»j4}[,ÿòîÖ»ëFo¤ü‰úış‡À×ü'œ¿³=ãüU~®õ2~Øu&% ]˜LB &ì:‡€Î.L&! vC	@g&“€	»Î¡ ³“IÀ„]çPĞÙ…É$`Â®s(èìÂd0a×9” tva2	˜°ëJ :»0™„ LØu% ]˜LB &ì:‡€Î.L&! vC	@g&“È}.`:şlšæK¦ÆÇãñø=óŞN·¥Ù~§ÿwºøä¢4ÛzµZ=ü³é_å>0~‡¿I%7‚¢ ¶Nïö£èp—û }‡Ùl6V Ã¹]şír¹ÜdÜ[ôÉ Ú7ìò[gÙ ‚D ½|ù œG ¿|8ÀÅòİà,7Ëw€“\-ß] â¸[¾Ë D#p¹|·ˆEàvù®‰Àõòİ`ûå‡À(‚ËÀ;Gfù¡x§B-?\ …#·üŠ äòÃpåÂ.?t WŠ ôòÃpaá—_E ™T±üjxcÕ,¿ª :FPÕò«àLÕ-¿Ê ^‰ ÊåWÀI=Õm´sòUP ığIû§à<@ @ @ %©Ÿ~÷ïçİn÷¬tíY†ÃáCúİÃûk?7÷yR?#(ıŞß~z‘»Ü—ñp_zÇÇ4§L ü˜8Õœ‘ 
âzx4xØRÁ	  ®‡G€‡-œ‘ 
âzx´Ô·“Éd¿Ùlî=ÀåÎ8e¾Ì}îC @ @ @ @ @ @ @ @ @ @ @ @ @ 0x¤&"jËc     IEND®B`‚‰PNG

   IHDR   €   €   Ã>aË   sRGB ®Îé   bKGD ÿ ÿ ÿ ½§“   	pHYs  ×  ×B(›x   IDATxÚíİÁKa‡ñï»;3»‚IQ‡ ˆ¤ìØ%é†B&b½xê,u ÿ£$Td$…Š%‚¢CtX:Ø!(QY¡ôP3«o—N]vtGw_}>çwwõ7óî®/(             €ÃÀìõccc=’†­µ7%]–Ô+é¤¤<cİWÛ’Ö$­Kúh­­vuu½˜œœÜ< Â0Ìû¾WÒ£í·f­}Øh4GQ´½o„axÊ÷ı9IƒÌ¼óXkßJ
gffV3 Ã^ß÷ßI:Ï¨;Ú’çyƒ•J¥fq.Í¢¡¡¡B\|'\H’d>Ã ³ J¥Ò}kí5fëÈ;{c®A0‘ÉP.—K’¾J:Îh²‘$É¹(Š~¶t0ÆŒrñt"‚[-oÖÚféì§‚‘–t‘Q:ëRœfÎ:“E İÌÑYÇ2ùˆÃ‹    € @       € @       € @       € @ p‚—õNOO›ıüËå²mçë·[³ßŸ;    € @     €ÿ¤ù!–1¹«ÙßF¸°€ @     GŠsgÛ­İg9¶     € @    v‰3‡\g·£³6³Ø~0GGoïÆ,·€µö3£tÓÎÎÎ§–ÈårsŒÒÑwø)®]Ó 
…ÂsIëŒÓ9«q¿l¶(ßlA­V‹ûûûc†™©S&fggßgò=ÀÊÊÊIo˜©3^'Iò4Õ6‘fÑââbÃó¼Û’¾0Û·”$É(Š¶3@’*•J½X,HZ`ÆëY±X¼EÑFÚäwóìµZ-îëë›ó<oYÒI=Ì¼#|7ÆÜK’äÁÔÔÔï]}W°×W/Æq|ÃZ;jŒtVR7×â@lIú&éC.—›¯×ë¯ªÕêÆ             ÀÑõµ”·\æ`Ö¹    IEND®B`‚‰PNG

   IHDR         rß”  ¯IDATx^•ÓQgäPÇáw3Weo‡!ÃÊĞ/0„Ñ|‚¥,ı"ÛS–~‰ÚzWÊ0ôª„«a˜Û6çœıÉ¾œLé^<BşoßÿœÖw¹¬ïşôıäİ¤õËGî!hwÜBú¢oÎIË¶nñ¸Ù€p£®Àw¯;EQH‘ºÑ	¦Zº
ËWxÄTwİã¦+ñ˜@Ô9V/Z!Ç¢&xĞ
»>)3)r\B@ÄŒ_6Rz<c+`„.(p‰±\4+NÊœg‹g
í‘0Ã°CSähK}6Ñl
	xA†c¤Á$`®×&• ÀÌŸi½`CN‡-ìJ³a©ó´¥•;gg0ïc~‹G(ôÈH¶€r{%^i»cƒº,r}à€[È	ÓŠÙ¨-2ò¤C9ÓÈ)³G†4;Oïa?2£'·Ç;/saÖÚ6Øƒ¬OOh)ëJ_! ó9¨Wk›öˆó|6ïrÆ¾CÎ`æã2Jçô„MÈOÌÌ!g´³˜C0:é‘Åš>#ˆQ8cæınœ‡Yı{}ÌDÆ|ÄzŞc<aaÌ»w¬ÏÏ˜ÅbÍ<c…1
, oJ(³hp×1
,!P”iŞª7ÍÆ,uWÜÛÓûÇ'@¥#(‘¢V)e°Ô4Käˆÿuè7Ä9H@‰5jˆª-ïPBäÚÑpî»I %RÔ#§¨5+!	
Ì"9á'Ş7s
©>É}Î5‚
©>Êt,‘5&øQaÍLiÙÓ©àÏoˆ®H¯†«úHQATï]#_T!Õçç
)j2‰ôÈ°Òöim5JWş?J¤¨uO
vÛ¶‡BB(E‰T•sX4¦Äš‚%DÔ_@ëqo°¾˜F    IEND®B`‚‰PNG

   IHDR         rß”  ÀIDATx^•ÔAg\QÆñÿÛ{7!«RB(a(eh•î†a4Ÿ ”ÒU¿Vé¢º(ıá2dJ¡”B	e¶mç>5¯‡ã^s2Í³™ÅÜûşÎûŞsNûüı@”ğâ8@b•<#˜Ÿ(¡)A›ï€À/àØè0€uNŒìŠ7ÆàQ¾ ‚‹ÿ€©ß}„À5_D	¾F|NÌ1Ú%ŠÑ ±Îïb°¬½¾¶¬õŠĞgT0TP"Ñ9pi‘J&Æ
XPXµHgHçÀK¶EY`YPÕ°¥ÇXËÆ8kéûÁ±Gñ¢2¶2Şp§Ò“Áƒmùi¬ZzA°ÊbF+«<0:¾›{âÎ¬AËÚ±" E=ÎÊ«8AîĞ×`'c FÍs;sëe²œ¿Îg©Şi†Ã¢˜‰-\“­ú5Î=Ù bC¶ŸÑìLÆ	şeˆ[£`
‚±PÀqÍ¿{+‰	öµ+cƒ.hJI”âÂc¼İò¯Gªu£ ¥Ï¢šKÛ¾‰<Ò~ı§
:{ }vg_ÄÀvƒ¹iT§şİ?Ë¸®M£Åà|àÈ2N}i	ÄcÊ9½ŞÚá:w©ŠqèÎ¸ŒÎnšr¤ş†qg;°&w¢ÁŒp@¨`“êæWbs ­¡"<^£’oš2ÆÎ«¦^¡ÁªçºkôŠ‰k."QmÅ__ÊÑùö§^3dH8˜QE×ì”êç¦Ã`©*†1w6Š0¿ë»ÍñnîÒ¢Q9÷\ƒr›$BùŒÑÑ™}€ƒDjZõ}®PDK¬äJ¤á³FÇß^şöŞ¥Üˆ²Bƒ¹Äj	-ã5êî•£ry‹(‹Æ]±3ª}ïSğ¢e½ìD£±ûsÆuø{ªSG/]    IEND®B`‚‰PNG

   IHDR         nv    #IDATx^UÇ±   C0ÿĞkuÆÒ,%X‚%³t– Ø9¤8!¬—‘3    IEND®B`‚‰PNG

   IHDR         J~õs  ^IDATx^•Ó½KBQ‡ñ›EXQD&H[CK´¸õ²4µE†€¶D‹ÔĞØ´õ2Dc9ÅCÑP$Dm‘´HP’ö¢aAŠz‚Ãá@ŞS(Ïö½÷3ü†c‰&³ĞÑK;N	Ğ‡eLƒ¶xEPd7RÄşä¨‘$A	Á)NÆ¸&üè'Kq9,!œ3Lœ3ˆ#ª!‚2H†°\ ˜VGß+Pe„Œ@şôÉÛdxY¡B›	œ l•	±I™(]v5€~%}&BÇoà¢`y¼¬işÄN°˜£Z
øhá‹4
eX¤S,fy«#¹·²J[…²ø%ud;é‘Ä…I½¢€nˆš&èW< xÑ@çb†	*xÑS|“ÀÖB–ÄQÿÍæYV$dÆxÇíÅÓÇï6
F¹” fæÔ?û¤)Ú€h²òdsˆÃ(>    IEND®B`‚‰PNG

   IHDR         J~õs  _IDATx^•Ó»K‚Q‡ñ7‹°¢ˆL†Z¢Å­ËÒÔ!AşbØ-jPCcSĞÖeˆÆjŠ(Š„¨-’	JÒ.¤¨'8ä{
åÙ¾œÏğ%ÌBG7­8ñ2M–1úØàAUÜxHûŒ’¥J‚CŠNq2Ì5á¿@/²ŒÈaàœâ$ñ˜AAP„l/iÂfp`B}¯@…A¶80ùè“=6É 4ğ±D™8AØ*bQ:ì j EIúL„¶ßÀEŞrøXÑü‰9œ`1C¥äñÓÄ)>J3O»XLñVC¦åŞÌ29nÊ@ÖIî4x¤K~Æôz¬€®Ÿª&kèW< xÑ@çb’	ÊøĞã|s(­3„,CÌ²¨HÈŒ)ğÛ3¦ß®q)AÕÌ©;êvIQ°Ñ`?iˆO¢öi#’    IEND®B`‚@namespace "http://www.w3.org/1999/xhtml";html{display: block} head{display: none}meta{display: none}title{display: none}link{display: none}style{display: none}script{display: none} body{display: block;margin: 8px}body:-webkit-full-page-media{background-color: rgb(0, 0, 0)}p{display: block;-webkit-margin-before: 1__qem;-webkit-margin-after: 1__qem;-webkit-margin-start: 0;-webkit-margin-end: 0}div{display: block}layer{display: block}article, aside, footer, header, hgroup, main, nav, section{display: block}marquee{display: inline-block}address{display: block}blockquote{display: block;-webkit-margin-before: 1__qem;-webkit-margin-after: 1em;-webkit-margin-start: 40px;-webkit-margin-end: 40px}figcaption{display: block}figure{display: block;-webkit-margin-before: 1em;-webkit-margin-after: 1em;-webkit-margin-start: 40px;-webkit-margin-end: 40px}q{display: inline}q:before{content: open-quote}q:after{content: close-quote}center{display: block; text-align: -webkit-center}hr{display: block;-webkit-margin-before: 0.5em;-webkit-margin-after: 0.5em;-webkit-margin-start: auto;-webkit-margin-end: auto;border-style: inset;border-width: 1px}map{display: inline}video{object-fit: contain} h1{display: block;font-size: 2em;-webkit-margin-before: 0.67__qem;-webkit-margin-after: 0.67em;-webkit-margin-start: 0;-webkit-margin-end: 0;font-weight: bold}:-webkit-any(article,aside,nav,section) h1{font-size: 1.5em;-webkit-margin-before: 0.83__qem;-webkit-margin-after: 0.83em}:-webkit-any(article,aside,nav,section) :-webkit-any(article,aside,nav,section) h1{font-size: 1.17em;-webkit-margin-before: 1__qem;-webkit-margin-after: 1em}:-webkit-any(article,aside,nav,section) :-webkit-any(article,aside,nav,section) :-webkit-any(article,aside,nav,section) h1{font-size: 1.00em;-webkit-margin-before: 1.33__qem;-webkit-margin-after: 1.33em}:-webkit-any(article,aside,nav,section) :-webkit-any(article,aside,nav,section) :-webkit-any(article,aside,nav,section) :-webkit-any(article,aside,nav,section) h1{font-size: .83em;-webkit-margin-before: 1.67__qem;-webkit-margin-after: 1.67em}:-webkit-any(article,aside,nav,section) :-webkit-any(article,aside,nav,section) :-webkit-any(article,aside,nav,section) :-webkit-any(article,aside,nav,section) :-webkit-any(article,aside,nav,section) h1{font-size: .67em;-webkit-margin-before: 2.33__qem;-webkit-margin-after: 2.33em}h2{display: block;font-size: 1.5em;-webkit-margin-before: 0.83__qem;-webkit-margin-after: 0.83em;-webkit-margin-start: 0;-webkit-margin-end: 0;font-weight: bold}h3{display: block;font-size: 1.17em;-webkit-margin-before: 1__qem;-webkit-margin-after: 1em;-webkit-margin-start: 0;-webkit-margin-end: 0;font-weight: bold}h4{display: block;-webkit-margin-before: 1.33__qem;-webkit-margin-after: 1.33em;-webkit-margin-start: 0;-webkit-margin-end: 0;font-weight: bold}h5{display: block;font-size: .83em;-webkit-margin-before: 1.67__qem;-webkit-margin-after: 1.67em;-webkit-margin-start: 0;-webkit-margin-end: 0;font-weight: bold}h6{display: block;font-size: .67em;-webkit-margin-before: 2.33__qem;-webkit-margin-after: 2.33em;-webkit-margin-start: 0;-webkit-margin-end: 0;font-weight: bold} table{display: table;border-collapse: separate;border-spacing: 2px;border-color: gray}thead{display: table-header-group;vertical-align: middle;border-color: inherit}tbody{display: table-row-group;vertical-align: middle;border-color: inherit}tfoot{display: table-footer-group;vertical-align: middle;border-color: inherit} table > tr{vertical-align: middle}col{display: table-column}colgroup{display: table-column-group}tr{display: table-row;vertical-align: inherit;border-color: inherit}td, th{display: table-cell;vertical-align: inherit}th{font-weight: bold;text-align: -internal-center}caption{display: table-caption;text-align: -webkit-center} ul, menu, dir{display: block;list-style-type: disc;-webkit-margin-before: 1__qem;-webkit-margin-after: 1em;-webkit-margin-start: 0;-webkit-margin-end: 0;-webkit-padding-start: 40px}ol{display: block;list-style-type: decimal;-webkit-margin-before: 1__qem;-webkit-margin-after: 1em;-webkit-margin-start: 0;-webkit-margin-end: 0;-webkit-padding-start: 40px}li{display: list-item;text-align: -webkit-match-parent}ul ul, ol ul{list-style-type: circle}ol ol ul, ol ul ul, ul ol ul, ul ul ul{list-style-type: square}dd{display: block;-webkit-margin-start: 40px}dl{display: block;-webkit-margin-before: 1__qem;-webkit-margin-after: 1em;-webkit-margin-start: 0;-webkit-margin-end: 0}dt{display: block}ol ul, ul ol, ul ul, ol ol{-webkit-margin-before: 0;-webkit-margin-after: 0} form{display: block;margin-top: 0__qem}label{cursor: default}legend{display: block;-webkit-padding-start: 2px;-webkit-padding-end: 2px;border: none}fieldset{display: block;-webkit-margin-start: 2px;-webkit-margin-end: 2px;-webkit-padding-before: 0.35em;-webkit-padding-start: 0.75em;-webkit-padding-end: 0.75em;-webkit-padding-after: 0.625em;border: 2px groove ThreeDFace;min-width: -webkit-min-content}button{-webkit-appearance: button} input, textarea, keygen, select, button, meter, progress{-webkit-writing-mode: horizontal-tb !important}input, textarea, keygen, select, button{margin: 0__qem;font: -webkit-small-control;text-rendering: auto; color: initial;letter-spacing: normal;word-spacing: normal;line-height: normal;text-transform: none;text-indent: 0;text-shadow: none;display: inline-block;text-align: start}input[type="hidden" i]{display: none}input{-webkit-appearance: textfield;padding: 1px;background-color: white;border: 2px inset;-webkit-rtl-ordering: logical;-webkit-user-select: text;cursor: auto}input[type="search" i]{-webkit-appearance: searchfield;box-sizing: border-box}input::-webkit-textfield-decoration-container{display: flex;align-items: center;-webkit-user-modify: read-only !important;content: none !important}input::-webkit-clear-button{-webkit-appearance: searchfield-cancel-button;display: inline-block;flex: none;-webkit-user-modify: read-only !important;-webkit-margin-start: 2px;opacity: 0;pointer-events: none}input:enabled:read-write:-webkit-any(:focus,:hover)::-webkit-clear-button{opacity: 1;pointer-events: auto}input[type="search" i]::-webkit-search-cancel-button{-webkit-appearance: searchfield-cancel-button;display: block;flex: none;-webkit-user-modify: read-only !important;-webkit-margin-start: 1px;opacity: 0;pointer-events: none}input[type="search" i]:enabled:read-write:-webkit-any(:focus,:hover)::-webkit-search-cancel-button{opacity: 1;pointer-events: auto}input::-webkit-inner-spin-button{-webkit-appearance: inner-spin-button;display: inline-block;cursor: default;flex: none;align-self: stretch;-webkit-user-select: none;-webkit-user-modify: read-only !important;opacity: 0;pointer-events: none}input:enabled:read-write:-webkit-any(:focus,:hover)::-webkit-inner-spin-button{opacity: 1;pointer-events: auto}keygen, select{border-radius: 5px}keygen::-webkit-keygen-select{margin: 0px}textarea{-webkit-appearance: textarea;background-color: white;border: 1px solid;-webkit-rtl-ordering: logical;-webkit-user-select: text;flex-direction: column;resize: auto;cursor: auto;padding: 2px;white-space: pre-wrap;word-wrap: break-word}::-webkit-input-placeholder{-webkit-text-security: none;color: darkGray;pointer-events: none !important}input::-webkit-input-placeholder{line-height: initial;white-space: pre;word-wrap: normal;overflow: hidden;-webkit-user-modify: read-only !important}input[type="password" i]{-webkit-text-security: disc !important}input[type="hidden" i], input[type="image" i], input[type="file" i]{-webkit-appearance: initial;padding: initial;background-color: initial;border: initial}input[type="file" i]{align-items: baseline;color: inherit;text-align: start !important}input:-webkit-autofill, textarea:-webkit-autofill, select:-webkit-autofill{background-color: #FAFFBD !important;background-image:none !important;color: #000000 !important}input[type="radio" i], input[type="checkbox" i]{margin: 3px 0.5ex;padding: initial;background-color: initial;border: initial}input[type="button" i], input[type="submit" i], input[type="reset" i]{-webkit-appearance: push-button;-webkit-user-select: none;white-space: pre}input[type="file" i]::-webkit-file-upload-button{-webkit-appearance: push-button;-webkit-user-modify: read-only !important;white-space: nowrap;margin: 0;font-size: inherit}input[type="button" i], input[type="submit" i], input[type="reset" i], input[type="file" i]::-webkit-file-upload-button, button{align-items: flex-start;text-align: center;cursor: default;color: ButtonText;padding: 2px 6px 3px 6px;border: 2px outset ButtonFace;background-color: ButtonFace;box-sizing: border-box}input[type="range" i]{-webkit-appearance: slider-horizontal;padding: initial;border: initial;margin: 2px;color: #909090}input[type="range" i]::-webkit-slider-container, input[type="range" i]::-webkit-media-slider-container{flex: 1;min-width: 0;box-sizing: border-box;-webkit-user-modify: read-only !important;display: flex}input[type="range" i]::-webkit-slider-runnable-track{flex: 1;min-width: 0;-webkit-align-self: center;box-sizing: border-box;-webkit-user-modify: read-only !important;display: block}input[type="range" i]::-webkit-slider-thumb, input[type="range" i]::-webkit-media-slider-thumb{-webkit-appearance: sliderthumb-horizontal;box-sizing: border-box;-webkit-user-modify: read-only !important;display: block}input[type="button" i]:disabled, input[type="submit" i]:disabled, input[type="reset" i]:disabled, input[type="file" i]:disabled::-webkit-file-upload-button, button:disabled, select:disabled, keygen:disabled, optgroup:disabled, option:disabled, select[disabled]>option{color: GrayText}input[type="button" i]:active, input[type="submit" i]:active, input[type="reset" i]:active, input[type="file" i]:active::-webkit-file-upload-button, button:active{border-style: inset}input[type="button" i]:active:disabled, input[type="submit" i]:active:disabled, input[type="reset" i]:active:disabled, input[type="file" i]:active:disabled::-webkit-file-upload-button, button:active:disabled{border-style: outset}input:disabled, textarea:disabled{color: #545454}option:-internal-spatial-navigation-focus{outline: black dashed 1px;outline-offset: -1px}datalist{display: none}area{display: inline;cursor: pointer}param{display: none}input[type="checkbox" i]{-webkit-appearance: checkbox;box-sizing: border-box}input[type="radio" i]{-webkit-appearance: radio;box-sizing: border-box}input[type="color" i]{-webkit-appearance: square-button;width: 44px;height: 23px;background-color: ButtonFace; border: 1px #a9a9a9 solid;padding: 1px 2px}input[type="color" i]::-webkit-color-swatch-wrapper{display:flex;padding: 4px 2px;box-sizing: border-box;-webkit-user-modify: read-only !important;width: 100%;height: 100%}input[type="color" i]::-webkit-color-swatch{background-color: #000000;border: 1px solid #777777;flex: 1;min-width: 0;-webkit-user-modify: read-only !important}input[type="color" i][list]{-webkit-appearance: menulist;width: 88px;height: 23px}input[type="color" i][list]::-webkit-color-swatch-wrapper{-webkit-padding-start: 8px;-webkit-padding-end: 24px}input[type="color" i][list]::-webkit-color-swatch{border-color: #000000}input::-webkit-calendar-picker-indicator{display: inline-block;width: 0.66em;height: 0.66em;padding: 0.17em 0.34em;-webkit-user-modify: read-only !important;opacity: 0;pointer-events: none}input::-webkit-calendar-picker-indicator:hover{background-color: #eee}input:enabled:read-write:-webkit-any(:focus,:hover)::-webkit-calendar-picker-indicator, input::-webkit-calendar-picker-indicator:focus{opacity: 1;pointer-events: auto}input[type="date" i]:disabled::-webkit-clear-button, input[type="date" i]:disabled::-webkit-inner-spin-button, input[type="datetime-local" i]:disabled::-webkit-clear-button, input[type="datetime-local" i]:disabled::-webkit-inner-spin-button, input[type="month" i]:disabled::-webkit-clear-button, input[type="month" i]:disabled::-webkit-inner-spin-button, input[type="week" i]:disabled::-webkit-clear-button, input[type="week" i]:disabled::-webkit-inner-spin-button, input:disabled::-webkit-calendar-picker-indicator, input[type="date" i][readonly]::-webkit-clear-button, input[type="date" i][readonly]::-webkit-inner-spin-button, input[type="datetime-local" i][readonly]::-webkit-clear-button, input[type="datetime-local" i][readonly]::-webkit-inner-spin-button, input[type="month" i][readonly]::-webkit-clear-button, input[type="month" i][readonly]::-webkit-inner-spin-button, input[type="week" i][readonly]::-webkit-clear-button, input[type="week" i][readonly]::-webkit-inner-spin-button, input[readonly]::-webkit-calendar-picker-indicator{visibility: hidden}select{-webkit-appearance: menulist;box-sizing: border-box;align-items: center;border: 1px solid;white-space: pre;-webkit-rtl-ordering: logical;color: black;background-color: white;cursor: default}select:not(:-internal-list-box){overflow: visible !important}select:-internal-list-box{-webkit-appearance: listbox;align-items: flex-start;border: 1px inset gray;border-radius: initial;overflow-x: hidden;overflow-y: scroll;vertical-align: text-bottom;-webkit-user-select: none;white-space: nowrap}optgroup{font-weight: bolder;display: block}option{font-weight: normal;display: block;padding: 0 2px 1px 2px;white-space: pre;min-height: 1.2em}select:-internal-list-box optgroup option:before{content: "\00a0\00a0\00a0\00a0";}select:-internal-list-box option, select:-internal-list-box optgroup{line-height: initial !important}select:-internal-list-box:focus option:checked{background-color: -internal-active-list-box-selection !important;color: -internal-active-list-box-selection-text !important}select:-internal-list-box:focus option:checked:disabled{background-color: -internal-inactive-list-box-selection !important}select:-internal-list-box option:checked{background-color: -internal-inactive-list-box-selection !important;color: -internal-inactive-list-box-selection-text !important}select:-internal-list-box:disabled option:checked, select:-internal-list-box option:checked:disabled{color: gray !important}select:-internal-list-box hr{border-style: none}output{display: inline} meter{-webkit-appearance: meter;box-sizing: border-box;display: inline-block;height: 1em;width: 5em;vertical-align: -0.2em;-webkit-user-modify: read-only !important}meter::-webkit-meter-inner-element{-webkit-appearance: inherit;box-sizing: inherit;display: none;-webkit-user-modify: read-only !important;height: 100%;width: 100%}meter::-webkit-meter-inner-element:-internal-shadow-host-has-appearance{display: block}meter::-internal-fallback:-internal-shadow-host-has-appearance{display: none}meter::-webkit-meter-bar{background: linear-gradient(to bottom, #ddd, #eee 20%, #ccc 45%, #ccc 55%, #ddd);height: 100%;width: 100%;-webkit-user-modify: read-only !important;box-sizing: border-box}meter::-webkit-meter-optimum-value{background: linear-gradient(to bottom, #ad7, #cea 20%, #7a3 45%, #7a3 55%, #ad7);height: 100%;-webkit-user-modify: read-only !important;box-sizing: border-box}meter::-webkit-meter-suboptimum-value{background: linear-gradient(to bottom, #fe7, #ffc 20%, #db3 45%, #db3 55%, #fe7);height: 100%;-webkit-user-modify: read-only !important;box-sizing: border-box}meter::-webkit-meter-even-less-good-value{background: linear-gradient(to bottom, #f77, #fcc 20%, #d44 45%, #d44 55%, #f77);height: 100%;-webkit-user-modify: read-only !important;box-sizing: border-box} progress{-webkit-appearance: progress-bar;box-sizing: border-box;display: inline-block;height: 1em;width: 10em;vertical-align: -0.2em}progress::-webkit-progress-inner-element{box-sizing: inherit;-webkit-user-modify: read-only;height: 100%;width: 100%}progress::-webkit-progress-bar{background-color: gray;height: 100%;width: 100%;-webkit-user-modify: read-only !important;box-sizing: border-box}progress::-webkit-progress-value{background-color: green;height: 100%;width: 50%; -webkit-user-modify: read-only !important;box-sizing: border-box} u, ins{text-decoration: underline}strong, b{font-weight: bold}i, cite, em, var, address, dfn{font-style: italic}tt, code, kbd, samp{font-family: monospace}pre, xmp, plaintext, listing{display: block;font-family: monospace;white-space: pre;margin: 1__qem 0}mark{background-color: yellow;color: black}big{font-size: larger}small{font-size: smaller}s, strike, del{text-decoration: line-through}sub{vertical-align: sub;font-size: smaller}sup{vertical-align: super;font-size: smaller}nobr{white-space: nowrap} :focus{outline: auto 5px -webkit-focus-ring-color} html:focus, body:focus, input[readonly]:focus{outline: none}embed:focus, iframe:focus, object:focus{outline: none}input:focus, textarea:focus, keygen:focus, select:focus{outline-offset: -2px}input[type="button" i]:focus, input[type="checkbox" i]:focus, input[type="file" i]:focus, input[type="hidden" i]:focus, input[type="image" i]:focus, input[type="radio" i]:focus, input[type="reset" i]:focus, input[type="submit" i]:focus, input[type="file" i]:focus::-webkit-file-upload-button{outline-offset: 0}a:-webkit-any-link{color: -webkit-link;text-decoration: underline;cursor: auto}a:-webkit-any-link:active{color: -webkit-activelink} ruby, rt{text-indent: 0;}rt{line-height: normal;-webkit-text-emphasis: none}ruby > rt{display: block;font-size: 50%;text-align: start}ruby > rp{display: none} noframes{display: none}frameset, frame{display: block}frameset{border-color: inherit}iframe{border: 2px inset}details{display: block}summary{display: block}summary::-webkit-details-marker{display: inline-block;width: 0.66em;height: 0.66em;-webkit-margin-end: 0.4em}template{display: none}bdi, output{unicode-bidi: -webkit-isolate}bdo{unicode-bidi: bidi-override}textarea[dir=auto i]{unicode-bidi: -webkit-plaintext}dialog:not([open]){display: none}dialog{position: absolute;left: 0;right: 0;width: -webkit-fit-content;height: -webkit-fit-content;margin: auto;border: solid;padding: 1em;background: white;color: black}dialog::backdrop{position: fixed;top: 0;right: 0;bottom: 0;left: 0;background: rgba(0,0,0,0.1)}slot{display: contents} @page{ size: auto;margin: auto;padding: 0px;border-width: 0px} @media print{thead{break-inside:avoid}}/* 
 * Additonal style sheet used to render HTML pages in quirks mode.
 *
 * Copyright (C) 2000-2003 Lars Knoll (knoll@kde.org)
 * Copyright (C) 2004, 2006, 2007 Apple Inc. All rights reserved.
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Library General Public
 * License as published by the Free Software Foundation; either
 * version 2 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Library General Public License for more details.
 *
 * You should have received a copy of the GNU Library General Public License
 * along with this library; see the file COPYING.LIB.  If not, write to
 * the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
 * Boston, MA 02110-1301, USA.
 *
 */

/* Give floated images margins of 3px */
img[align="left" i] {
    margin-right: 3px;
}
img[align="right" i] {
    margin-left: 3px;
}

/* Tables reset both line-height and white-space in quirks mode. */
/* Compatible with WinIE. Note that font-family is *not* reset. */
table {
    white-space: normal;
    line-height: normal;
    font-weight: normal;
    font-size: medium;
    font-variant: normal;
    font-style: normal;
    color: -internal-quirk-inherit;
    text-align: start;
}

/* This will apply only to text fields, since all other inputs already use border box sizing */
input:not([type=image i]), textarea {
    box-sizing: border-box;
}

/* Set margin-bottom for form element in quirks mode. */
/* Compatible with Gecko. (Doing this only for quirks mode is a fix for bug 17696.) */
form {
    margin-bottom: 1em
}
/*
 * Copyright (C) 2006 Apple Computer, Inc.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY APPLE COMPUTER, INC. ``AS IS'' AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE COMPUTER, INC. OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

body {
    margin: 0
}

table {
    width: 100%;
    border-spacing: 0;
    white-space: pre-wrap !important;
    margin: 0;
    word-break: break-word;
    font-size: initial;
    font-family: monospace;
    tab-size: 4;
}

td {
    padding: 0 !important;
    vertical-align: baseline
}

.line-gutter-backdrop, .line-number {
    /* Keep this in sync with inspector.css (.webkit-line-gutter-backdrop) */
    box-sizing: border-box;
    padding: 0 4px !important;
    width: 31px;
    background-color: rgb(240, 240, 240);
    border-right: 1px solid rgb(187, 187, 187) !important;
    -webkit-user-select: none;
}

.line-gutter-backdrop {
    /* Keep this in sync with inspector.css (.webkit-line-gutter-backdrop) */
    position: absolute;
    z-index: -1;
    left: 0;
    top: 0;
    height: 100%
}

.line-number {
    text-align: right;
    color: rgb(128, 128, 128);
    word-break: normal;
    white-space: nowrap;
    font-size: 9px;
    font-family: Helvetica;
    -webkit-user-select: none;
}

.line-number::before {
    content: attr(value);
}

tbody:last-child .line-content:empty:before {
    content: " ";
}

.line-content {
    padding: 0 5px !important;
}

.highlight {
    background-color: rgb(100%, 42%, 42%);
    border: 2px solid rgb(100%, 31%, 31%);
}

.html-tag {
    /* Keep this in sync with inspector.css (.webkit-html-tag) */
    color: rgb(136, 18, 128);
}

.html-attribute-name {
    /* Keep this in sync with inspector.css (.webkit-html-attribute-name) */
    color: rgb(153, 69, 0);
}

.html-attribute-value {
    /* Keep this in sync with inspector.css (.webkit-html-attribute-value) */
    color: rgb(26, 26, 166);
}

.html-external-link, .html-resource-link {
    /* Keep this in sync with inspectorSyntaxHighlight.css (.webkit-html-external-link, .webkit-html-resource-link) */
    color: #00e;
}

.html-external-link {
    /* Keep this in sync with inspectorSyntaxHighlight.css (.webkit-html-external-link) */
    text-decoration: none;
}

.html-external-link:hover {
    /* Keep this in sync with inspectorSyntaxHighlight.css (.webkit-html-external-link:hover) */
    text-decoration: underline;
}

.html-comment {
    /* Keep this in sync with inspectorSyntaxHighlight.css (.webkit-html-comment) */
    color: rgb(35, 110, 37);
}

.html-doctype {
    /* Keep this in sync with inspectorSyntaxHighlight.css (.webkit-html-doctype) */
    color: rgb(192, 192, 192);
}

.html-end-of-file {
    /* Keep this in sync with inspectorSyntaxHighlight.css (.webkit-html-end-of-file) */
    color: rgb(255, 0, 0);
    font-weight: bold;
}
/*
 * Copyright (C) 2012 Google Inc. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/* These styles override other user-agent styles for Chromium on Android. */

select[size],
select[multiple],
select[size][multiple] {
    -webkit-appearance: menulist;
    align-items: center;
    background-color: ButtonFace;
    border: 1px solid #a9a9a9;
    border-radius: initial;
    white-space: pre;
}

input[type="date" i]:disabled,
input[type="datetime-local" i]:disabled,
input[type="month" i]:disabled,
input[type="time" i]:disabled,
input[type="week" i]:disabled,
input[type="date" i]:read-only,
input[type="datetime-local" i]:read-only,
input[type="month" i]:read-only,
input[type="time" i]:read-only,
input[type="week" i]:read-only {
    background-color: ButtonFace;
    color: GrayText;
}

input[type="date" i],
input[type="datetime-local" i],
input[type="month" i],
input[type="time" i],
input[type="week" i] {
    align-items: center;
    -webkit-appearance: menulist;
    background-color: ButtonFace;
    border: 1px solid #a9a9a9;
    display: -webkit-inline-flex;
    overflow: hidden;
    width: 10em;
}

input[type="datetime-local" i] {
    width: 15em;
}

input::-webkit-date-and-time-value {
    margin: 1px 24px 1px 4px;
    overflow: hidden;
    white-space: pre;
}
video:-webkit-full-screen {
  /* Fullscreen video on Android does not synchronize correctly when the <video>
   * element is not rendered in the root render pass. Disable properties that
   * cause this. (http://crbug.com/618753) */
  opacity: 1 !important;
  -webkit-filter: none !important;
  border-radius: 0 !important;
  mix-blend-mode: normal !important;
}
/*
 * Copyright (C) 2015 Google Inc.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY APPLE COMPUTER, INC. ``AS IS'' AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE COMPUTER, INC. OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/* Media controls for Chromium on Android */

/* WARNING: This css file can only style <audio> and <video> elements */

audio {
    height: 48px;
}

audio::-webkit-media-controls-enclosure, video::-webkit-media-controls-enclosure {
    height: 48px;
}

audio::-webkit-media-controls-panel, video::-webkit-media-controls-panel {
    height: 48px;
    min-width: 48px;
    line-height: 48px;
    font-size: 14px;
}

video::-internal-media-controls-overlay-cast-button {
    width: 48px;
    height: 48px;
}

audio::-webkit-media-controls-timeline-container, video::-webkit-media-controls-timeline-container {
    height: 48px;
}

audio::-webkit-media-controls-current-time-display, video::-webkit-media-controls-current-time-display {
    height: 48px;
}

audio::-webkit-media-controls-time-remaining-display, video::-webkit-media-controls-time-remaining-display {
    height: 48px;
}

audio::-webkit-media-controls-play-button, video::-webkit-media-controls-play-button,
audio::-webkit-media-controls-mute-button, video::-webkit-media-controls-mute-button,
audio::-webkit-media-controls-fullscreen-button, video::-webkit-media-controls-fullscreen-button,
audio::-internal-media-controls-cast-button, video::-internal-media-controls-cast-button,
audio::-internal-media-controls-download-button, video::-internal-media-controls-download-button,
audio::-internal-media-controls-overflow-button, video::-internal-media-controls-overflow-button,
video::-webkit-media-controls-toggle-closed-captions-button {
    padding: 8px;
    width: 48px;
    height: 48px;
}
/*
 * Copyright (C) 2009 Google Inc. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/* These styles override other user-agent styles for Chromium on Linux. */

select:not([size]):not([multiple]),
select[size="0"],
select[size="1"] {
    /* Selects with popup menus look like buttons with a drop down triangle on Linux. */
    background-color: ButtonFace;
}

input[type=range i] {
    color: #9d968E;
}
/* Copyright 2014 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

input[type="date" i],
input[type="datetime-local" i],
input[type="month" i],
input[type="time" i],
input[type="week" i] {
    align-items: center;
    display: -webkit-inline-flex;
    font-family: monospace;
    overflow: hidden;
    padding: 0;
    -webkit-padding-start: 1px;
}

input::-webkit-datetime-edit {
    flex: 1;
    min-width: 0;
    -webkit-user-modify: read-only !important;
    display: inline-block;
    overflow: hidden;
}

input::-webkit-datetime-edit-fields-wrapper {
    -webkit-user-modify: read-only !important;
    display: inline-block;
    padding: 1px 0;
    white-space: pre;
}

/* If you update padding, border, or margin in the following ruleset, update
   DateTimeFieldElement::maximumWidth too. */
input::-webkit-datetime-edit-ampm-field,
input::-webkit-datetime-edit-day-field,
input::-webkit-datetime-edit-hour-field,
input::-webkit-datetime-edit-millisecond-field,
input::-webkit-datetime-edit-minute-field,
input::-webkit-datetime-edit-month-field,
input::-webkit-datetime-edit-second-field,
input::-webkit-datetime-edit-week-field,
input::-webkit-datetime-edit-year-field {
    -webkit-user-modify: read-only !important;
    border: none;
    display: inline;
    font: inherit !important;
    padding: 1px;
}

/* Remove focus ring from fields and use highlight color */
input::-webkit-datetime-edit-ampm-field:focus,
input::-webkit-datetime-edit-day-field:focus,
input::-webkit-datetime-edit-hour-field:focus,
input::-webkit-datetime-edit-millisecond-field:focus,
input::-webkit-datetime-edit-minute-field:focus,
input::-webkit-datetime-edit-month-field:focus,
input::-webkit-datetime-edit-second-field:focus,
input::-webkit-datetime-edit-week-field:focus,
input::-webkit-datetime-edit-year-field:focus {
    background-color: highlight;
    color: highlighttext;
    outline: none;
}

input::-webkit-datetime-edit-year-field[disabled],
input::-webkit-datetime-edit-month-field[disabled],
input::-webkit-datetime-edit-week-field[disabled],
input::-webkit-datetime-edit-day-field[disabled],
input::-webkit-datetime-edit-ampm-field[disabled],
input::-webkit-datetime-edit-hour-field[disabled],
input::-webkit-datetime-edit-millisecond-field[disabled],
input::-webkit-datetime-edit-minute-field[disabled],
input::-webkit-datetime-edit-second-field[disabled] {
    color: GrayText;
}

/* If you update padding, border, or margin in the following ruleset, update
   DateTimeEditElement::customStyelForRenderer too. */
input::-webkit-datetime-edit-text {
    -webkit-user-modify: read-only !important;
    display: inline;
    font: inherit !important;
}

input[type="date" i]::-webkit-inner-spin-button,
input[type="datetime" i]::-webkit-inner-spin-button,
input[type="datetime-local" i]::-webkit-inner-spin-button,
input[type="month" i]::-webkit-inner-spin-button,
input[type="time" i]::-webkit-inner-spin-button,
input[type="week" i]::-webkit-inner-spin-button {
    /* FIXME: Remove height. */
    height: 1.5em;
    -webkit-margin-start: 2px;
}
/*
 * Copyright (C) 2008 Google Inc. All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 * 
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/* These styles override the default styling for HTML elements as defined in
   WebCore/css/html.css. So far we have used this file exclusively for
   making our form elements match Firefox's. */

input:not([type]), 
input[type="email" i],
input[type="number" i],
input[type="password" i],
input[type="tel" i],
input[type="url" i],
input[type="text" i] {
    padding:1px 0;
}

input[type="search" i] {
    padding:1px;
}

input[type="checkbox" i] {
    margin:3px 3px 3px 4px;
}

input[type="radio" i] {
    margin:3px 3px 0 5px;
}

input[type="range" i] {
    color: #c4c4c4;
}

/* Not sure this is the right color. #EBEBE4 is what Firefox uses.
   FIXME: Figure out how to support legacy input rendering. 
   FIXME: Add input[type="file" i] once we figure out our file inputs.
   FIXME: Add input[type="image" i] once we figure out our image inputs.
   FIXME: We probably do the wrong thing if you put an invalid input type.
          do we care?
*/
textarea:disabled,
input:not([type]):disabled, 
input[type="color" i]:disabled,
input[type="date" i]:disabled,
input[type="datetime" i]:disabled,
input[type="datetime-local" i]:disabled,
input[type="email" i]:disabled,
input[type="month" i]:disabled,
input[type="password" i]:disabled,
input[type="number" i]:disabled,
input[type="search" i]:disabled,
input[type="tel" i]:disabled,
input[type="text" i]:disabled,
input[type="time" i]:disabled,
input[type="url" i]:disabled,
input[type="week" i]:disabled {
    background-color: #EBEBE4; 
}

input[type="search" i]::-webkit-search-cancel-button {
    margin-right: 3px;
}

input[type="search" i]::-webkit-search-results-decoration {
    margin: auto 3px auto 2px;
}

input[type="button" i], input[type="submit" i], input[type="reset" i], input[type="file" i]::-webkit-file-upload-button, button {
    padding: 1px 6px;
}

/* Windows selects are not rounded. Custom borders for them shouldn't be either. */
keygen, 
select, 
select[size="0"],
select[size="1"] {
    border-radius: 0;
    /* Same as native_theme_base. */
    border-color: #a9a9a9;
}

select[size],
select[multiple],
select[size][multiple] {
    /* Same as native_theme_base. */
    border: 1px solid #a9a9a9;
}

textarea {
    font-family: monospace;
    /* Same as native_theme_base. */
    border-color: #a9a9a9;
}
/*
 * Copyright (C) 2008 Google Inc. All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 * 
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/* These styles override the default styling for HTML elements in quirks-mode
   as defined in WebCore/css/quirks.css. So far we have used this file exclusively for
   making our form elements match Firefox's. */

textarea {
  /* Matches IE's text offsets in quirksmode (causes text to wrap the same as IE). */
  padding: 2px 0 0 2px;
}
/*
 * The default style sheet used to render SVG.
 *
 * Copyright (C) 2005, 2006 Apple Computer, Inc.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY APPLE COMPUTER, INC. ``AS IS'' AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE COMPUTER, INC. OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. 
 */

@namespace "http://www.w3.org/2000/svg";
@namespace html "http://www.w3.org/1999/xhtml";

/*
    When an outermost SVG 'svg' element is stand-alone or embedded inline within a parent XML grammar 
    which does not use CSS layout [CSS2-LAYOUT] or XSL formatting [XSL], the 'overflow' property on the 
    outermost 'svg' element is ignored for the purposes of visual rendering and the initial clipping path is set 
    to the bounds of the initial viewport.

    When an outermost 'svg' element is embedded inline within a parent XML grammar which uses CSS layout
    [CSS2-LAYOUT] or XSL formatting [XSL], if the 'overflow' property has the value hidden or scroll, then
    the user agent will establish an initial clipping path equal to the bounds of the initial viewport; otherwise,
    the initial clipping path is set according to the clipping rules as defined in [CSS2-overflow].

    Opera/Firefox & WebKit agreed on NOT setting "overflow: hidden" for the outermost svg element - SVG 1.1 Errata
    contains these changes as well as all future SVG specifications: see http://lists.w3.org/Archives/Public/public-svg-wg/2008JulSep/0347.html
*/

svg:not(:root), symbol, image, marker, pattern, foreignObject {
    overflow: hidden
}

svg:root {
    width: 100%;
    height: 100%;
}

text, foreignObject {
    display: block
}

text {
   white-space: nowrap
}

tspan, textPath {
   white-space: inherit
}

/* states */

:focus {
    outline: auto 5px -webkit-focus-ring-color
}

/* CSS transform specification: "transform-origin 0 0 for SVG elements without associated CSS layout box, 50% 50% for all other elements". */
 
* {
    -webkit-transform-origin: 0 0;
}

html|* > svg {
    -webkit-transform-origin: 50% 50%;
}
/*
 * The default style sheet used to render MathML.
 *
 * Copyright (C) 2014 Google Inc. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY APPLE COMPUTER, INC. ``AS IS'' AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE COMPUTER, INC. OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

@namespace "http://www.w3.org/1998/Math/MathML";

/* By default, we only display the MathML formulas without any formatting other than the one specified by the display attribute. */
math {
    display: inline;
}

math[display="block"] {
    display: block;
    text-align: center;
}

/* We hide the PresentationExpression constructions that are children of a <semantics> element.
   http://www.w3.org/TR/MathML/appendixa.html#parsing_PresentationExpression */
semantics > mi, semantics > mn, semantics > mo, semantics > mtext, semantics > mspace, semantics > ms, semantics > maligngroup, semantics > malignmark, semantics > mrow, semantics > mfrac, semantics > msqrt, semantics > mroot, semantics > mstyle, semantics > merror, semantics > mpadded, semantics > mphantom, semantics > mfenced, semantics > menclose, semantics > msub, semantics > msup, semantics > msubsup, semantics > munder, semantics > mover, semantics > munderover, semantics > mmultiscripts, semantics > mtable, semantics > mstack, semantics > mlongdiv, semantics > maction {
    display: none;
}

/* However, we display all the annotations. */
annotation, annotation-xml {
    display: inline-block;
}
/*
 * Copyright (C) 2009 Apple Inc.  All rights reserved.
 * Copyright (C) 2015 Google Inc.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY APPLE COMPUTER, INC. ``AS IS'' AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE COMPUTER, INC. OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/* Chromium default media controls */

/* WARNING: This css file can only style <audio> and <video> elements */

audio:not([controls]) {
    display: none !important;
}

audio {
    width: 300px;
    height: 32px;
}

audio::-webkit-media-controls,
video::-webkit-media-controls {
    width: inherit;
    height: inherit;
    position: relative;
    direction: ltr;
    display: flex;
    flex-direction: column;
    font-family: Segoe, "Helvetica Neue", Roboto, Arial, Helvetica, sans-serif;
    justify-content: flex-end;
    align-items: center;
}

audio::-webkit-media-controls-enclosure, video::-webkit-media-controls-enclosure {
    width: 100%;
    height: 32px;
    flex-shrink: 0;
    bottom: 0;
    text-indent: 0;
    padding: 0;
    margin: 0;
    box-sizing: border-box;
}

audio::-webkit-media-controls-panel, video::-webkit-media-controls-panel {
    display: flex;
    flex-direction: row;
    align-items: center;
    /* We use flex-start here to ensure that the play button is visible even
     * if we are too small to show all controls.
     */
    justify-content: flex-start;
    -webkit-user-select: none;
    position: relative;
    width: 100%;
    z-index: 0;
    overflow: hidden;
    text-align: right;
    bottom: auto;
    height: 32px;
    min-width: 48px;
    line-height: 32px;
    background-color: #fafafa;
    /* The duration is also specified in MediaControlElements.cpp and LayoutTests/media/media-controls.js */
    transition: opacity 0.3s;

    font-size: 12px;
    font-weight: normal;  /* Make sure that we don't inherit non-defaults. */
    font-style: normal;
}

audio:-webkit-full-page-media, video:-webkit-full-page-media {
    max-height: 100%;
    max-width: 100%;
}

audio:-webkit-full-page-media::-webkit-media-controls-panel,
video:-webkit-full-page-media::-webkit-media-controls-panel {
    bottom: 0px;
}

audio::-webkit-media-controls-mute-button, video::-webkit-media-controls-mute-button {
    -webkit-appearance: media-mute-button;
    display: flex;
    flex: none;
    box-sizing: border-box;
    width: 32px;
    height: 32px;
    padding: 0px;
    border-width: 0px;
    background-color: initial;
    color: inherit;
}

audio::-webkit-media-controls-overlay-enclosure {
    display: none;
}

video::-webkit-media-controls-overlay-enclosure {
    display: flex;
    position: relative;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    flex: 1 1;
    min-height: 0;
    width: 100%;
    /* prevent disambiguation zooms with the panel */
    margin-bottom: 10px;
    text-indent: 0;
    box-sizing: border-box;
    overflow: hidden;
}

video::-webkit-media-controls-overlay-play-button {
    -webkit-appearance: media-overlay-play-button;
    display: flex;
    position: absolute;
    top: 0;
    left: 0;
    margin: 0;
    border-width: 0px;
    background-color: transparent;
    width: 100%;
    height: 100%;
    padding: 0;
}

video::-internal-media-controls-overlay-cast-button {
    -webkit-appearance: -internal-media-overlay-cast-off-button;
    display: flex;
    position: absolute;
    top: 8px;
    left: 8px;
    margin-left: 0px;
    margin-top: 0px;
    border-width: 0px;
    background-color: transparent;
    width: 32px;
    height: 32px;
    padding: 0;
    transition: opacity 0.3s;
}

audio::-webkit-media-controls-play-button, video::-webkit-media-controls-play-button {
    -webkit-appearance: media-play-button;
    display: flex;
    flex: none;
    box-sizing: border-box;
    width: 32px;
    height: 32px;
    padding: 0px;
    border-width: 0px;
    background-color: initial;
    color: inherit;
}

audio::-webkit-media-controls-timeline-container, video::-webkit-media-controls-timeline-container {
    -webkit-appearance: media-controls-background;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: flex-end;
    flex: 1 1;
    -webkit-user-select: none;
    height: 48px;
    padding: 0;
    min-width: 0;
}

audio::-webkit-media-controls-current-time-display, video::-webkit-media-controls-current-time-display {
    -webkit-appearance: media-current-time-display;
    -webkit-user-select: none;
    flex: none;
    display: flex;
    border: none;
    cursor: default;

    height: 32px;

    /* text runs right to the edge of the container */
    padding: 0;

    color: #5a5a5a;

    letter-spacing: normal;
    word-spacing: normal;
    text-transform: none;
    text-indent: 0;
    text-shadow: none;
    text-decoration: none;
}

audio::-webkit-media-controls-time-remaining-display, video::-webkit-media-controls-time-remaining-display {
    -webkit-appearance: media-current-time-display;
    -webkit-user-select: none;
    flex: none;
    display: flex;
    border: none;
    cursor: default;

    height: 32px;

    /* text runs right to the edge of the container, plus a little on
     * the left to pad the leading "/" */
    padding: 0 0 0 4px;

    color: #5a5a5a;

    letter-spacing: normal;
    word-spacing: normal;
    text-transform: none;
    text-indent: 0;
    text-shadow: none;
    text-decoration: none;
}

audio::-webkit-media-controls-timeline, video::-webkit-media-controls-timeline {
    -webkit-appearance: media-slider;
    display: flex;
    flex: 1 1 auto;
    height: 2px;

    /* Leave 6px on either side for the thumb.  Use margin so that
     * the slider doesn't extend into it.  We also add 12px border.
     */
    padding: 0;
    margin: 0 18px 0 18px;
    background-color: transparent;
    min-width: 25px;
    border: initial;
    color: inherit;
}

audio::-webkit-media-controls-volume-slider, video::-webkit-media-controls-volume-slider {
    -webkit-appearance: media-volume-slider;
    display: flex;
    /* The 1.9 value was empirically chosen to match old-flexbox behaviour
     * and be aesthetically pleasing.
     */
    flex: 1 1.9 auto;
    height: 2px;
    max-width: 70px;
    /* Leave room for the thumb, which has 6px radius.  Use margin rather
     * than padding so that the slider doesn't extend into it.  We also
     * leave an addition 12px margin.
     */
    padding: 0;
    margin: 0 18px 0 18px;
    background-color: transparent;
    min-width: 25px;
    border: initial;
    color: inherit;
}

/* FIXME these shouldn't use special pseudoShadowIds, but nicer rules.
   https://code.google.com/p/chromium/issues/detail?id=112508
   https://bugs.webkit.org/show_bug.cgi?id=62218
*/
input[type="range" i]::-webkit-media-slider-container {
    display: flex;
    align-items: center;
    flex-direction: row; /* This property is updated by C++ code. */
    box-sizing: border-box;
    /** this positions the slider thumb for both time and volume. */
    height: 2px;
    width: 100%;
    background-color: transparent; /* Background drawing is managed by C++ code to draw ranges. */
}

/* The negative right margin causes the track to overflow its container. */
input[type="range" i]::-webkit-media-slider-container > div {
    margin-right: -18px;  /* box is 36px wide, get to the middle */
    margin-left:  -18px;
}

input[type="range" i]::-webkit-media-slider-thumb {
    box-sizing: border-box;
    width: 48px;
    height: 48px;
    padding: 0px;
}

audio::-webkit-media-controls-fullscreen-button, video::-webkit-media-controls-fullscreen-button {
    -webkit-appearance: media-enter-fullscreen-button;
    display: flex;
    flex: none;
    overflow: hidden;
    box-sizing: border-box;
    width: 32px;
    height: 32px;
    padding: 0px;
    border-width: 0px;
    background-color: initial;
    color: inherit;
}

audio::-internal-media-controls-cast-button, video::-internal-media-controls-cast-button {
    -webkit-appearance: -internal-media-cast-off-button;
    display: flex;
    flex: none;
    box-sizing: border-box;
    width: 32px;
    height: 32px;
    padding: 0px;
    border-width: 0px;
    margin-left: 0px;
    margin-right: 0px;
    background-color: initial;
    color: inherit;
}

audio::-webkit-media-controls-toggle-closed-captions-button {
    display: none;
}

video::-webkit-media-controls-toggle-closed-captions-button {
    -webkit-appearance: media-toggle-closed-captions-button;
    display: flex;
    flex: none;
    box-sizing: border-box;
    width: 32px;
    height: 32px;
    padding: 0px;
    border-width: 0px;
    margin-left: 0px;
    margin-right: 0px;
    background-color: initial;
    color: inherit;
}

audio::-webkit-media-controls-fullscreen-volume-slider, video::-webkit-media-controls-fullscreen-volume-slider {
    display: none;
}

audio::-webkit-media-controls-fullscreen-volume-min-button, video::-webkit-media-controls-fullscreen-volume-min-button {
    display: none;
}

audio::-webkit-media-controls-fullscreen-volume-max-button, video::-webkit-media-controls-fullscreen-volume-max-button {
    display: none;
}

video::-internal-media-controls-text-track-list, video::-internal-media-controls-overflow-menu-list, audio::-internal-media-controls-overflow-menu-list {
    position: absolute;
    bottom: 4px;
    right: 4px;
    background-color: #fafafa;
    max-width: 50%;
    max-height: 250px;
    min-width: 150px;
    overflow-x: hidden;
    overflow-y: auto;
    white-space: nowrap;
    font-size: 14px;
    border-radius: 1px;
    box-shadow: 0 8px 20px 1px rgba(0, 0, 0, 0.14),
                0 3px 28px 2px rgba(0, 0, 0, 0.12),
                0 5px 10px -3px rgba(0, 0, 0, 0.4);
}

video::-internal-media-controls-text-track-list-item {
    display: block;
    color: #424242;
    text-align: start;
    line-height: 40px;
    padding-right: 16px;
    text-overflow: ellipsis;
}

video::-internal-media-controls-text-track-list-item:hover, video::-internal-media-controls-overflow-menu-list-item:hover, audio::-internal-media-controls-overflow-menu-list-item:hover {
    background-color: #e0e0e0;
}

video::-internal-media-controls-text-track-list-item-input {
    -webkit-appearance: -internal-media-track-selection-checkmark;
    visibility: hidden;
    left: 0;
    vertical-align: middle;
    margin: 0 5px 0 0;
    width: 16px;
    height: 16px;
    margin-left: 12px;
}

video::-internal-media-controls-text-track-list-item-input:checked {
    visibility: visible;
}

video::-internal-media-controls-text-track-list-kind-captions {
    -webkit-appearance: -internal-media-closed-captions-icon;
    height: 20px;
    width: 20px;
    margin-left: 10px;
    vertical-align: middle;
}

video::-internal-media-controls-text-track-list-kind-subtitles {
    -webkit-appearance: -internal-media-subtitles-icon;
    height: 20px;
    width: 20px;
    margin-left: 10px;
    vertical-align: middle;
}

video::-internal-media-controls-overflow-button, audio::-internal-media-controls-overflow-button {
    -webkit-appearance: -internal-media-overflow-button;
    display: flex;
    flex: none;
    box-sizing: border-box;
    width: 32px;
    height: 32px;
    padding: 0px;
    border-width: 0px;
    margin-left: 0px;
    margin-right: 0px;
    background-color: initial;
    color: inherit;
}

video::-internal-media-controls-download-button, audio::-internal-media-controls-download-button {
    -webkit-appearance: -internal-media-download-button;
    display: flex;
    flex: none;
    box-sizing: border-box;
    width: 32px;
    height: 32px;
    padding: 0px;
    border-width: 0px;
    margin-left: 0px;
    margin-right: 0px;
    background-color: initial;
    color: inherit;
}

video::-internal-media-controls-overflow-menu-list-item, audio::-internal-media-controls-overflow-menu-list-item {
    display: block;
    color: #424242;
    line-height: 40px;
    padding-left: 28px;
}

video::-webkit-media-text-track-container {
    position: relative;
    width: inherit;
    height: inherit;
    overflow: hidden;

    font: 22px sans-serif;
    text-align: center;
    color: rgba(255, 255, 255, 1);

    letter-spacing: normal;
    word-spacing: normal;
    text-transform: none;
    text-indent: 0;
    text-decoration: none;
    pointer-events: none;
    -webkit-user-select: none;
    word-break: break-word;
}

video::cue {
    display: inline;

    background-color: rgba(0, 0, 0, 0.8);
    padding: 2px 2px;
}

video::-webkit-media-text-track-region {
    position: absolute;
    line-height: 5.33vh;
    writing-mode: horizontal-tb;
    background: rgba(0, 0, 0, 0.8);
    color: rgba(255, 255, 255, 1);
    word-wrap: break-word;
    overflow-wrap: break-word;
    overflow: hidden;
}

video::-webkit-media-text-track-region-container {
    position: relative;

    display: flex;
    flex-flow: column;
    flex-direction: column;
}

video::-webkit-media-text-track-region-container.scrolling {
    transition: top 433ms linear;
}


video::-webkit-media-text-track-display {
    position: absolute;
    overflow: hidden;
    white-space: pre-wrap;
    -webkit-box-sizing: border-box;
    flex: 0 0 auto;
}

video::cue(:future) {
    color: gray;
}

video::cue(b) {
    font-weight: bold;
}

video::cue(u) {
    text-decoration: underline;
}

video::cue(i) {
    font-style: italic;
}
:-webkit-full-screen {
    background-color: white;
    z-index: 2147483647 !important;
}

:root:-webkit-full-screen-ancestor {
    overflow: hidden !important;
}

:-webkit-full-screen-ancestor:not(iframe) {
    z-index: auto !important;
    position: static !important;
    opacity: 1 !important;
    transform: none !important;
    -webkit-mask: none !important;
    clip: none !important;
    -webkit-filter: none !important;
    transition: none !important;
    -webkit-box-reflect: none !important;
    -webkit-perspective: none !important;
    -webkit-transform-style: flat !important;
    will-change: auto !important;
}

video:-webkit-full-screen, audio:-webkit-full-screen {
    background-color: transparent !important;
    position: relative !important;
    left: 0 !important;
    top: 0 ! important;
    margin: 0 !important;
    min-width: 0 !important;
    max-width: none !important;
    min-height: 0 !important;
    max-height: none !important;
    width: 100% !important;
    height: 100% !important;
    flex: 1 !important;
    display: block !important;
    transform: none !important;
}

img:-webkit-full-screen {
    width: auto;
    height: 100%;
    max-width: 100%;
}

iframe:-webkit-full-screen {
    margin: 0 !important;
    padding: 0 !important;
    border: 0 !important;
    position: fixed !important;
    min-width: 0 !important;
    max-width: none !important;
    min-height: 0 !important;
    max-height: none !important;
    width: 100% !important;
    height: 100% !important;
    left: 0 !important;
    top: 0 !important;
}
/*
 * Copyright (c) 2013, Opera Software ASA. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of Opera Software ASA nor the names of its
 *    contributors may be used to endorse or promote products derived
 *    from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
 * FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 * COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
 * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/* Default styles for XHTML Mobile Profile documents where they differ from html.css */

@viewport {
    width: auto;
    /* Ideally these should be removed. Currently here to avoid test result regressions. */
    min-zoom: 0.25;
    max-zoom: 5;
}
/*
 * Copyright (C) 2013 Google Inc. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/* These styles override other user-agent styles for Chromium on Android. */

@viewport {
    min-width: 980px;
}
/*
 * Copyright 2016 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
*/

@viewport {
    min-width: 1280px;
}
<!--
 Copyright (C) 2012 Google Inc. All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions
 are met:

 1.  Redistributions of source code must retain the above copyright
     notice, this list of conditions and the following disclaimer.
 2.  Redistributions in binary form must reproduce the above copyright
     notice, this list of conditions and the following disclaimer in the
     documentation and/or other materials provided with the distribution.
 3.  Neither the name of Apple Computer, Inc. ("Apple") nor the names of
     its contributors may be used to endorse or promote products derived
     from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS "AS IS" AND ANY
 EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<!DOCTYPE html>
<html>
<head>
<style>
body {
    margin: 0;
    padding: 0;
}

body.platform-mac {
    font-size: 11px;
    font-family: Menlo, Monaco;
}

body.platform-windows {
    font-size: 12px;
    font-family: Consolas, Lucida Console;
}

body.platform-linux {
    font-size: 11px;
    font-family: dejavu sans mono;
}

.fill {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}

.dimmed {
    background-color: rgba(0, 0, 0, 0.31);
}

#canvas, #layout-editor-matched-nodes-canvas {
    pointer-events: none;
}

.controls-line {
    display: flex;
    justify-content: center;
    margin: 10px 0;
}

.message-box {
    padding: 2px 4px;
    display: flex;
    align-items: center;
    cursor: default;
    overflow: hidden;
}

#paused-in-debugger {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
}

#reloading-blanket {
    background-color: rgb(255, 255, 255);
}

.controls-line > * {
    background-color: rgb(255, 255, 194);
    border: 1px solid rgb(202, 202, 202);
    height: 22px;
    box-sizing: border-box;
}

.controls-line .button {
    width: 26px;
    margin-left: -1px;
    margin-right: 0;
    padding: 0;
    flex-shrink: 0;
    flex-grow: 0;
}

.controls-line .button:hover {
    cursor: pointer;
}

.controls-line .button .glyph {
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.75);
    opacity: 0.8;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-position: center;
    position: relative;
}

.controls-line .button:active .glyph {
    top: 1px;
    left: 1px;
}

#resume-button .glyph {
    -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAKCAYAAABv7tTEAAAAAXNSR0IArs4c6QAAAFJJREFUKM+10bEJgGAMBeEPbR3BLRzEVdzEVRzELRzBVohVwEJ+iODBlQfhBeJhsmHU4C0KnFjQV6J0x1SNAhdWDJUoPTB3PvLLeaUhypM3n3sD/qc7lDrdpIEAAAAASUVORK5CYII=);
    -webkit-mask-size: 13px 10px;
    background-color: rgb(66, 129, 235);
}

#step-over-button .glyph {
    -webkit-mask-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAKCAYAAAC5Sw6hAAAAAXNSR0IArs4c6QAAAOFJREFUKM+N0j8rhXEUB/DPcxW35CqhvIBrtqibkklhV8qkTHe4ZbdblcXgPVhuMdqUTUl5A2KRRCF5LGc4PT1P7qnfcr5/zu/8KdTHLFaxjHnc4RZXKI0QYxjgLQTVd42l/0wmg5iFX3iq5H6w22RS4DyRH7CB8cAXcBTGJT6xUmd0mEwuMdFQcA3fwXvGTAan8BrgPabTL9fRRyfx91PRMwyjGwcJ2EyCfsrfpPw2Pipz24NT/MZciiQYVshzOKnZ5Hturxt3k2MnCpS4SPkeHpPR8Sh3tYgttBoW9II2/AHiaEqvD2Fc0wAAAABJRU5ErkJggg==);
    -webkit-mask-size: 18px 10px;
}

.px {
    color: rgb(128, 128, 128);
}

#element-title {
    position: absolute;
    z-index: 10;
}

#tag-name {
    /* Keep this in sync with view-source.css (.html-tag) */
    color: rgb(136, 18, 128);
}

#node-id {
    /* Keep this in sync with view-source.css (.html-attribute-value) */
    color: rgb(26, 26, 166);
}

#class-name {
    /* Keep this in sync with view-source.css (.html-attribute-name) */
    color: rgb(153, 69, 0);
}

.wall {
    position: absolute;
    z-index: -2;
    opacity: 0.2;
    pointer-events: none;
}

.wall.horizontal {
    width: 8px;
    height: 16px;
}

.wall.vertical {
    height: 8px;
    width: 16px;
}

.wall.padding {
    background: repeating-linear-gradient(45deg, #FFFFFF 2px, #FFFFFF 4px, rgba(147, 196, 125, 1) 2px, rgba(147, 196, 125, 1) 10px)

}

.wall.margin {
    background: repeating-linear-gradient(45deg, #FFFFFF 2px, #FFFFFF 4px, rgba(246, 178, 107, 1) 4px, rgba(246, 178, 107, 1) 10px)
}

.wall.highlighted {
    z-index: 1;
    opacity: 1;
}

.blur-rect {
    position: absolute;
    background-color: rgba(0, 0, 0, 0.1);
}

.control-lane {
    position: absolute;
}

.control-lane.padding {
    background-color: rgba(147, 196, 125, 0.1);
}

.control-lane.margin {
    background-color: rgba(246, 178, 107, 0.1);
}

.editor-anchor {
    position: absolute;
    -webkit-filter: drop-shadow(0px 1px 1px rgba(0, 0, 0, 0.34));
}

.editor-anchor.vertical {
    height: 6px;
    width: 16px;
}

.editor-anchor.horizontal {
    width: 6px;
    height: 16px;
}

.editor-anchor.horizontal::before {
    content: "";
    position: absolute;
    height: 8px;
    border-right: 2px dotted rgba(255, 255, 255, 0.4);
    top: 4px;
    left: 2px;
}

.editor-anchor.vertical::before {
    content: "";
    position: absolute;
    width: 8px;
    border-bottom: 2px dotted rgba(255, 255, 255, 0.4);
    top: 2px;
    left: 4px;
}

.editor-anchor.vertical:hover {
    cursor: ns-resize;
}

.editor-anchor.horizontal:hover {
    cursor: ew-resize;
}

.editor-anchor.padding {
    background-color: rgb(107, 213, 0);
}

.editor-anchor.margin {
    background-color: rgb(246, 167, 35);
}

.editor-anchor:hover {
    z-index: 3;
}

.editor-anchor.padding.highlighted {
    background-color: rgba(147, 196, 125, 1);
}

.editor-anchor.margin.highlighted {
    background-color: rgba(246, 178, 107, 1);
}

.guide-line.horizontal {
    border-top: dashed 1px;
}

.guide-line.vertical {
    border-left: dashed 1px;
}

.guide-line.padding {
    border-color: rgba(147, 196, 125, 0.56);
}

.guide-line.margin {
    border-color: rgba(246, 178, 107, 0.56);
}

.guide-line.content {
    border-color: rgba(147, 147, 147, 0.56)
}

.guide-line {
    position: absolute;
    pointer-events: none;
}

.label {
    position: absolute;
    font-size: 10px;
    font-family: Arial, Roboto;
    color: white;
    line-height: 1em;
    padding: 2px 5px;
    -webkit-filter: drop-shadow(0px 1px 1px rgba(0, 0, 0, 0.34));
    border-radius: 2px;
    min-width: 30px;
    z-index: 5;
}

.label.padding {
    background-color: rgb(91, 181, 0);
}

.label.margin {
    background-color: rgb(246, 167, 35);
}

.label.disabled {
    background-color: rgb(159, 188, 191);
}

.label .dimension {
    color: rgba(255, 255, 255, 0.7);
}

.label .name {
    color: rgba(255, 255, 255, 0.7);
    display: none;
    border-radius: 4px;
}

.label.full .name {
    display: inline;
    z-index: 5;
}

.label::before {
    content: '';
    display: block;
    position: absolute;
    width: 0;
    height: 0;
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
    top: 1px;
}

.label.right-arrow::before {
    border-left-width: 6px;
    border-left-style: solid;
    border-right: none;
    left: auto;
    right: -6px;
}

.label.left-arrow::before {
    border-left: none;
    border-right-width: 6px;
    border-right-style: solid;
    left: -6px;
    right: auto;
}

.label.padding::before {
    border-left-color: rgb(91, 181, 0);
    border-right-color: rgb(91, 181, 0);
}

.label.margin::before {
    border-left-color: rgb(246, 167, 35);
    border-right-color: rgb(246, 167, 35);
}

/* Material */
.hidden {
    display: none !important;
}

.tooltip-content,
.material-tooltip-arrow {
    position: absolute;
    z-index: 10;
    -webkit-user-select: none;
}

.tooltip-content {
    background-color: #333740;
    font-size: 11px;
    line-height: 14px;
    padding: 5px 8px;
    border-radius: 3px;
    color: white;
    box-sizing: border-box;
    max-width: calc(100% - 4px);
    border: 1px solid hsla(0, 0%, 100%, 0.3);
    z-index: 1;
    background-clip: padding-box;
    will-change: transform;
    text-rendering: optimizeLegibility;
    pointer-events: none;
}

.element-info {
    display: flex;
    align-content: stretch;
}

.material-tooltip-arrow {
    border: solid;
    border-color: #333740 transparent;
    border-width: 0 8px 8px 8px;
    z-index: 2;
    margin-top: 1px;
}

.material-tooltip-arrow.tooltip-arrow-top {
    border-width: 8px 8px 0 8px;
    margin-top: -1px;
}

.element-description {
    flex: 1 1;
    word-wrap: break-word;
    word-break: break-all;
}

.dimensions {
    border-left: 1px solid hsl(0, 0%, 50%);
    padding-left: 7px;
    margin-left: 7px;
    float: right;
    flex: 0 0 auto;
    white-space: nowrap;
    display: flex;
    align-items: center;
    color: hsl(0, 0%, 85%);
}

.material-node-width {
    margin-right: 2px;
}

.material-node-height {
    margin-left: 2px;
}

.material-tag-name {
    color: hsl(304, 77%, 70%);
}

.material-node-id {
    color: hsl(27, 100%, 70%);
}

.material-class-name {
    color: hsl(202,92%,77%);
}

.layout-editor-media-tooltip {
    color: hsl(0, 0%, 85%);
}

.layout-editor-selector-tooltip {
    color: hsl(202,92%,77%);
}

</style>
<script>
const lightGridColor = "rgba(0,0,0,0.2)";
const darkGridColor = "rgba(0,0,0,0.7)";
const transparentColor = "rgba(0, 0, 0, 0)";
const gridBackgroundColor = "rgba(255, 255, 255, 0.8)";

function drawPausedInDebuggerMessage(message)
{
    window._controlsVisible = true;
    document.querySelector(".controls-line").style.visibility = "visible";
    document.getElementById("paused-in-debugger").textContent = message;
    document.body.classList.add("dimmed");
}

function showReloadingBlanket()
{
    var element = document.getElementById("reloading-blanket");
    element.style.display = "block";
}

function _drawGrid(context, rulerAtRight, rulerAtBottom)
{
    if (window._gridPainted)
        return;
    window._gridPainted = true;

    context.save();

    var pageFactor = pageZoomFactor * pageScaleFactor;
    var scrollX = window.scrollX * pageScaleFactor;
    var scrollY = window.scrollY * pageScaleFactor;
    function zoom(x)
    {
        return Math.round(x * pageFactor);
    }
    function unzoom(x)
    {
        return Math.round(x / pageFactor);
    }

    var width = canvasWidth / pageFactor;
    var height = canvasHeight / pageFactor;

    const gridSubStep = 5;
    const gridStep = 50;

    {
        // Draw X grid background
        context.save();
        context.fillStyle = gridBackgroundColor;
        if (rulerAtBottom)
            context.fillRect(0, zoom(height) - 15, zoom(width), zoom(height));
        else
            context.fillRect(0, 0, zoom(width), 15);

        // Clip out backgrounds intersection
        context.globalCompositeOperation = "destination-out";
        context.fillStyle = "red";
        if (rulerAtRight)
            context.fillRect(zoom(width) - 15, 0, zoom(width), zoom(height));
        else
            context.fillRect(0, 0, 15, zoom(height));
        context.restore();

        // Draw Y grid background
        context.fillStyle = gridBackgroundColor;
        if (rulerAtRight)
            context.fillRect(zoom(width) - 15, 0, zoom(width), zoom(height));
        else
            context.fillRect(0, 0, 15, zoom(height));
    }

    context.lineWidth = 1;
    context.strokeStyle = darkGridColor;
    context.fillStyle = darkGridColor;
    {
        // Draw labels.
        context.save();
        context.translate(-scrollX, 0.5 - scrollY);
        var maxY = height + unzoom(scrollY);
        for (var y = 2 * gridStep; y < maxY; y += 2 * gridStep) {
            context.save();
            context.translate(scrollX, zoom(y));
            context.rotate(-Math.PI / 2);
            context.fillText(y, 2, rulerAtRight ? zoom(width) - 7 : 13);
            context.restore();
        }
        context.translate(0.5, -0.5);
        var maxX = width + unzoom(scrollX);
        for (var x = 2 * gridStep; x < maxX; x += 2 * gridStep) {
            context.save();
            context.fillText(x, zoom(x) + 2, rulerAtBottom ? scrollY + zoom(height) - 7 : scrollY + 13);
            context.restore();
        }
        context.restore();
    }

    {
        // Draw vertical grid
        context.save();
        if (rulerAtRight) {
            context.translate(zoom(width), 0);
            context.scale(-1, 1);
        }
        context.translate(-scrollX, 0.5 - scrollY);
        var maxY = height + unzoom(scrollY);
        for (var y = gridStep; y < maxY; y += gridStep) {
            context.beginPath();
            context.moveTo(scrollX, zoom(y));
            var markLength = (y % (gridStep * 2)) ? 5 : 8;
            context.lineTo(scrollX + markLength, zoom(y));
            context.stroke();
        }
        context.strokeStyle = lightGridColor;
        for (var y = gridSubStep; y < maxY; y += gridSubStep) {
            if (!(y % gridStep))
                continue;
            context.beginPath();
            context.moveTo(scrollX, zoom(y));
            context.lineTo(scrollX + gridSubStep, zoom(y));
            context.stroke();
        }
        context.restore();
    }

    {
        // Draw horizontal grid
        context.save();
        if (rulerAtBottom) {
            context.translate(0, zoom(height));
            context.scale(1, -1);
        }
        context.translate(0.5 - scrollX, -scrollY);
        var maxX = width + unzoom(scrollX);
        for (var x = gridStep; x < maxX; x += gridStep) {
            context.beginPath();
            context.moveTo(zoom(x), scrollY);
            var markLength = (x % (gridStep * 2)) ? 5 : 8;
            context.lineTo(zoom(x), scrollY + markLength);
            context.stroke();
        }
        context.strokeStyle = lightGridColor;
        for (var x = gridSubStep; x < maxX; x += gridSubStep) {
            if (!(x % gridStep))
                continue;
            context.beginPath();
            context.moveTo(zoom(x), scrollY);
            context.lineTo(zoom(x), scrollY + gridSubStep);
            context.stroke();
        }
        context.restore();
    }

    context.restore();
}

function drawViewSize()
{
    var text = viewportSize.width + "px \u00D7 " + viewportSize.height + "px";
    context.save();
    context.font = "20px ";
    switch (platform) {
    case "windows": context.font = "14px Consolas, Lucida Console"; break;
    case "mac": context.font = "14px Menlo, Monaco"; break;
    case "linux": context.font = "14px dejavu sans mono"; break;
    }

    var frameWidth = canvasWidth;
    var textWidth = context.measureText(text).width;
    context.fillStyle = gridBackgroundColor;
    context.fillRect(frameWidth - textWidth - 12, 0, frameWidth, 25);
    context.fillStyle = darkGridColor;
    context.fillText(text, frameWidth - textWidth - 6, 18);
    context.restore();
}

function resetCanvas(canvasElement)
{
    canvasElement.width = deviceScaleFactor * viewportSize.width;
    canvasElement.height = deviceScaleFactor * viewportSize.height;
    canvasElement.style.width = viewportSize.width + "px";
    canvasElement.style.height = viewportSize.height + "px";
    var context = canvasElement.getContext("2d");
    context.scale(deviceScaleFactor, deviceScaleFactor);
}

function reset(resetData)
{
    window.viewportSize = resetData.viewportSize;
    window.deviceScaleFactor = resetData.deviceScaleFactor;
    window.pageScaleFactor = resetData.pageScaleFactor;
    window.pageZoomFactor = resetData.pageZoomFactor;
    window.scrollX = Math.round(resetData.scrollX);
    window.scrollY = Math.round(resetData.scrollY);

    window.canvas = document.getElementById("canvas");
    window.context = canvas.getContext("2d");
    resetCanvas(canvas);

    window.canvasWidth = viewportSize.width;
    window.canvasHeight = viewportSize.height;

    window._controlsVisible = false;
    document.querySelector(".controls-line").style.visibility = "hidden";
    document.getElementById("element-title").style.visibility = "hidden";
    document.getElementById("reloading-blanket").style.display = "none";
    document.getElementById("tooltip-container").removeChildren();

    document.body.classList.remove("dimmed");

    window._gridPainted = false;

    if (window.layoutEditor)
        window.layoutEditor.reset();
}

function _drawElementTitle(context, elementInfo, bounds)
{
    document.getElementById("tag-name").textContent = elementInfo.tagName;
    document.getElementById("node-id").textContent = elementInfo.idValue ? "#" + elementInfo.idValue : "";
    document.getElementById("class-name").textContent = (elementInfo.className || "").trimEnd(50);
    document.getElementById("node-width").textContent = elementInfo.nodeWidth;
    document.getElementById("node-height").textContent = elementInfo.nodeHeight;
    var elementTitle = document.getElementById("element-title");

    var titleWidth = elementTitle.offsetWidth + 6;
    var titleHeight = elementTitle.offsetHeight + 4;

    var anchorTop = bounds.minY;
    var anchorBottom = bounds.maxY;
    var anchorLeft = bounds.minX;

    const arrowHeight = 7;
    var renderArrowUp = false;
    var renderArrowDown = false;

    var boxX = Math.max(2, anchorLeft);
    if (boxX + titleWidth > canvasWidth)
        boxX = canvasWidth - titleWidth - 2;

    var boxY;
    if (anchorTop > canvasHeight) {
        boxY = canvasHeight - titleHeight - arrowHeight;
        renderArrowDown = true;
    } else if (anchorBottom < 0) {
        boxY = arrowHeight;
        renderArrowUp = true;
    } else if (anchorBottom + titleHeight + arrowHeight < canvasHeight) {
        boxY = anchorBottom + arrowHeight - 4;
        renderArrowUp = true;
    } else if (anchorTop - titleHeight - arrowHeight > 0) {
        boxY = anchorTop - titleHeight - arrowHeight + 3;
        renderArrowDown = true;
    } else
        boxY = arrowHeight;

    context.save();
    context.translate(0.5, 0.5);
    context.beginPath();
    context.moveTo(boxX, boxY);
    if (renderArrowUp) {
        context.lineTo(boxX + 2 * arrowHeight, boxY);
        context.lineTo(boxX + 3 * arrowHeight, boxY - arrowHeight);
        context.lineTo(boxX + 4 * arrowHeight, boxY);
    }
    context.lineTo(boxX + titleWidth, boxY);
    context.lineTo(boxX + titleWidth, boxY + titleHeight);
    if (renderArrowDown) {
        context.lineTo(boxX + 4 * arrowHeight, boxY + titleHeight);
        context.lineTo(boxX + 3 * arrowHeight, boxY + titleHeight + arrowHeight);
        context.lineTo(boxX + 2 * arrowHeight, boxY + titleHeight);
    }
    context.lineTo(boxX, boxY + titleHeight);
    context.closePath();
    context.fillStyle = "rgb(255, 255, 194)";
    context.fill();
    context.strokeStyle = "rgb(128, 128, 128)";
    context.stroke();

    context.restore();

    elementTitle.style.visibility = "visible";
    elementTitle.style.top = (boxY + 3) + "px";
    elementTitle.style.left = (boxX + 3) + "px";
}

function _createElementDescription(elementInfo)
{
    var elementInfoElement = createElement("div", "element-info");
    var descriptionElement = elementInfoElement.createChild("div", "element-description monospace");
    var tagNameElement = descriptionElement.createChild("b").createChild("span", "material-tag-name");
    tagNameElement.textContent = elementInfo.tagName;
    var nodeIdElement = descriptionElement.createChild("span", "material-node-id");
    nodeIdElement.textContent = elementInfo.idValue ? "#" + elementInfo.idValue : "";
    nodeIdElement.classList.toggle("hidden", !elementInfo.idValue);

    var classNameElement = descriptionElement.createChild("span", "material-class-name");
    classNameElement.textContent = (elementInfo.className || "").trim(50);
    classNameElement.classList.toggle("hidden", !elementInfo.className);
    var dimensionsElement = elementInfoElement.createChild("div", "dimensions");
    dimensionsElement.createChild("span", "material-node-width").textContent = Math.round(elementInfo.nodeWidth * 100) / 100;
    dimensionsElement.createTextChild("\u00d7");
    dimensionsElement.createChild("span", "material-node-height").textContent = Math.round(elementInfo.nodeHeight * 100) / 100;
    return elementInfoElement;
}

function _drawMaterialElementTitle(elementInfo, bounds)
{
    var tooltipContainer = document.getElementById("tooltip-container");
    tooltipContainer.removeChildren();
    _createMaterialTooltip(tooltipContainer, bounds, _createElementDescription(elementInfo), true);
}

function _createMaterialTooltip(parentElement, bounds, contentElement, withArrow)
{
    var tooltipContainer = parentElement.createChild("div");
    var tooltipContent = tooltipContainer.createChild("div", "tooltip-content");
    tooltipContent.appendChild(contentElement);

    var titleWidth = tooltipContent.offsetWidth;
    var titleHeight = tooltipContent.offsetHeight;
    var arrowRadius = 8;
    var pageMargin = 2;

    var boxX = Math.min(bounds.minX, canvasWidth - titleWidth - pageMargin);

    var boxY = bounds.minY - arrowRadius - titleHeight;
    var onTop = true;
    if (boxY < 0) {
        boxY = Math.min(canvasHeight - titleHeight, bounds.maxY + arrowRadius);
        onTop = false;
    } else if (bounds.minY > canvasHeight) {
        boxY = canvasHeight - arrowRadius - titleHeight;
    }

    tooltipContent.style.top = boxY + "px";
    tooltipContent.style.left = boxX + "px";
    if (!withArrow)
        return;

    var tooltipArrow = tooltipContainer.createChild("div", "material-tooltip-arrow");
    // Left align arrow to the tooltip but ensure it is pointing to the element.
    var tooltipBorderRadius = 2;
    var arrowX = boxX + arrowRadius + tooltipBorderRadius;
    if (arrowX < bounds.minX)
        arrowX = bounds.minX + arrowRadius;
    // Hide arrow if element is completely off the sides of the page.
    var arrowHidden = arrowX < pageMargin + tooltipBorderRadius || arrowX + arrowRadius * 2 > canvasWidth - pageMargin - tooltipBorderRadius;
    tooltipArrow.classList.toggle("hidden", arrowHidden);
    if (!arrowHidden) {
        tooltipArrow.classList.toggle("tooltip-arrow-top", onTop);
        tooltipArrow.style.top = (onTop ? boxY + titleHeight : boxY - arrowRadius) + "px";
        tooltipArrow.style.left = arrowX + "px";
    }
}

function _drawRulers(context, bounds, rulerAtRight, rulerAtBottom)
{
    context.save();
    var width = canvasWidth;
    var height = canvasHeight;
    context.strokeStyle = "rgba(128, 128, 128, 0.3)";
    context.lineWidth = 1;
    context.translate(0.5, 0.5);

    if (rulerAtRight) {
        for (var y in bounds.rightmostXForY) {
            context.beginPath();
            context.moveTo(width, y);
            context.lineTo(bounds.rightmostXForY[y], y);
            context.stroke();
        }
    } else {
        for (var y in bounds.leftmostXForY) {
            context.beginPath();
            context.moveTo(0, y);
            context.lineTo(bounds.leftmostXForY[y], y);
            context.stroke();
        }
    }

    if (rulerAtBottom) {
        for (var x in bounds.bottommostYForX) {
            context.beginPath();
            context.moveTo(x, height);
            context.lineTo(x, bounds.topmostYForX[x]);
            context.stroke();
        }
    } else {
        for (var x in bounds.topmostYForX) {
            context.beginPath();
            context.moveTo(x, 0);
            context.lineTo(x, bounds.topmostYForX[x]);
            context.stroke();
        }
    }

    context.restore();
}

function drawPath(context, commands, fillColor, outlineColor, bounds)
{
    var commandsIndex = 0;

    function extractPoints(count)
    {
        var points = [];

        for (var i = 0; i < count; ++i) {
            var x = Math.round(commands[commandsIndex++]);
            bounds.maxX = Math.max(bounds.maxX, x);
            bounds.minX = Math.min(bounds.minX, x);

            var y = Math.round(commands[commandsIndex++]);
            bounds.maxY = Math.max(bounds.maxY, y);
            bounds.minY = Math.min(bounds.minY, y);

            bounds.leftmostXForY[y] = Math.min(bounds.leftmostXForY[y] || Number.MAX_VALUE, x);
            bounds.rightmostXForY[y] = Math.max(bounds.rightmostXForY[y] || Number.MIN_VALUE, x);
            bounds.topmostYForX[x] = Math.min(bounds.topmostYForX[x] || Number.MAX_VALUE, y);
            bounds.bottommostYForX[x] = Math.max(bounds.bottommostYForX[x] || Number.MIN_VALUE, y);
            points.push(x, y);
        }
        return points;
    }

    context.save();
    var commandsLength = commands.length;
    var path = new Path2D();
    while (commandsIndex < commandsLength) {
        switch (commands[commandsIndex++]) {
        case "M":
            path.moveTo.apply(path, extractPoints(1));
            break;
        case "L":
            path.lineTo.apply(path, extractPoints(1));
            break;
        case "C":
            path.bezierCurveTo.apply(path, extractPoints(3));
            break;
        case "Q":
            path.quadraticCurveTo.apply(path, extractPoints(2));
            break;
        case "Z":
            path.closePath();
            break;
        }
    }
    path.closePath();
    context.lineWidth = 0;
    context.fillStyle = fillColor;
    context.fill(path);

    if (outlineColor) {
        context.lineWidth = 2;
        context.strokeStyle = outlineColor;
        context.stroke(path);
    }

    context.restore();
    return path;
}

function emptyBounds()
{
    var bounds = {
        minX: Number.MAX_VALUE,
        minY: Number.MAX_VALUE,
        maxX: Number.MIN_VALUE,
        maxY: Number.MIN_VALUE,
        leftmostXForY: {},
        rightmostXForY: {},
        topmostYForX: {},
        bottommostYForX: {}
    };
    return bounds;
}

function drawHighlight(highlight, context)
{
    context = context || window.context;
    context.save();

    var bounds = emptyBounds();

    for (var paths = highlight.paths.slice(); paths.length;) {
        var path = paths.pop();
        drawPath(context, path.path, path.fillColor, path.outlineColor, bounds);
        if (paths.length) {
            context.save();
            context.globalCompositeOperation = "destination-out";
            drawPath(context, paths[paths.length - 1].path, "red", null, bounds);
            context.restore();
        }
    }

    var rulerAtRight = highlight.paths.length && highlight.showRulers && bounds.minX < 20 && bounds.maxX + 20 < canvasWidth;
    var rulerAtBottom = highlight.paths.length && highlight.showRulers && bounds.minY < 20 && bounds.maxY + 20 < canvasHeight;

    if (highlight.showRulers)
        _drawGrid(context, rulerAtRight, rulerAtBottom);

    if (highlight.paths.length) {
        if (highlight.showExtensionLines)
            _drawRulers(context, bounds, rulerAtRight, rulerAtBottom);

        if (highlight.elementInfo && highlight.displayAsMaterial)
           _drawMaterialElementTitle(highlight.elementInfo, bounds);
        else if (highlight.elementInfo)
           _drawElementTitle(context, highlight.elementInfo, bounds);
    }
    context.restore();

    return { bounds: bounds };
}

function setPlatform(platform)
{
    window.platform = platform;
    document.body.classList.add("platform-" + platform);
}

function dispatch(message)
{
    var functionName = message.shift();
    window[functionName].apply(null, message);
}

function log(text)
{
    document.getElementById("log").createChild("div").textContent = text;
}

function onResumeClick()
{
    InspectorOverlayHost.resume();
}

function onStepOverClick()
{
    InspectorOverlayHost.stepOver();
}

function onLoaded()
{
    document.getElementById("resume-button").addEventListener("click", onResumeClick);
    document.getElementById("step-over-button").addEventListener("click", onStepOverClick);
}

function eventHasCtrlOrMeta(event)
{
    return window.platform == "mac" ? (event.metaKey && !event.ctrlKey) : (event.ctrlKey && !event.metaKey);
}

function onDocumentKeyDown(event)
{
    if (!window._controlsVisible)
        return;
    if (event.key == "F8" || eventHasCtrlOrMeta(event) && event.keyCode == 220 /* backslash */)
        InspectorOverlayHost.resume();
    else if (event.key == "F10" || eventHasCtrlOrMeta(event) && event.keyCode == 222 /* single quote */)
        InspectorOverlayHost.stepOver();
}

function showLayoutEditor(info)
{
    if (!window.layoutEditor)
        window.layoutEditor = new LayoutEditor();

    window.layoutEditor.setState(info);
}

function setSelectorInLayoutEditor(selectorInfo)
{
    if (!window.layoutEditor)
        return;

    window.layoutEditor.setSelector(selectorInfo);
}

/**
 * @constructor
 */
function LayoutEditor()
{
    this._boundConsumeEvent = this._consumeEvent.bind(this);
    this._boundStrayClick = this._onStrayClick.bind(this);
    this._boundKeyDown = this._onKeyDown.bind(this);
    this._boundMouseWheel = this._onMouseWheel.bind(this);

    this._paddingBounds = this._defaultBounds();
    this._contentBounds = this._defaultBounds();
    this._marginBounds = this._defaultBounds();
    this._element = document.getElementById("editor");
    this._editorElement = this._element.createChild("div");
    this._selectorTooltipElement = this._element.createChild("div", "selector-tooltip-element");
    this._matchedNodesCanvas = createCanvas("layout-editor-matched-nodes-canvas");
    this._editorElement.parentElement.insertBefore(this._matchedNodesCanvas, this._editorElement);

    this._wallsElements = new Map();
    this._labelsElements = new Map();
    this._anchorsElements = new Map();
    this._anchorsInfo = new Map();
}

/**
 * @typedef {{
 *      type: string,
 *      propertyName: number,
 *      propertyValue: {value: number, unit: string, growInside: boolean, mutable: boolean}
 * }}
 */
LayoutEditor.AnchorInfo;

/**
 * @typedef {{
 *      left: number,
 *      top: number,
 *      right: number,
 *      bottom: number
 * }}
 */
LayoutEditor.Bounds;

/**
 * @typedef {{
 *      orientation: string,
 *      border1: string,
 *      border2: string,
 *      dimension1: string,
 *      dimension2: string
 * }}
 */
LayoutEditor.Bounds;

/**
 * @typedef {{
 *      p1: !Point,
 *      p2: !Point,
 *      p3: !Point,
 *      p4: !Point
 * }}
 */
LayoutEditor.Quad;

/**
 * @typedef {{
 *      contentQuad: !LayoutEditor.Quad,
 *      marginQuad: !LayoutEditor.Quad,
 *      paddingQuad: !LayoutEditor.Quad,
 *      anchors: !Array.<!LayoutEditor.AnchorInfo>
 * }}
 */
LayoutEditor.Info;

LayoutEditor._controlLaneWidth = 16;
LayoutEditor._wallWidth = 8;
LayoutEditor._handleWidth = 8;
LayoutEditor._labelOffset = 12;

LayoutEditor.prototype = {
    /**
     * @return {!LayoutEditor.Bounds}
     */
    _defaultBounds: function ()
    {
        var bounds = {
            left: Number.MAX_VALUE,
            top: Number.MAX_VALUE,
            right: Number.MIN_VALUE,
            bottom: Number.MIN_VALUE,
        };
        return bounds;
    },

    reset: function()
    {
        this._anchorsInfo.clear();
        this._anchorsElements.clear();
        this._wallsElements.clear();
        this._labelsElements.clear();
        this._paddingBounds = this._defaultBounds();
        this._contentBounds = this._defaultBounds();
        this._marginBounds = this._defaultBounds();

        resetCanvas(this._matchedNodesCanvas);
        document.body.style.cursor = "";

        this._editorElement.removeChildren();
        this._selectorTooltipElement.removeChildren();

        document.removeEventListener("mousedown", this._boundConsumeEvent);
        document.removeEventListener("mouseup", this._boundConsumeEvent);
        document.removeEventListener("click", this._boundStrayClick);
        document.removeEventListener("keydown", this._boundKeyDown);
        document.removeEventListener("mousewheel", this._boundMouseWheel);
        document.removeEventListener("mousemove", this._boundConsumeEvent);
    },

    /**
     * @param {!LayoutEditor.Info} info
     */
    setState: function(info)
    {
        this._editorElement.style.visibility = "visible";

        function buildBounds(quad)
        {
            var bounds = this._defaultBounds();
            for (var i = 1; i <= 4; ++i) {
                var point = quad["p" + i];
                bounds.left = Math.min(bounds.left, point.x);
                bounds.right = Math.max(bounds.right, point.x);
                bounds.top = Math.min(bounds.top, point.y);
                bounds.bottom = Math.max(bounds.bottom, point.y);
            }
            return bounds;
        }

        this._contentBounds = buildBounds.call(this, info.contentQuad);
        this._paddingBounds = buildBounds.call(this, info.paddingQuad);
        this._marginBounds = buildBounds.call(this, info.marginQuad);

        this._anchorsInfo = new Map();
        for (var i = 0; i < info.anchors.length; ++i)
            this._anchorsInfo.set(info.anchors[i].propertyName, info.anchors[i])

        document.addEventListener("mousedown", this._boundConsumeEvent);
        document.addEventListener("mouseup", this._boundConsumeEvent);
        document.addEventListener("click", this._boundStrayClick);
        document.addEventListener("keydown", this._boundKeyDown);
        document.addEventListener("mousewheel", this._boundMouseWheel);

        this._createBlurWindow();
        this._createGuideLines();
        this._createControlLanes(info.anchors);
        document.addEventListener("mousemove", this._boundConsumeEvent);

        if (this._draggedPropertyName) {
            document.body.style.cursor = (this._draggedPropertyName.endsWith("left") || this._draggedPropertyName.endsWith("right")) ? "ew-resize" : "ns-resize";
            this._toggleHighlightedState(this._draggedPropertyName, true);
        }
    },

    _createBlurWindow: function()
    {
        var left = this._editorElement.createChild("div", "blur-rect");
        left.style.height = canvasHeight + "px";
        left.style.width = this._marginBounds.left + "px";
        var top = this._editorElement.createChild("div", "blur-rect");
        top.style.left = this._marginBounds.left + "px";
        top.style.width = canvasWidth - this._marginBounds.left + "px";
        top.style.height = this._marginBounds.top  + "px";
        var right = this._editorElement.createChild("div", "blur-rect");
        right.style.left = this._marginBounds.right + "px";
        right.style.top = this._marginBounds.top + "px";
        right.style.width = (canvasWidth - this._marginBounds.right) + "px";
        right.style.height = (canvasHeight - this._marginBounds.top) + "px";
        var bottom = this._editorElement.createChild("div", "blur-rect");
        bottom.style.left = this._marginBounds.left + "px";
        bottom.style.top = this._marginBounds.bottom + "px";
        bottom.style.width = this._marginBounds.right - this._marginBounds.left + "px";
        bottom.style.height = canvasHeight - this._marginBounds.bottom + "px";
        top.addEventListener("click", this._boundStrayClick);
        bottom.addEventListener("click", this._boundStrayClick);
        left.addEventListener("click", this._boundStrayClick);
        right.addEventListener("click", this._boundStrayClick);
    },

    _createGuideLines: function()
    {
        /**
         * @param {number} x
         * @param {string} type
         * @this {LayoutEditor}
         */
        function verticalLine(x, type)
        {
            var verticalElement = this._editorElement.createChild("div", "guide-line vertical");
            verticalElement.classList.add(type);
            verticalElement.style.height = canvasHeight + "px";
            verticalElement.style.top = "0px";
            verticalElement.style.left = x + "px";
        }

        /**
         * @param {number} y
         * @param {string} type
         * @this {LayoutEditor}
         */
        function horizontalLine(y, type)
        {
            var horizontalElement = this._editorElement.createChild("div", "guide-line horizontal");
            horizontalElement.classList.add(type);
            horizontalElement.style.width = canvasWidth + "px";
            horizontalElement.style.left = "0px";
            horizontalElement.style.top = y + "px";
        }

        /**
         * @param {!LayoutEditor.Bounds} bounds
         * @param {string} type
         * @this {LayoutEditor}
         */
        function guideLines(bounds, type)
        {
            verticalLine.call(this, bounds.left, type);
            verticalLine.call(this, bounds.right, type);
            horizontalLine.call(this, bounds.top, type);
            horizontalLine.call(this, bounds.bottom, type);
        }

        guideLines.call(this, this._contentBounds, "content");
        guideLines.call(this, this._paddingBounds, "padding");
        guideLines.call(this, this._marginBounds, "margin");
    },

    /**
     * @param {!Element} parent
     * @param {!Element} anchorElement
     * @param {!LayoutEditor.AnchorInfo} anchorInfo
     */
    _createLabel: function(parent, anchorElement, anchorInfo)
    {
        var label = parent.createChild("div", "label " + anchorInfo.type);
        var nameElement = label.createChild("span", "name");
        var anchorName = anchorInfo.propertyName;
        nameElement.textContent = anchorName + ": ";
        var valueElement = label.createChild("span", "value");
        valueElement.textContent = String(parseFloat(anchorInfo.propertyValue.value.toFixed(2)));
        var dimensionElement = label.createChild("span", "dimension");
        dimensionElement.textContent = "\u2009" + anchorInfo.propertyValue.unit;

        var leftX = anchorElement.offsetLeft - LayoutEditor._labelOffset - label.offsetWidth;
        var fitLeft = leftX > 0;
        var rightX = anchorElement.offsetLeft + anchorElement.offsetWidth  + LayoutEditor._labelOffset;
        var fitRight = rightX + label.offsetWidth < canvasWidth;
        var growsInside = anchorInfo.propertyValue.growInside;
        var toLeft = anchorName.endsWith("right") && growsInside ||  anchorName.endsWith("left") && !growsInside;
        var startPosition;
        if (!fitLeft || (!toLeft && fitRight)) {
            startPosition = rightX;
            label.classList.add("left-arrow");
        } else {
            startPosition = leftX;
            label.classList.add("right-arrow");
        }

        var y = anchorElement.offsetTop + anchorElement.offsetHeight / 2;
        label.style.left = (startPosition | 0) + "px";
        label.style.top = ((y - label.offsetHeight / 2) | 0) + "px";

        label.classList.add("hidden");
        return label;
    },

    /**
     * @param {string} anchorName
     * @param {boolean} highlighted
     */
    _toggleHighlightedState: function(anchorName, highlighted)
    {
        this._anchorsElements.get(anchorName).classList.toggle("highlighted", highlighted);
        this._wallsElements.get(anchorName).classList.toggle("highlighted", highlighted);
        this._labelsElements.get(anchorName).classList.toggle("hidden", !highlighted);
    },

    _createControlLanes: function()
    {
        var descriptionH = {orientation: "horizontal", border1: "left", border2: "top", dimension1: "width", dimension2: "height"};
        var descriptionV = {orientation: "vertical", border1: "top", border2: "left", dimension1: "height", dimension2: "width"};
        var sidesByOrientation = {horizontal : ["left", "right"], vertical : ["top", "bottom"]};

        /**
         * @param {!Element} parent
         * @param {!LayoutEditor.Bounds} innerBox
         * @param {!LayoutEditor.Bounds} outerBox
         * @param {string} type
         * @param {string} side
         * @param {!LayoutEditor.Description} description
         * @param {number} border2Position
         * @this {LayoutEditor}
         */
        function createAnchorWithWall(parent, innerBox, outerBox, type, side, description, border2Position)
        {
            var anchorName = type + "-" + side;
            var anchorInfo = this._anchorsInfo.get(anchorName);
            var growsInside = anchorInfo.propertyValue.growInside;

            var anchorPosition = (growsInside ? innerBox[side] : outerBox[side]);
            var anchorElement = parent.createChild("div", "editor-anchor " + description.orientation + " " + type);
            var handleHalf = LayoutEditor._handleWidth / 2;
            anchorElement.style[description.border1] = (anchorPosition - handleHalf) + "px";
            anchorElement.style[description.border2] = border2Position + "px";
            this._anchorsElements.set(anchorName, anchorElement);

            if (anchorInfo.propertyValue.mutable)
                anchorElement.addEventListener("mousedown", this._onAnchorMouseDown.bind(this, anchorName));

            anchorElement.addEventListener("mouseenter", this._toggleHighlightedState.bind(this, anchorName, true));
            anchorElement.addEventListener("mouseleave", this._toggleHighlightedState.bind(this, anchorName, false));

            var wallElement = parent.createChild("div", "wall " + description.orientation + " " + type);
            var wallPosition = (growsInside ? outerBox[side] : innerBox[side]);
            var minSide = (side === "left" || side === "top");
            wallPosition += (minSide === growsInside) ? - handleHalf - LayoutEditor._wallWidth : handleHalf;
            wallElement.style[description.border1] = wallPosition + "px";
            wallElement.style[description.border2] = border2Position + "px";

            this._wallsElements.set(anchorName, wallElement);

            var labelElement = this._createLabel(parent, anchorElement, anchorInfo);
            this._labelsElements.set(anchorName, labelElement);
        }

        /**
         * @param {!Element} parent
         * @param {!LayoutEditor.Bounds} innerBox
         * @param {!LayoutEditor.Bounds} outerBox
         * @param {string} type
         * @param {!LayoutEditor.Description} description
         * @param {number} border2Position
         * @this {LayoutEditor}
         */
        function createLane(parent, innerBox, outerBox, type, description, border2Position)
        {
            var verticalElement = parent.createChild("div", "control-lane " + type);
            var sides = sidesByOrientation[description.orientation];
            verticalElement.style[description.border1] = outerBox[sides[0]] + "px";
            verticalElement.style[description.border2] = border2Position + "px";
            verticalElement.style[description.dimension1] = (outerBox[sides[1]] - outerBox[sides[0]]) + "px";
            verticalElement.style[description.dimension2] = LayoutEditor._controlLaneWidth + "px";
            createAnchorWithWall.call(this, parent, innerBox, outerBox, type, sides[0], description, border2Position);
            createAnchorWithWall.call(this, parent, innerBox, outerBox, type, sides[1], description, border2Position);
        }

        var yPosition = 0;
        var xPosition = 0;
        if (this._marginBounds.bottom + 2 * LayoutEditor._controlLaneWidth <= canvasHeight)
            yPosition = this._marginBounds.bottom;
        else if (this._marginBounds.top - 2 * LayoutEditor._controlLaneWidth >= 0)
            yPosition = this._marginBounds.top - 2 * LayoutEditor._controlLaneWidth;
        else
            yPosition = (this._contentBounds.top + this._contentBounds.bottom) / 2;

        if (this._marginBounds.left - 2 * LayoutEditor._controlLaneWidth >= 0)
            xPosition = this._marginBounds.left - 2 * LayoutEditor._controlLaneWidth;
        else if (this._marginBounds.right + 2 * LayoutEditor._controlLaneWidth <= canvasWidth)
            xPosition = this._marginBounds.right;
        else
            xPosition = (this._contentBounds.right + this._contentBounds.left) / 2;

        createLane.call(this, this._editorElement, this._contentBounds, this._paddingBounds, "padding", descriptionH, yPosition);
        createLane.call(this, this._editorElement, this._paddingBounds, this._marginBounds, "margin", descriptionH, yPosition + LayoutEditor._controlLaneWidth);
        createLane.call(this, this._editorElement, this._contentBounds, this._paddingBounds, "padding", descriptionV, xPosition);
        createLane.call(this, this._editorElement, this._paddingBounds, this._marginBounds, "margin", descriptionV, xPosition + LayoutEditor._controlLaneWidth);
    },

    setSelector: function(selectorInfo)
    {
        this._selectorTooltipElement.removeChildren();
        var containerElement = createElement("div");

        for (var i = (selectorInfo.medias || []).length - 1; i >= 0; --i)
            containerElement.createChild("div", "layout-editor-media-tooltip").textContent = ("@media " + selectorInfo.medias[i]).trim(50);

        var selectorElement = containerElement.createChild("div", "layout-editor-selector-tooltip");
        selectorElement.textContent = selectorInfo.selector.trimEnd(50);

        var margin = 40;
        var bounds = {minX: this._marginBounds.left, maxX: this._marginBounds.right,
                minY: this._marginBounds.top - margin, maxY: this._marginBounds.bottom + margin};
        _createMaterialTooltip(this._selectorTooltipElement, bounds, containerElement);
        resetCanvas(this._matchedNodesCanvas);

        if (!selectorInfo.nodes)
            return;

        for (var nodeHighlight of selectorInfo.nodes)
            drawHighlight(nodeHighlight, this._matchedNodesCanvas.getContext("2d"));
    },

    _calculateDelta: function(deltaVector, moveDelta)
    {
        return scalarProduct(deltaVector, moveDelta) / Math.sqrt(scalarProduct(deltaVector, deltaVector));
    },

    /**
     * @param {string} anchorName
     * @return {!Point}
     */
    _defaultDeltaVector: function(anchorName)
    {
        if (anchorName.endsWith("right"))
            return new Point(1, 0);
        if (anchorName.endsWith("left"))
            return new Point(-1, 0);
        if (anchorName.endsWith("top"))
            return new Point(0, -1);
        if (anchorName.endsWith("bottom"))
            return new Point(0, 1);
    },

    /**
     * @param {string} anchorName
     * @param {!Event} event
     */
    _onAnchorMouseDown: function(anchorName, event)
    {
        // Only drag upon left button. Right will likely cause a context menu. So will ctrl-click on mac.
        if (event.button || (window.platform == "mac" && event.ctrlKey))
            return;

        event.preventDefault();
        var deltaVector = this._defaultDeltaVector(anchorName);
        var anchorInfo = this._anchorsInfo.get(anchorName);
        if (anchorInfo.propertyValue.growInside)
            deltaVector = new Point(-deltaVector.x, -deltaVector.y);

        this._boundDragMove = this._onDragMove.bind(this, new Point(event.screenX, event.screenY), deltaVector);
        this._boundDragEnd = this._onDragEnd.bind(this);
        document.addEventListener("mousemove", this._boundDragMove);
        document.addEventListener("mouseup", this._boundDragEnd);
        InspectorOverlayHost.startPropertyChange(anchorName);
        this._preciseDrag = !!event.shiftKey;
        this._draggedPropertyName = anchorName;
        this._toggleHighlightedState(anchorName, true);
    },

    /**
     * @param {!Point} mouseDownPoint
     * @param {!Point} deltaVector
     * @param {!Event} event
     */
    _onDragMove: function(mouseDownPoint, deltaVector, event)
    {
        if (event.buttons !== 1) {
            this._onDragEnd(event);
            return;
        }
        event.preventDefault();
        if (this._preciseDrag !== event.shiftKey) {
            InspectorOverlayHost.endPropertyChange();
            document.removeEventListener("mousemove", this._boundDragMove);
            mouseDownPoint = new Point(event.screenX, event.screenY);
            this._boundDragMove = this._onDragMove.bind(this, mouseDownPoint, deltaVector);
            document.addEventListener("mousemove", this._boundDragMove);
            this._preciseDrag = event.shiftKey;
            InspectorOverlayHost.startPropertyChange(this._draggedPropertyName);
        }

        var preciseFactor = this._preciseDrag ? 5 : 1;
        InspectorOverlayHost.changeProperty(this._calculateDelta(deltaVector, new Point(event.screenX - mouseDownPoint.x, event.screenY - mouseDownPoint.y)) / preciseFactor);
    },

    /**
     * @param {!Event} event
     */
    _onDragEnd: function(event)
    {
        document.removeEventListener("mousemove", this._boundDragMove);
        document.removeEventListener("mouseup", this._boundDragEnd);
        delete this._boundDragMove;
        delete this._boundDragEnd;
        this._toggleHighlightedState(this._draggedPropertyName, false);
        document.body.style.cursor = "";
        delete this._draggedPropertyName;
        delete this._preciseDrag;
        event.preventDefault();
        InspectorOverlayHost.endPropertyChange();
    },

    /**
     * @param {!Event} event
     */
    _onStrayClick: function(event)
    {
        event.preventDefault();
        InspectorOverlayHost.clearSelection(true);
    },

    /**
     * @param {!Event} event
     */
    _onKeyDown: function(event)
    {
        if (this._draggedPropertyName)
            return;

        // Clear selection on Esc.
        if (event.key === "Escape") {
            event.preventDefault();
            InspectorOverlayHost.clearSelection(false);
        }
    },

    /**
     * @param {!Event} event
     */
    _onMouseWheel: function(event)
    {
        event.preventDefault();
        this._mouseWheelDelta = (this._mouseWheelDelta || 0) + event.wheelDelta;
        if (this._mouseWheelDelta >= 120) {
            InspectorOverlayHost.nextSelector();
            this._mouseWheelDelta = 0;
        } else if (this._mouseWheelDelta <= -120) {
            InspectorOverlayHost.previousSelector();
            this._mouseWheelDelta = 0;
        }
    },

    /**
     * @param {!Event} event
     */
    _consumeEvent: function(event)
    {
        event.preventDefault();
    }
}

/**
 * @constructor
 * @param {number} x
 * @param {number} y
 */
function Point(x, y)
{
    this.x = x;
    this.y = y;
}

function createCanvas(id)
{
    var canvas = createElement("canvas", "fill");
    canvas.id = id;
    resetCanvas(canvas);
    return canvas;
}

function scalarProduct(v1, v2)
{
    return v1.x * v2.x + v1.y * v2.y;
}

Element.prototype.createChild = function(tagName, className)
{
    var element = createElement(tagName, className);
    element.addEventListener("click", function(e) { e.stopPropagation(); }, false);
    this.appendChild(element);
    return element;
}

Element.prototype.createTextChild = function(text)
{
    var element = document.createTextNode(text);
    this.appendChild(element);
    return element;
}

Element.prototype.removeChildren = function()
{
    if (this.firstChild)
        this.textContent = "";
}

function createElement(tagName, className)
{
    var element = document.createElement(tagName);
    if (className)
        element.className = className;
    return element;
}

String.prototype.trimEnd = function(maxLength)
{
    if (this.length <= maxLength)
        return String(this);
    return this.substr(0, maxLength - 1) + "\u2026";
}

window.addEventListener("DOMContentLoaded", onLoaded);
document.addEventListener("keydown", onDocumentKeyDown);
</script>
</head>
<body class="fill">
</body>
<canvas id="canvas" class="fill"></canvas>
<div id="element-title">
  <span id="tag-name"></span><span id="node-id"></span><span id="class-name"></span>
  <span id="node-width"></span><span class="px">px</span><span class="px"> &#xD7; </span><span id="node-height"></span><span class="px">px</span>
</div>
<div id="tooltip-container"></div>
<div id="editor" class="fill"></div>
<div id="reloading-blanket" class="fill" style="display: none"></div>
<div class="controls-line">
    <div class="message-box"><div id="paused-in-debugger"></div></div>
    <div class="button" id="resume-button" title="Resume script execution (F8)."><div class="glyph"></div></div>
    <div class="button" id="step-over-button" title="Step over next function call (F10)."><div class="glyph"></div></div>
</div>
<div id="log"></div>
</html>
/**
 * This is a placeholder to create the
 * IDR_PRIVATE_SCRIPT_DOCUMENTEXECCOMMAND_JS resource.
 *
 * It will be replaced by a complete file in:
 *   https://codereview.chromium.org/530663002/
 */
/* Copyright 2014 The Chromium Authors. All rights reserved.
 * Use of this source code is governed by a BSD-style license that can be
 * found in the LICENSE file.
 */

div.header {
    border-bottom: 2px solid black;
    padding-bottom: 5px;
    margin: 10px;
}

div.collapsible > div.hidden {
    display:none;
}

.pretty-print {
    margin-top: 1em;
    margin-left: 20px;
    font-family: monospace;
    font-size: 13px;
}

#webkit-xml-viewer-source-xml {
    display: none;
}

.collapsible-content {
    margin-left: 1em;
}
.comment {
    white-space: pre;
}

.button {
    -webkit-user-select: none;
    cursor: pointer;
    display: inline-block;
    margin-left: -10px;
    width: 10px;
    background-repeat: no-repeat;
    background-position: left top;
    vertical-align: bottom;
}

.collapse-button {
    background: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' fill='#909090' width='10' height='10'><path d='M0 0 L8 0 L4 7 Z'/></svg>");
    height: 10px;
}

.expand-button {
    background: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' fill='#909090' width='10' height='10'><path d='M0 0 L0 8 L7 4 Z'/></svg>");
    height: 10px;
}
// Copyright 2014 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

"use strict";

var xmlTreeViewerCSS = privateScriptController.import("DocumentXMLTreeViewer.css");

privateScriptController.installClass("Document", function(DocumentPrototype) {
    var nodeParentPairs = [];
    var tree;

    function prepareWebKitXMLViewer(noStyleMessage)
    {
        var html = createHTMLElement('html');
        var head = createHTMLElement('head');
        html.appendChild(head);
        var style = createHTMLElement('style');
        style.id = 'xml-viewer-style';
        style.appendChild(document.createTextNode(xmlTreeViewerCSS));
        head.appendChild(style);
        var body = createHTMLElement('body');
        html.appendChild(body);
        var sourceXML = createHTMLElement('div');
        sourceXML.id = 'webkit-xml-viewer-source-xml';
        body.appendChild(sourceXML);

        var child;
        while (child = document.firstChild) {
            document.removeChild(child);
            if (child.nodeType != Node.DOCUMENT_TYPE_NODE)
                sourceXML.appendChild(child);
        }
        document.appendChild(html);

        var header = createHTMLElement('div');
        body.appendChild(header);
        header.classList.add('header');
        var headerSpan = createHTMLElement('span');
        header.appendChild(headerSpan);
        headerSpan.textContent = noStyleMessage;
        header.appendChild(createHTMLElement('br'));

        tree = createHTMLElement('div');
        body.appendChild(tree);
        tree.classList.add('pretty-print');
        window.onload = sourceXMLLoaded;
    }

    function sourceXMLLoaded()
    {
        var sourceXML = document.getElementById('webkit-xml-viewer-source-xml');
        if (!sourceXML)
            return; // Stop if some XML tree extension is already processing this document

        for (var child = sourceXML.firstChild; child; child = child.nextSibling)
            nodeParentPairs.push({parentElement: tree, node: child});

        for (var i = 0; i < nodeParentPairs.length; i++)
            processNode(nodeParentPairs[i].parentElement, nodeParentPairs[i].node);

        initButtons();

        return false;
    }

    // Tree processing.

    function processNode(parentElement, node)
    {
        var map = processNode.processorsMap;
        if (!map) {
            map = {};
            processNode.processorsMap = map;
            map[Node.PROCESSING_INSTRUCTION_NODE] = processProcessingInstruction;
            map[Node.ELEMENT_NODE] = processElement;
            map[Node.COMMENT_NODE] = processComment;
            map[Node.TEXT_NODE] = processText;
            map[Node.CDATA_SECTION_NODE] = processCDATA;
        }
        if (processNode.processorsMap[node.nodeType])
            processNode.processorsMap[node.nodeType].call(this, parentElement, node);
    }

    function processElement(parentElement, node)
    {
        if (!node.firstChild)
            processEmptyElement(parentElement, node);
        else {
            var child = node.firstChild;
            if (child.nodeType == Node.TEXT_NODE && isShort(child.nodeValue) && !child.nextSibling)
                processShortTextOnlyElement(parentElement, node);
            else
                processComplexElement(parentElement, node);
        }
    }

    function processEmptyElement(parentElement, node)
    {
        var line = createLine();
        line.appendChild(createTag(node, false, true));
        parentElement.appendChild(line);
    }

    function processShortTextOnlyElement(parentElement, node)
    {
        var line = createLine();
        line.appendChild(createTag(node, false, false));
        for (var child = node.firstChild; child; child = child.nextSibling)
            line.appendChild(createText(child.nodeValue));
        line.appendChild(createTag(node, true, false));
        parentElement.appendChild(line);
    }

    function processComplexElement(parentElement, node)
    {
        var collapsible = createCollapsible();

        collapsible.expanded.start.appendChild(createTag(node, false, false));
        for (var child = node.firstChild; child; child = child.nextSibling)
            nodeParentPairs.push({parentElement: collapsible.expanded.content, node: child});
        collapsible.expanded.end.appendChild(createTag(node, true, false));

        collapsible.collapsed.content.appendChild(createTag(node, false, false));
        collapsible.collapsed.content.appendChild(createText('...'));
        collapsible.collapsed.content.appendChild(createTag(node, true, false));
        parentElement.appendChild(collapsible);
    }

    function processComment(parentElement, node)
    {
        if (isShort(node.nodeValue)) {
            var line = createLine();
            line.appendChild(createComment('<!-- ' + node.nodeValue + ' -->'));
            parentElement.appendChild(line);
        } else {
            var collapsible = createCollapsible();

            collapsible.expanded.start.appendChild(createComment('<!--'));
            collapsible.expanded.content.appendChild(createComment(node.nodeValue));
            collapsible.expanded.end.appendChild(createComment('-->'));

            collapsible.collapsed.content.appendChild(createComment('<!--'));
            collapsible.collapsed.content.appendChild(createComment('...'));
            collapsible.collapsed.content.appendChild(createComment('-->'));
            parentElement.appendChild(collapsible);
        }
    }

    function processCDATA(parentElement, node)
    {
        if (isShort(node.nodeValue)) {
            var line = createLine();
            line.appendChild(createText('<![CDATA[ ' + node.nodeValue + ' ]]>'));
            parentElement.appendChild(line);
        } else {
            var collapsible = createCollapsible();

            collapsible.expanded.start.appendChild(createText('<![CDATA['));
            collapsible.expanded.content.appendChild(createText(node.nodeValue));
            collapsible.expanded.end.appendChild(createText(']]>'));

            collapsible.collapsed.content.appendChild(createText('<![CDATA['));
            collapsible.collapsed.content.appendChild(createText('...'));
            collapsible.collapsed.content.appendChild(createText(']]>'));
            parentElement.appendChild(collapsible);
        }
    }

    function processProcessingInstruction(parentElement, node)
    {
        if (isShort(node.nodeValue)) {
            var line = createLine();
            line.appendChild(createComment('<?' + node.nodeName + ' ' + node.nodeValue + '?>'));
            parentElement.appendChild(line);
        } else {
            var collapsible = createCollapsible();

            collapsible.expanded.start.appendChild(createComment('<?' + node.nodeName));
            collapsible.expanded.content.appendChild(createComment(node.nodeValue));
            collapsible.expanded.end.appendChild(createComment('?>'));

            collapsible.collapsed.content.appendChild(createComment('<?' + node.nodeName));
            collapsible.collapsed.content.appendChild(createComment('...'));
            collapsible.collapsed.content.appendChild(createComment('?>'));
            parentElement.appendChild(collapsible);
        }
    }

    function processText(parentElement, node)
    {
        parentElement.appendChild(createText(node.nodeValue));
    }

    // Processing utils.

    function trim(value)
    {
        return value.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
    }

    function isShort(value)
    {
        return trim(value).length <= 50;
    }

    // Tree rendering.

    function createHTMLElement(elementName)
    {
        return document.createElementNS('http://www.w3.org/1999/xhtml', elementName)
    }

    function createCollapsible()
    {
        var collapsible = createHTMLElement('div');
        collapsible.classList.add('collapsible');
        collapsible.expanded = createHTMLElement('div');
        collapsible.expanded.classList.add('expanded');
        collapsible.appendChild(collapsible.expanded);

        collapsible.expanded.start = createLine();
        collapsible.expanded.start.appendChild(createCollapseButton());
        collapsible.expanded.appendChild(collapsible.expanded.start);

        collapsible.expanded.content = createHTMLElement('div');
        collapsible.expanded.content.classList.add('collapsible-content');
        collapsible.expanded.appendChild(collapsible.expanded.content);

        collapsible.expanded.end = createLine();
        collapsible.expanded.appendChild(collapsible.expanded.end);

        collapsible.collapsed = createHTMLElement('div');
        collapsible.collapsed.classList.add('collapsed');
        collapsible.collapsed.classList.add('hidden');
        collapsible.appendChild(collapsible.collapsed);
        collapsible.collapsed.content = createLine();
        collapsible.collapsed.content.appendChild(createExpandButton());
        collapsible.collapsed.appendChild(collapsible.collapsed.content);

        return collapsible;
    }

    function createButton()
    {
        var button = createHTMLElement('span');
        button.classList.add('button');
        return button;
    }

    function createCollapseButton(str)
    {
        var button = createButton();
        button.classList.add('collapse-button');
        return button;
    }

    function createExpandButton(str)
    {
        var button = createButton();
        button.classList.add('expand-button');
        return button;
    }

    function createComment(commentString)
    {
        var comment = createHTMLElement('span');
        comment.classList.add('comment');
        comment.classList.add('html-comment');
        comment.textContent = commentString;
        return comment;
    }

    function createText(value)
    {
        var text = createHTMLElement('span');
        text.textContent = trim(value);
        text.classList.add('text');
        return text;
    }

    function createLine()
    {
        var line = createHTMLElement('div');
        line.classList.add('line');
        return line;
    }

    function createTag(node, isClosing, isEmpty)
    {
        var tag = createHTMLElement('span');
        tag.classList.add('html-tag');

        var stringBeforeAttrs = '<';
        if (isClosing)
            stringBeforeAttrs += '/';
        stringBeforeAttrs += node.nodeName;
        var textBeforeAttrs = document.createTextNode(stringBeforeAttrs);
        tag.appendChild(textBeforeAttrs);

        if (!isClosing) {
            for (var i = 0; i < node.attributes.length; i++)
                tag.appendChild(createAttribute(node.attributes[i]));
        }

        var stringAfterAttrs = '';
        if (isEmpty)
            stringAfterAttrs += '/';
        stringAfterAttrs += '>';
        var textAfterAttrs = document.createTextNode(stringAfterAttrs);
        tag.appendChild(textAfterAttrs);

        return tag;
    }

    function createAttribute(attributeNode)
    {
        var attribute = createHTMLElement('span');
        attribute.classList.add('html-attribute');

        var attributeName = createHTMLElement('span');
        attributeName.classList.add('html-attribute-name');
        attributeName.textContent = attributeNode.name;

        var textBefore = document.createTextNode(' ');
        var textBetween = document.createTextNode('="');

        var attributeValue = createHTMLElement('span');
        attributeValue.classList.add('html-attribute-value');
        attributeValue.textContent = attributeNode.value;

        var textAfter = document.createTextNode('"');

        attribute.appendChild(textBefore);
        attribute.appendChild(attributeName);
        attribute.appendChild(textBetween);
        attribute.appendChild(attributeValue);
        attribute.appendChild(textAfter);
        return attribute;
    }

    function expandFunction(sectionId)
    {
        return function()
        {
            document.querySelector('#' + sectionId + ' > .expanded').className = 'expanded';
            document.querySelector('#' + sectionId + ' > .collapsed').className = 'collapsed hidden';
        };
    }

    function collapseFunction(sectionId)
    {
        return function()
        {
            document.querySelector('#' + sectionId + ' > .expanded').className = 'expanded hidden';
            document.querySelector('#' + sectionId + ' > .collapsed').className = 'collapsed';
        };
    }

    function initButtons()
    {
        var sections = document.querySelectorAll('.collapsible');
        for (var i = 0; i < sections.length; i++) {
            var sectionId = 'collapsible' + i;
            sections[i].id = sectionId;

            var expandedPart = sections[i].querySelector('#' + sectionId + ' > .expanded');
            var collapseButton = expandedPart.querySelector('.collapse-button');
            collapseButton.onclick = collapseFunction(sectionId);
            collapseButton.onmousedown = handleButtonMouseDown;

            var collapsedPart = sections[i].querySelector('#' + sectionId + ' > .collapsed');
            var expandButton = collapsedPart.querySelector('.expand-button');
            expandButton.onclick = expandFunction(sectionId);
            expandButton.onmousedown = handleButtonMouseDown;
        }

    }

    function handleButtonMouseDown(e)
    {
       // To prevent selection on double click
       e.preventDefault();
    }

    DocumentPrototype.transformDocumentToTreeView = function(noStyleMessage) {
        prepareWebKitXMLViewer(noStyleMessage);
    }
});

// Copyright 2014 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

'use strict';

privateScriptController.installClass('HTMLMarqueeElement', function(HTMLMarqueeElementPrototype) {

    var kDefaultScrollAmount = 6;
    var kDefaultScrollDelayMS = 85;
    var kMinimumScrollDelayMS = 60;

    var kDefaultLoopLimit = -1;

    var kBehaviorScroll = 'scroll';
    var kBehaviorSlide = 'slide';
    var kBehaviorAlternate = 'alternate';

    var kDirectionLeft = 'left';
    var kDirectionRight = 'right';
    var kDirectionUp = 'up';
    var kDirectionDown = 'down';

    var kPresentationalAttributes = [
        'bgcolor',
        'height',
        'hspace',
        'vspace',
        'width',
    ];

    function convertHTMLLengthToCSSLength(value) {
        var match = value.match(/^\s*([\d.]+)(%)?\s*/);
        if (match)
            return match[2] === '%' ? match[1] + '%' : match[1] + 'px';
        return null;
    }

    // FIXME: Consider moving these utility functions to PrivateScriptRunner.js.
    var kInt32Max = Math.pow(2, 31);

    function convertToLong(n) {
        // Using parseInt() is wrong but this aligns with the existing behavior of StringImpl::toInt().
        // FIXME: Implement a correct algorithm of the Web IDL value conversion.
        var value = parseInt(n);
        if (!isNaN(value) && -kInt32Max <= value && value < kInt32Max)
            return value;
        return NaN;
    }

    function reflectAttribute(prototype, attributeName, propertyName) {
        Object.defineProperty(prototype, propertyName, {
            get: function() {
                return this.getAttribute(attributeName) || '';
            },
            set: function(value) {
                this.setAttribute(attributeName, value);
            },
            configurable: true,
            enumerable: true,
        });
    }

    function reflectBooleanAttribute(prototype, attributeName, propertyName) {
        Object.defineProperty(prototype, propertyName, {
            get: function() {
                return this.getAttribute(attributeName);
            },
            set: function(value) {
                if (value)
                    this.setAttribute(attributeName, '');
                else
                    this.removeAttribute(attributeName);
            },
        });
    }

    reflectAttribute(HTMLMarqueeElementPrototype, 'behavior', 'behavior');
    reflectAttribute(HTMLMarqueeElementPrototype, 'bgcolor', 'bgColor');
    reflectAttribute(HTMLMarqueeElementPrototype, 'direction', 'direction');
    reflectAttribute(HTMLMarqueeElementPrototype, 'height', 'height');
    reflectAttribute(HTMLMarqueeElementPrototype, 'hspace', 'hspace');
    reflectAttribute(HTMLMarqueeElementPrototype, 'vspace', 'vspace');
    reflectAttribute(HTMLMarqueeElementPrototype, 'width', 'width');
    reflectBooleanAttribute(HTMLMarqueeElementPrototype, 'truespeed', 'trueSpeed');

    HTMLMarqueeElementPrototype.createdCallback = function() {
        var shadow = this.createShadowRoot();
        var style = document.createElement('style');
        style.textContent = ':host { display: inline-block; width: -webkit-fill-available; overflow: hidden; text-align: initial; white-space: nowrap; }'
            + ':host([direction="up"]), :host([direction="down"]) { overflow: initial; overflow-y: hidden; white-space: initial; }';
        shadow.appendChild(style);

        var mover = document.createElement('div');
        shadow.appendChild(mover);

        mover.appendChild(document.createElement('content'));

        this.loopCount_ = 0;
        this.mover_ = mover;
        this.player_ = null;
        this.continueCallback_ = null;
    };

    HTMLMarqueeElementPrototype.attachedCallback = function() {
        for (var i = 0; i < kPresentationalAttributes.length; ++i) {
            this.initializeAttribute_(kPresentationalAttributes[i]);
        }

        this.start();
    };

    HTMLMarqueeElementPrototype.detachedCallback = function() {
        this.stop();
    };

    HTMLMarqueeElementPrototype.attributeChangedCallback = function(name, oldValue, newValue) {
        switch (name) {
        case 'bgcolor':
            this.style.backgroundColor = newValue;
            break;
        case 'height':
            this.style.height = convertHTMLLengthToCSSLength(newValue);
            break;
        case 'hspace':
            var margin = convertHTMLLengthToCSSLength(newValue);
            this.style.marginLeft = margin;
            this.style.marginRight = margin;
            break;
        case 'vspace':
            var margin = convertHTMLLengthToCSSLength(newValue);
            this.style.marginTop = margin;
            this.style.marginBottom = margin;
            break;
        case 'width':
            this.style.width = convertHTMLLengthToCSSLength(newValue);
            break;
        case 'behavior':
        case 'direction':
        case 'loop':
        case 'scrollAmount':
        case 'scrollDelay':
        case 'trueSpeed':
            // FIXME: Not implemented.
            break;
        }
    };

    HTMLMarqueeElementPrototype.initializeAttribute_ = function(name) {
        var value = this.getAttribute(name);
        if (value === null)
            return;
        this.attributeChangedCallback(name, null, value);
    };

    Object.defineProperty(HTMLMarqueeElementPrototype, 'scrollAmount', {
        get: function() {
            var value = this.getAttribute('scrollamount');
            var scrollAmount = convertToLong(value);
            if (isNaN(scrollAmount) || scrollAmount < 0)
                return kDefaultScrollAmount;
            return scrollAmount;
        },
        set: function(value) {
            if (value < 0)
                privateScriptController.throwException(privateScriptController.DOMException.IndexSizeError, "The provided value (" + value + ") is negative.");
            this.setAttribute('scrollamount', value);
        },
    });

    Object.defineProperty(HTMLMarqueeElementPrototype, 'scrollDelay', {
        get: function() {
            var value = this.getAttribute('scrolldelay');
            var scrollDelay = convertToLong(value);
            if (isNaN(scrollDelay) || scrollDelay < 0)
                return kDefaultScrollDelayMS;
            return scrollDelay;
        },
        set: function(value) {
            if (value < 0)
                privateScriptController.throwException(privateScriptController.DOMException.IndexSizeError, "The provided value (" + value + ") is negative.");
            this.setAttribute('scrolldelay', value);
        },
    });

    Object.defineProperty(HTMLMarqueeElementPrototype, 'loop', {
        get: function() {
            var value = this.getAttribute('loop');
            var loop = convertToLong(value);
            if (isNaN(loop) || loop <= 0)
                return kDefaultLoopLimit;
            return loop;
        },
        set: function(value) {
            if (value <= 0 && value != -1)
                privateScriptController.throwException(privateScriptController.DOMException.IndexSizeError, "The provided value (" + value + ") is neither positive nor -1.");
            this.setAttribute('loop', value);
        },
    });

    HTMLMarqueeElementPrototype.getGetMetrics_ = function() {
        var direction = this.direction.toLowerCase();
        if (direction === 'up' || direction === 'down')
            this.mover_.style.height = '-webkit-max-content';
        else
            this.mover_.style.width = '-webkit-max-content';

        var moverStyle = getComputedStyle(this.mover_);
        var marqueeStyle = getComputedStyle(this);

        var metrics = {};
        metrics.contentWidth = parseInt(moverStyle.width);
        metrics.contentHeight = parseInt(moverStyle.height);
        metrics.marqueeWidth = parseInt(marqueeStyle.width);
        metrics.marqueeHeight = parseInt(marqueeStyle.height);

        if (direction === 'up' || direction === 'down')
            this.mover_.style.height = '';
        else
            this.mover_.style.width = '';
        return metrics;
    };

    HTMLMarqueeElementPrototype.getAnimationParameters_ = function() {
        var metrics = this.getGetMetrics_();

        var totalWidth = metrics.marqueeWidth + metrics.contentWidth;
        var totalHeight = metrics.marqueeHeight + metrics.contentHeight;

        var innerWidth = metrics.marqueeWidth - metrics.contentWidth;
        var innerHeight = metrics.marqueeHeight - metrics.contentHeight;

        var parameters = {};
        var direction = this.direction.toLowerCase();

        switch (this.behavior) {
        case kBehaviorScroll:
        default:
            switch (direction) {
            case kDirectionLeft:
            default:
                parameters.transformBegin = 'translateX(' + metrics.marqueeWidth + 'px)';
                parameters.transformEnd = 'translateX(-' + metrics.contentWidth + 'px)';
                parameters.distance = totalWidth;
                break;
            case kDirectionRight:
                parameters.transformBegin = 'translateX(-' + metrics.contentWidth + 'px)';
                parameters.transformEnd = 'translateX(' + metrics.marqueeWidth + 'px)';
                parameters.distance = totalWidth;
                break;
            case kDirectionUp:
                parameters.transformBegin = 'translateY(' + metrics.marqueeHeight + 'px)';
                parameters.transformEnd = 'translateY(-' + metrics.contentHeight + 'px)';
                parameters.distance = totalHeight;
                break;
            case kDirectionDown:
                parameters.transformBegin = 'translateY(-' + metrics.contentHeight + 'px)';
                parameters.transformEnd = 'translateY(' + metrics.marqueeHeight + 'px)';
                parameters.distance = totalHeight;
                break;
            }
            break;
        case kBehaviorAlternate:
            switch (direction) {
            case kDirectionLeft:
            default:
                parameters.transformBegin = 'translateX(' + (innerWidth >= 0 ? innerWidth : 0) + 'px)';
                parameters.transformEnd = 'translateX(' + (innerWidth >= 0 ? 0 : innerWidth) + 'px)';
                parameters.distance = Math.abs(innerWidth);
                break;
            case kDirectionRight:
                parameters.transformBegin = 'translateX(' + (innerWidth >= 0 ? 0 : innerWidth) + 'px)';
                parameters.transformEnd = 'translateX(' + (innerWidth >= 0 ? innerWidth : 0) + 'px)';
                parameters.distance = Math.abs(innerWidth);
                break;
            case kDirectionUp:
                parameters.transformBegin = 'translateY(' + (innerHeight >= 0 ? innerHeight : 0) + 'px)';
                parameters.transformEnd = 'translateY(' + (innerHeight >= 0 ? 0 : innerHeight) + 'px)';
                parameters.distance = Math.abs(innerHeight);
                break;
            case kDirectionDown:
                parameters.transformBegin = 'translateY(' + (innerHeight >= 0 ? 0 : innerHeight) + 'px)';
                parameters.transformEnd = 'translateY(' + (innerHeight >= 0 ? innerHeight : 0) + 'px)';
                parameters.distance = Math.abs(innerHeight);
                break;
            }

            if (this.loopCount_ % 2) {
                var transform = parameters.transformBegin;
                parameters.transformBegin = parameters.transformEnd;
                parameters.transformEnd = transform;
            }

            break;
        case kBehaviorSlide:
            switch (direction) {
            case kDirectionLeft:
            default:
                parameters.transformBegin = 'translateX(' + metrics.marqueeWidth + 'px)';
                parameters.transformEnd = 'translateX(0)';
                parameters.distance = metrics.marqueeWidth;
                break;
            case kDirectionRight:
                parameters.transformBegin = 'translateX(-' + metrics.contentWidth + 'px)';
                parameters.transformEnd = 'translateX(' + innerWidth + 'px)';
                parameters.distance = metrics.marqueeWidth;
                break;
            case kDirectionUp:
                parameters.transformBegin = 'translateY(' + metrics.marqueeHeight + 'px)';
                parameters.transformEnd = 'translateY(0)';
                parameters.distance = metrics.marqueeHeight;
                break;
            case kDirectionDown:
                parameters.transformBegin = 'translateY(-' + metrics.contentHeight + 'px)';
                parameters.transformEnd = 'translateY(' + innerHeight + 'px)';
                parameters.distance = metrics.marqueeHeight;
                break;
            }
            break;
        }

        return parameters
    };

    function animationFinished_(event) {
        var player = event.target;
        var marquee = player.marquee_;
        marquee.loopCount_++;
        marquee.start();
    };

    HTMLMarqueeElementPrototype.shouldContinue_ = function() {
        var loop = this.loop;

        // By default, slide loops only once.
        if (loop <= 0 && this.behavior === kBehaviorSlide)
            loop = 1;

        if (loop <= 0)
            return true;
        return this.loopCount_ < loop;
    };

    HTMLMarqueeElementPrototype.continue_ = function() {
        if (!this.shouldContinue_()) {
            return;
        }

        if (this.player_ && this.player_.playState === 'paused') {
            this.player_.play();
            return;
        }

        var parameters = this.getAnimationParameters_();
        var scrollDelay = this.scrollDelay;
        if (scrollDelay < kMinimumScrollDelayMS && !this.trueSpeed)
            scrollDelay = kDefaultScrollDelayMS;
        var duration = 0;
        if (this.scrollAmount && !isNaN(parameters.distance))
            duration = parameters.distance * scrollDelay / this.scrollAmount;
        var player = this.mover_.animate([
            { transform: parameters.transformBegin },
            { transform: parameters.transformEnd },
        ], {
            duration,
            fill: 'forwards',
        });
        player.marquee_ = this;
        player.onfinish = animationFinished_;

        this.player_ = player;
    };

    HTMLMarqueeElementPrototype.start = function() {
        if (this.continueCallback_)
            return;
        this.continueCallback_ = requestAnimationFrame(function() {
            this.continueCallback_ = null;
            this.continue_();
        }.bind(this));
    };

    HTMLMarqueeElementPrototype.stop = function() {
        if (this.continueCallback_) {
            cancelAnimationFrame(this.continueCallback_);
            this.continueCallback_ = null;
            return;
        }

        if (this.player_) {
            this.player_.pause();
        }
    };
});
// Copyright 2014 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

"use strict";

function PrivateScriptController()
{
    this._installedClasses = {};
    this._DOMException = {};
    this._JSError = {};
    // This list must be in sync with the enum in ExceptionCode.h. The order matters.
    var domExceptions = [
        "IndexSizeError",
        "HierarchyRequestError",
        "WrongDocumentError",
        "InvalidCharacterError",
        "NoModificationAllowedError",
        "NotFoundError",
        "NotSupportedError",
        "InUseAttributeError", // Historical. Only used in setAttributeNode etc which have been removed from the DOM specs.

        // Introduced in DOM Level 2:
        "InvalidStateError",
        "SyntaxError",
        "InvalidModificationError",
        "NamespaceError",
        "InvalidAccessError",

        // Introduced in DOM Level 3:
        "TypeMismatchError", // Historical; use TypeError instead

        // XMLHttpRequest extension:
        "SecurityError",

        // Others introduced in HTML5:
        "NetworkError",
        "AbortError",
        "URLMismatchError",
        "QuotaExceededError",
        "TimeoutError",
        "InvalidNodeTypeError",
        "DataCloneError",

        // These are IDB-specific.
        "UnknownError",
        "ConstraintError",
        "DataError",
        "TransactionInactiveError",
        "ReadOnlyError",
        "VersionError",

        // File system
        "NotReadableError",
        "EncodingError",
        "PathExistsError",

        // SQL
        "SQLDatabaseError", // Naming conflict with DatabaseError class.

        // Web Crypto
        "OperationError",

        // Push API
        "PermissionDeniedError",

        // Pointer Events
        "InvalidPointerId",
    ];

    // This list must be in sync with the enum in ExceptionCode.h. The order matters.
    var jsErrors = [
        "Error",
        "TypeError",
        "RangeError",
        "SyntaxError",
        "ReferenceError",
    ];

    var code = 1;
    domExceptions.forEach(function (exception) {
        this._DOMException[exception] = code;
        ++code;
    }.bind(this));

    var code = 1000;
    jsErrors.forEach(function (exception) {
        this._JSError[exception] = code;
        ++code;
    }.bind(this));
}

PrivateScriptController.prototype = {
    get installedClasses()
    {
        return this._installedClasses;
    },

    get DOMException()
    {
        return this._DOMException;
    },

    get JSError()
    {
        return this._JSError;
    },

    installClass: function(className, implementation)
    {
        function PrivateScriptClass()
        {
        }

        if (!(className in this._installedClasses))
            this._installedClasses[className] = new PrivateScriptClass();
        implementation(this._installedClasses[className]);
    },

    // Private scripts can throw JS errors and DOM exceptions as follows:
    //     throwException(privateScriptController.DOMException.IndexSizeError, "...");
    //     throwException(privateScriptController.JSError.TypeError, "...");
    //
    // Note that normal JS errors thrown by private scripts are treated
    // as real JS errors caused by programming mistake and the execution crashes.
    // If you want to intentially throw JS errors from private scripts,
    // you need to use throwException(privateScriptController.JSError.TypeError, "...").
    throwException: function(code, message)
    {
        function PrivateScriptException()
        {
        }

        var exception = new PrivateScriptException();
        exception.code = code;
        exception.message = message;
        exception.name = "PrivateScriptException";
        throw exception;
    },
}

if (!window.hasOwnProperty("privateScriptController"))
    window.privateScriptController = new PrivateScriptController();

// This line must be the last statement of this JS file.
// A parenthesis is needed, because the caller of this script (PrivateScriptRunner.cpp)
// is depending on the completion value of this script.
(privateScriptController.installedClasses);
"use strict";
/*
 * Copyright (C) 2012 Google Inc. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
 * DAMAGE.
 */

/**
 * @param {!string} id
 */
function $(id) {
    return document.getElementById(id);
}

/**
 * @param {!string} tagName
 * @param {string=} opt_class
 * @param {string=} opt_text
 * @return {!Element}
 */
function createElement(tagName, opt_class, opt_text) {
    var element = document.createElement(tagName);
    if (opt_class)
        element.setAttribute("class", opt_class);
    if (opt_text)
        element.appendChild(document.createTextNode(opt_text));
    return element;
}

/**
 * @constructor
 * @param {!number|Rectangle|Object} xOrRect
 * @param {!number} y
 * @param {!number} width
 * @param {!number} height
 */
function Rectangle(xOrRect, y, width, height) {
    if (typeof xOrRect === "object") {
        y = xOrRect.y;
        width = xOrRect.width;
        height = xOrRect.height;
        xOrRect = xOrRect.x;
    }
    this.x = xOrRect;
    this.y = y;
    this.width = width;
    this.height = height;
}

Rectangle.prototype = {
    get maxX() { return this.x + this.width; },
    get maxY() { return this.y + this.height; },
    toString: function() { return "Rectangle(" + this.x + "," + this.y + "," + this.width + "," + this.height + ")"; }
};

/**
 * @param {!Rectangle} rect1
 * @param {!Rectangle} rect2
 * @return {?Rectangle}
 */
Rectangle.intersection = function(rect1, rect2) {
    var x = Math.max(rect1.x, rect2.x);
    var maxX = Math.min(rect1.maxX, rect2.maxX);
    var y = Math.max(rect1.y, rect2.y);
    var maxY = Math.min(rect1.maxY, rect2.maxY);
    var width = maxX - x;
    var height = maxY - y;
    if (width < 0 || height < 0)
        return null;
    return new Rectangle(x, y, width, height);
};

/**
 * @param {!number} width in CSS pixel
 * @param {!number} height in CSS pixel
 */
function resizeWindow(width, height) {
    var zoom = global.params.zoomFactor ? global.params.zoomFactor : 1;
    setWindowRect(adjustWindowRect(width * zoom, height * zoom, width * zoom, height * zoom));
}

/**
 * @param {!number} width in physical pixel
 * @param {!number} height in physical pixel
 * @param {?number} minWidth in physical pixel
 * @param {?number} minHeight in physical pixel
 * @return {!Rectangle} Adjusted rectangle with physical pixels
 */
function adjustWindowRect(width, height, minWidth, minHeight) {
    if (typeof minWidth !== "number")
        minWidth = 0;
    if (typeof minHeight !== "number")
        minHeight = 0;

    var windowRect = new Rectangle(0, 0, Math.ceil(width), Math.ceil(height));

    if (!global.params.anchorRectInScreen)
        return windowRect;

    var anchorRect = new Rectangle(global.params.anchorRectInScreen);
    var availRect = new Rectangle(window.screen.availLeft, window.screen.availTop, window.screen.availWidth, window.screen.availHeight);

    _adjustWindowRectVertically(windowRect, availRect, anchorRect, minHeight);
    _adjustWindowRectHorizontally(windowRect, availRect, anchorRect, minWidth);

    return windowRect;
}

/**
 * Arguments are physical pixels.
 */
function _adjustWindowRectVertically(windowRect, availRect, anchorRect, minHeight) {
    var availableSpaceAbove = anchorRect.y - availRect.y;
    availableSpaceAbove = Math.max(0, Math.min(availRect.height, availableSpaceAbove));

    var availableSpaceBelow = availRect.maxY - anchorRect.maxY;
    availableSpaceBelow = Math.max(0, Math.min(availRect.height, availableSpaceBelow));
    if (windowRect.height > availableSpaceBelow && availableSpaceBelow < availableSpaceAbove) {
        windowRect.height = Math.min(windowRect.height, availableSpaceAbove);
        windowRect.height = Math.max(windowRect.height, minHeight);
        windowRect.y = anchorRect.y - windowRect.height;
    } else {
        windowRect.height = Math.min(windowRect.height, availableSpaceBelow);
        windowRect.height = Math.max(windowRect.height, minHeight);
        windowRect.y = anchorRect.maxY;
    }
}

/**
 * Arguments are physical pixels.
 */
function _adjustWindowRectHorizontally(windowRect, availRect, anchorRect, minWidth) {
    windowRect.width = Math.min(windowRect.width, availRect.width);
    windowRect.width = Math.max(windowRect.width, minWidth);
    windowRect.x = anchorRect.x;
    // If we are getting clipped, we want to switch alignment to the right side
    // of the anchor rect as long as doing so will make the popup not clipped.
    var rightAlignedX = windowRect.x + anchorRect.width - windowRect.width;
    if (rightAlignedX >= availRect.x && (windowRect.maxX > availRect.maxX || global.params.isRTL))
        windowRect.x = rightAlignedX;
}

/**
 * @param {!Rectangle} rect Window position and size with physical pixels.
 */
function setWindowRect(rect) {
    if (window.frameElement) {
        window.frameElement.style.width = rect.width + "px";
        window.frameElement.style.height = rect.height + "px";
    } else {
        window.pagePopupController.setWindowRect(rect.x, rect.y, rect.width, rect.height);
    }
}

function hideWindow() {
    setWindowRect(adjustWindowRect(1, 1, 1, 1));
}

/**
 * @return {!boolean}
 */
function isWindowHidden() {
    // window.innerWidth and innerHeight are zoom-adjusted values.  If we call
    // setWindowRect with width=100 and the zoom-level is 2.0, innerWidth will
    // return 50.
    return window.innerWidth <= 1 && window.innerHeight <= 1;
}

window.addEventListener("resize", function() {
    if (isWindowHidden())
        window.dispatchEvent(new CustomEvent("didHide"));
    else
        window.dispatchEvent(new CustomEvent("didOpenPicker"));
}, false);

/**
 * @return {!number}
 */
function getScrollbarWidth() {
    if (typeof window.scrollbarWidth === "undefined") {
        var scrollDiv = document.createElement("div");
        scrollDiv.style.opacity = "0";
        scrollDiv.style.overflow = "scroll";
        scrollDiv.style.width = "50px";
        scrollDiv.style.height = "50px";
        document.body.appendChild(scrollDiv);
        window.scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;
        scrollDiv.parentNode.removeChild(scrollDiv);
    }
    return window.scrollbarWidth;
}

/**
 * @param {!string} className
 * @return {?Element}
 */
function enclosingNodeOrSelfWithClass(selfNode, className)
{
    for (var node = selfNode; node && node !== selfNode.ownerDocument; node = node.parentNode) {
        if (node.nodeType === Node.ELEMENT_NODE && node.classList.contains(className))
            return node;
    }
    return null;
}

/**
 * @constructor
 */
function EventEmitter() {
};

/**
 * @param {!string} type
 * @param {!function({...*})} callback
 */
EventEmitter.prototype.on = function(type, callback) {
    console.assert(callback instanceof Function);
    if (!this._callbacks)
        this._callbacks = {};
    if (!this._callbacks[type])
        this._callbacks[type] = [];
    this._callbacks[type].push(callback);
};

EventEmitter.prototype.hasListener = function(type) {
    if (!this._callbacks)
        return false;
    var callbacksForType = this._callbacks[type];
    if (!callbacksForType)
        return false;
    return callbacksForType.length > 0;
};

/**
 * @param {!string} type
 * @param {!function(Object)} callback
 */
EventEmitter.prototype.removeListener = function(type, callback) {
    if (!this._callbacks)
        return;
    var callbacksForType = this._callbacks[type];
    if (!callbacksForType)
        return;
    callbacksForType.splice(callbacksForType.indexOf(callback), 1);
    if (callbacksForType.length === 0)
        delete this._callbacks[type];
};

/**
 * @param {!string} type
 * @param {...*} var_args
 */
EventEmitter.prototype.dispatchEvent = function(type) {
    if (!this._callbacks)
        return;
    var callbacksForType = this._callbacks[type];
    if (!callbacksForType)
        return;
    callbacksForType = callbacksForType.slice(0);
    for (var i = 0; i < callbacksForType.length; ++i) {
        callbacksForType[i].apply(this, Array.prototype.slice.call(arguments, 1));
    }
};

/**
 * @constructor
 * @extends EventEmitter
 * @param {!Element} element
 * @param {!Object} config
 */
function Picker(element, config) {
    this._element = element;
    this._config = config;
}

Picker.prototype = Object.create(EventEmitter.prototype);

/**
 * @enum {number}
 */
Picker.Actions = {
    SetValue: 0,
    Cancel: -1,
    ChooseOtherColor: -2
};

/**
 * @param {!string} value
 */
Picker.prototype.submitValue = function(value) {
    window.pagePopupController.setValue(value);
    window.pagePopupController.closePopup();
};

Picker.prototype.handleCancel = function() {
    window.pagePopupController.closePopup();
};

Picker.prototype.chooseOtherColor = function() {
    window.pagePopupController.setValueAndClosePopup(Picker.Actions.ChooseOtherColor, "");
};

Picker.prototype.cleanup = function() {};

window.addEventListener("keyup", function(event) {
    // JAWS dispatches extra Alt events and unless we handle them they move the
    // focus and close the popup.
    if (event.key === "Alt")
        event.preventDefault();
}, true);
/*
 * Copyright (C) 2012 Google Inc. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY APPLE INC. AND ITS CONTRIBUTORS ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL APPLE INC. OR ITS CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
 * DAMAGE.
 */

body {
    -webkit-user-select: none;
    background-color: white;
    font: -webkit-small-control;
    margin: 0;
    overflow: hidden;
}

.rtl {
    direction: rtl;
}
/*
 * Copyright (C) 2012 Google Inc. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

body {
    -webkit-user-select: none;
    background-color: white;
    font: -webkit-control;
    font-size: 12px;
}

.rtl {
    direction: rtl;
}

.scroll-view {
    overflow: hidden;
    width: 0;
    height: 0;
}

.list-cell {
    position: absolute;
    left: 0;
    top: 0;
    width: 0;
    height: 0;
}

.list-cell.hidden {
    display: none;
}

.week-number-cell,
.day-cell {
    position: static;
    text-align: center;
    box-sizing: border-box;
    display: inline-block;
    cursor: default;
    transition: color 1s;
    padding: 1px;
}

.week-number-cell {
    box-sizing: border-box;
    color: black;
    padding-right: 0;
    box-shadow: 1px 0 0 #bfbfbf;
    margin-right: 1px;
}

.day-cell {
    color: #bfbfbf;
}

.day-cell.highlighted.today,
.day-cell.today {
    border: 1px solid #bfbfbf;
    padding: 0;
}

.week-number-cell.highlighted,
.day-cell.highlighted {
    background-color: #e5ecf8;
}

.week-number-cell.highlighted.disabled,
.day-cell.highlighted.disabled {
    border: 1px solid #e5ecf8;
    padding: 0;
}

.week-number-cell.selected,
.day-cell.selected {
    background-color: #bccdec;
}

.week-number-cell.disabled,
.day-cell.disabled {
    background-color: #f5f5f5;
}

.day-cell.current-month {
    color: #000000;
}

.calendar-table-view {
    border: 1px solid #bfbfbf;
    outline: none;
}

.week-number-label,
.week-day-label {
    text-align: center;
    display: inline-block;
    line-height: 23px;
    padding-top: 1px;
    box-sizing: padding-box;
}

.week-number-label {
    box-sizing: border-box;
    border-right: 1px solid #bfbfbf;
}

.calendar-table-header-view {
    background-color: #f5f5f5;
    border-bottom: 1px solid #bfbfbf;
    height: 24px;
}

.calendar-picker {
    border: 1px solid #bfbfbf;
    border-radius: 2px;
    position: absolute;
    padding: 10px;
    background-color: white;
    overflow: hidden;
    cursor: default;
}

.calendar-header-view {
    margin-bottom: 10px;
    display: flex;
    flex-flow: row;
}

.calendar-title {
    -webkit-align-self: center;
    flex: 1;
    text-align: left;
}

.rtl .calendar-title {
    text-align: right;
}

.month-popup-button,
.month-popup-button:hover,
.month-popup-button:disabled {
    background-color: transparent !important;
    background-image: none !important;
    box-shadow: none !important;
    color: black;
}

.month-popup-button:disabled {
    opacity: 0.7;
}

.month-popup-button {
    font-size: 12px;
    padding: 4px;
    display: inline-block;
    cursor: default;
    border: 1px solid transparent !important;
    height: 24px !important;
}

.month-popup-button .disclosure-triangle {
    margin: 0 6px;
}

.month-popup-button .disclosure-triangle svg {
    padding-bottom: 2px;
}

.today-button::after {
    content: "";
    display: block;
    border-radius: 3px;
    width: 6px;
    height: 6px;
    background-color: #6e6e6e;
    margin: 0 auto;
}

.calendar-navigation-button {
    -webkit-align-self: center;
    width: 24px;
    height: 24px;
    min-width: 0 !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    -webkit-margin-start: 4px !important;
}

.year-list-view {
    border: 1px solid #bfbfbf;
    background-color: white;
    position: absolute;
}

.year-list-cell {
    box-sizing: border-box;
    border-bottom: 1px solid #bfbfbf;
    background-color: white;
    overflow: hidden;
}

.year-list-cell .label {
    height: 24px;
    line-height: 24px;
    -webkit-padding-start: 8px;
    background-color: #f5f5f5;
    border-bottom: 1px solid #bfbfbf;
}

.year-list-cell .month-chooser {
    padding: 0;
}

.month-buttons-row {
    display: flex;
}

.month-button {
    flex: 1;
    height: 32px;
    line-height: 32px;
    padding: 0 !important;
    margin: 0 !important;
    background-image: none !important;
    background-color: #ffffff;
    border-width: 0 !important;
    box-shadow: none !important;
    text-align: center;
}

.month-button.highlighted {
    background-color: #e5ecf8;
}

.month-button[aria-disabled="true"] {
    color: GrayText;
}

.scrubby-scroll-bar {
    width: 14px;
    height: 60px;
    background-color: white;
    border-left: 1px solid #bfbfbf;
    position: absolute;
    top: 0;
}

.scrubby-scroll-thumb {
    width: 10px;
    margin: 2px;
    height: 30px;
    background-color: #d8d8d8;
    position: absolute;
    left: 0;
    top: 0;
}

.month-popup-view {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}

.year-list-view .scrubby-scroll-bar {
    right: 0;
}

.rtl .year-list-view .scrubby-scroll-bar {
    left: 0;
    right: auto;
    border-left-width: 0;
    border-right: 1px solid #bfbfbf;
}

.year-month-button {
    width: 24px;
    height: 24px;
    min-width: 0;
    padding: 0;
}

.month-popup-button:focus,
.year-list-view:focus,
.calendar-table-view:focus {
    transition: border-color 200ms;
    /* We use border color because it follows the border radius (unlike outline).
    * This is particularly noticeable on mac. */
    border-color: rgb(77, 144, 254) !important;
    outline: none;
}

.preparing button:focus,
.preparing .year-list-view:focus,
.preparing .calendar-table-view:focus {
    transition: none;
}
"use strict";
/*
 * Copyright (C) 2012 Google Inc. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */


/**
 * @enum {number}
 */
var WeekDay = {
    Sunday: 0,
    Monday: 1,
    Tuesday: 2,
    Wednesday: 3,
    Thursday: 4,
    Friday: 5,
    Saturday: 6
};

/**
 * @type {Object}
 */
var global = {
    picker: null,
    params: {
        locale: "en-US",
        weekStartDay: WeekDay.Sunday,
        dayLabels: ["S", "M", "T", "W", "T", "F", "S"],
        shortMonthLabels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sept", "Oct", "Nov", "Dec"],
        isLocaleRTL: false,
        mode: "date",
        weekLabel: "Week",
        anchorRectInScreen: new Rectangle(0, 0, 0, 0),
        currentValue: null
    }
};

// ----------------------------------------------------------------
// Utility functions

/**
 * @return {!boolean}
 */
function hasInaccuratePointingDevice() {
    return matchMedia("(pointer: coarse)").matches;
}

/**
 * @return {!string} lowercase locale name. e.g. "en-us"
 */
function getLocale() {
    return (global.params.locale || "en-us").toLowerCase();
}

/**
 * @return {!string} lowercase language code. e.g. "en"
 */
function getLanguage() {
    var locale = getLocale();
    var result = locale.match(/^([a-z]+)/);
    if (!result)
        return "en";
    return result[1];
}

/**
 * @param {!number} number
 * @return {!string}
 */
function localizeNumber(number) {
    return window.pagePopupController.localizeNumberString(number);
}

/**
 * @const
 * @type {number}
 */
var ImperialEraLimit = 2087;

/**
 * @param {!number} year
 * @param {!number} month
 * @return {!string}
 */
function formatJapaneseImperialEra(year, month) {
    // We don't show an imperial era if it is greater than 99 becase of space
    // limitation.
    if (year > ImperialEraLimit)
        return "";
    if (year > 1989)
        return "(\u5e73\u6210" + localizeNumber(year - 1988) + "\u5e74)";
    if (year == 1989)
        return "(\u5e73\u6210\u5143\u5e74)";
    if (year >= 1927)
        return "(\u662d\u548c" + localizeNumber(year - 1925) + "\u5e74)";
    if (year > 1912)
        return "(\u5927\u6b63" + localizeNumber(year - 1911) + "\u5e74)";
    if (year == 1912 && month >= 7)
        return "(\u5927\u6b63\u5143\u5e74)";
    if (year > 1868)
        return "(\u660e\u6cbb" + localizeNumber(year - 1867) + "\u5e74)";
    if (year == 1868)
        return "(\u660e\u6cbb\u5143\u5e74)";
    return "";
}

function createUTCDate(year, month, date) {
    var newDate = new Date(0);
    newDate.setUTCFullYear(year);
    newDate.setUTCMonth(month);
    newDate.setUTCDate(date);
    return newDate;
}

/**
 * @param {string} dateString
 * @return {?Day|Week|Month}
 */
function parseDateString(dateString) {
    var month = Month.parse(dateString);
    if (month)
        return month;
    var week = Week.parse(dateString);
    if (week)
        return week;
    return Day.parse(dateString);
}

/**
 * @const
 * @type {number}
 */
var DaysPerWeek = 7;

/**
 * @const
 * @type {number}
 */
var MonthsPerYear = 12;

/**
 * @const
 * @type {number}
 */
var MillisecondsPerDay = 24 * 60 * 60 * 1000;

/**
 * @const
 * @type {number}
 */
var MillisecondsPerWeek = DaysPerWeek * MillisecondsPerDay;

/**
 * @constructor
 */
function DateType() {
}

/**
 * @constructor
 * @extends DateType
 * @param {!number} year
 * @param {!number} month
 * @param {!number} date
 */
function Day(year, month, date) {
    var dateObject = createUTCDate(year, month, date);
    if (isNaN(dateObject.valueOf()))
        throw "Invalid date";
    /**
     * @type {number}
     * @const
     */
    this.year = dateObject.getUTCFullYear();   
     /**
     * @type {number}
     * @const
     */  
    this.month = dateObject.getUTCMonth();
    /**
     * @type {number}
     * @const
     */
    this.date = dateObject.getUTCDate();
};

Day.prototype = Object.create(DateType.prototype);

Day.ISOStringRegExp = /^(\d+)-(\d+)-(\d+)/;

/**
 * @param {!string} str
 * @return {?Day}
 */
Day.parse = function(str) {
    var match = Day.ISOStringRegExp.exec(str);
    if (!match)
        return null;
    var year = parseInt(match[1], 10);
    var month = parseInt(match[2], 10) - 1;
    var date = parseInt(match[3], 10);
    return new Day(year, month, date);
};

/**
 * @param {!number} value
 * @return {!Day}
 */
Day.createFromValue = function(millisecondsSinceEpoch) {
    return Day.createFromDate(new Date(millisecondsSinceEpoch))
};

/**
 * @param {!Date} date
 * @return {!Day}
 */
Day.createFromDate = function(date) {
    if (isNaN(date.valueOf()))
        throw "Invalid date";
    return new Day(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate());
};

/**
 * @param {!Day} day
 * @return {!Day}
 */
Day.createFromDay = function(day) {
    return day;
};

/**
 * @return {!Day}
 */
Day.createFromToday = function() {
    var now = new Date();
    return new Day(now.getFullYear(), now.getMonth(), now.getDate());
};

/**
 * @param {!DateType} other
 * @return {!boolean}
 */
Day.prototype.equals = function(other) {
    return other instanceof Day && this.year === other.year && this.month === other.month && this.date === other.date;
};

/**
 * @param {!number=} offset
 * @return {!Day}
 */
Day.prototype.previous = function(offset) {
    if (typeof offset === "undefined")
        offset = 1;
    return new Day(this.year, this.month, this.date - offset);
};

/**
 * @param {!number=} offset
 * @return {!Day}
 */
Day.prototype.next = function(offset) {
 if (typeof offset === "undefined")
     offset = 1;
    return new Day(this.year, this.month, this.date + offset);
};

/**
 * @return {!Date}
 */
Day.prototype.startDate = function() {
    return createUTCDate(this.year, this.month, this.date);
};

/**
 * @return {!Date}
 */
Day.prototype.endDate = function() {
    return createUTCDate(this.year, this.month, this.date + 1);
};

/**
 * @return {!Day}
 */
Day.prototype.firstDay = function() {
    return this;
};

/**
 * @return {!Day}
 */
Day.prototype.middleDay = function() {
    return this;
};

/**
 * @return {!Day}
 */
Day.prototype.lastDay = function() {
    return this;
};

/**
 * @return {!number}
 */
Day.prototype.valueOf = function() {
    return createUTCDate(this.year, this.month, this.date).getTime();
};

/**
 * @return {!WeekDay}
 */
Day.prototype.weekDay = function() {
    return createUTCDate(this.year, this.month, this.date).getUTCDay();
};

/**
 * @return {!string}
 */
Day.prototype.toString = function() {
    var yearString = String(this.year);
    if (yearString.length < 4)
        yearString = ("000" + yearString).substr(-4, 4);
    return yearString + "-" + ("0" + (this.month + 1)).substr(-2, 2) + "-" + ("0" + this.date).substr(-2, 2);
};

/**
 * @return {!string}
 */
Day.prototype.format = function() {
    if (!Day.formatter) {
        Day.formatter = new Intl.DateTimeFormat(getLocale(), {
            weekday: "long", year: "numeric", month: "long", day: "numeric", timeZone: "UTC"
        });
    }
    return Day.formatter.format(this.startDate());
};

// See WebCore/platform/DateComponents.h.
Day.Minimum = Day.createFromValue(-62135596800000.0);
Day.Maximum = Day.createFromValue(8640000000000000.0);

// See WebCore/html/DayInputType.cpp.
Day.DefaultStep = 86400000;
Day.DefaultStepBase = 0;

/**
 * @constructor
 * @extends DateType
 * @param {!number} year
 * @param {!number} week
 */
function Week(year, week) { 
    /**
     * @type {number}
     * @const
     */
    this.year = year;
    /**
     * @type {number}
     * @const
     */
    this.week = week;
    // Number of years per year is either 52 or 53.
    if (this.week < 1 || (this.week > 52 && this.week > Week.numberOfWeeksInYear(this.year))) {
        var normalizedWeek = Week.createFromDay(this.firstDay());
        this.year = normalizedWeek.year;
        this.week = normalizedWeek.week;
    }
}

Week.ISOStringRegExp = /^(\d+)-[wW](\d+)$/;

// See WebCore/platform/DateComponents.h.
Week.Minimum = new Week(1, 1);
Week.Maximum = new Week(275760, 37);

// See WebCore/html/WeekInputType.cpp.
Week.DefaultStep = 604800000;
Week.DefaultStepBase = -259200000;

Week.EpochWeekDay = createUTCDate(1970, 0, 0).getUTCDay();

/**
 * @param {!string} str
 * @return {?Week}
 */
Week.parse = function(str) {
    var match = Week.ISOStringRegExp.exec(str);
    if (!match)
        return null;
    var year = parseInt(match[1], 10);
    var week = parseInt(match[2], 10);
    return new Week(year, week);
};

/**
 * @param {!number} millisecondsSinceEpoch
 * @return {!Week}
 */
Week.createFromValue = function(millisecondsSinceEpoch) {
    return Week.createFromDate(new Date(millisecondsSinceEpoch))
};

/**
 * @param {!Date} date
 * @return {!Week}
 */
Week.createFromDate = function(date) {
    if (isNaN(date.valueOf()))
        throw "Invalid date";
    var year = date.getUTCFullYear();
    if (year <= Week.Maximum.year && Week.weekOneStartDateForYear(year + 1).getTime() <= date.getTime())
        year++;
    else if (year > 1 && Week.weekOneStartDateForYear(year).getTime() > date.getTime())
        year--;
    var week = 1 + Week._numberOfWeeksSinceDate(Week.weekOneStartDateForYear(year), date);
    return new Week(year, week);
};

/**
 * @param {!Day} day
 * @return {!Week}
 */
Week.createFromDay = function(day) {
    var year = day.year;
    if (year <= Week.Maximum.year && Week.weekOneStartDayForYear(year + 1) <= day)
        year++;
    else if (year > 1 && Week.weekOneStartDayForYear(year) > day)
        year--;
    var week = Math.floor(1 + (day.valueOf() - Week.weekOneStartDayForYear(year).valueOf()) / MillisecondsPerWeek);
    return new Week(year, week);
};

/**
 * @return {!Week}
 */
Week.createFromToday = function() {
    var now = new Date();
    return Week.createFromDate(createUTCDate(now.getFullYear(), now.getMonth(), now.getDate()));
};

/**
 * @param {!number} year
 * @return {!Date}
 */
Week.weekOneStartDateForYear = function(year) {
    if (year < 1)
        return createUTCDate(1, 0, 1);
    // The week containing January 4th is week one.
    var yearStartDay = createUTCDate(year, 0, 4).getUTCDay();
    return createUTCDate(year, 0, 4 - (yearStartDay + 6) % DaysPerWeek);
};

/**
 * @param {!number} year
 * @return {!Day}
 */
Week.weekOneStartDayForYear = function(year) {
    if (year < 1)
        return Day.Minimum;
    // The week containing January 4th is week one.
    var yearStartDay = createUTCDate(year, 0, 4).getUTCDay();
    return new Day(year, 0, 4 - (yearStartDay + 6) % DaysPerWeek);
};

/**
 * @param {!number} year
 * @return {!number}
 */
Week.numberOfWeeksInYear = function(year) {
    if (year < 1 || year > Week.Maximum.year)
        return 0;
    else if (year === Week.Maximum.year)
        return Week.Maximum.week;
    return Week._numberOfWeeksSinceDate(Week.weekOneStartDateForYear(year), Week.weekOneStartDateForYear(year + 1));
};

/**
 * @param {!Date} baseDate
 * @param {!Date} date
 * @return {!number}
 */
Week._numberOfWeeksSinceDate = function(baseDate, date) {
    return Math.floor((date.getTime() - baseDate.getTime()) / MillisecondsPerWeek);
};

/**
 * @param {!DateType} other
 * @return {!boolean}
 */
Week.prototype.equals = function(other) {
    return other instanceof Week && this.year === other.year && this.week === other.week;
};

/**
 * @param {!number=} offset
 * @return {!Week}
 */
Week.prototype.previous = function(offset) {
    if (typeof offset === "undefined")
        offset = 1;
    return new Week(this.year, this.week - offset);
};

/**
 * @param {!number=} offset
 * @return {!Week}
 */
Week.prototype.next = function(offset) {
    if (typeof offset === "undefined")
        offset = 1;
    return new Week(this.year, this.week + offset);
};

/**
 * @return {!Date}
 */
Week.prototype.startDate = function() {
    var weekStartDate = Week.weekOneStartDateForYear(this.year);
    weekStartDate.setUTCDate(weekStartDate.getUTCDate() + (this.week - 1) * 7);
    return weekStartDate;
};

/**
 * @return {!Date}
 */
Week.prototype.endDate = function() {
    if (this.equals(Week.Maximum))
        return Day.Maximum.startDate();
    return this.next().startDate();
};

/**
 * @return {!Day}
 */
Week.prototype.firstDay = function() {
    var weekOneStartDay = Week.weekOneStartDayForYear(this.year);
    return weekOneStartDay.next((this.week - 1) * DaysPerWeek);
};

/**
 * @return {!Day}
 */
Week.prototype.middleDay = function() {
    return this.firstDay().next(3);
};

/**
 * @return {!Day}
 */
Week.prototype.lastDay = function() {
    if (this.equals(Week.Maximum))
        return Day.Maximum;
    return this.next().firstDay().previous();
};

/**
 * @return {!number}
 */
Week.prototype.valueOf = function() {
    return this.firstDay().valueOf() - createUTCDate(1970, 0, 1).getTime();
};

/**
 * @return {!string}
 */
Week.prototype.toString = function() {
    var yearString = String(this.year);
    if (yearString.length < 4)
        yearString = ("000" + yearString).substr(-4, 4);
    return yearString + "-W" + ("0" + this.week).substr(-2, 2);
};

/**
 * @constructor
 * @extends DateType
 * @param {!number} year
 * @param {!number} month
 */
function Month(year, month) { 
    /**
     * @type {number}
     * @const
     */
    this.year = year + Math.floor(month / MonthsPerYear);
    /**
     * @type {number}
     * @const
     */
    this.month = month % MonthsPerYear < 0 ? month % MonthsPerYear + MonthsPerYear : month % MonthsPerYear;
};

Month.ISOStringRegExp = /^(\d+)-(\d+)$/;

// See WebCore/platform/DateComponents.h.
Month.Minimum = new Month(1, 0);
Month.Maximum = new Month(275760, 8);

// See WebCore/html/MonthInputType.cpp.
Month.DefaultStep = 1;
Month.DefaultStepBase = 0;

/**
 * @param {!string} str
 * @return {?Month}
 */
Month.parse = function(str) {
    var match = Month.ISOStringRegExp.exec(str);
    if (!match)
        return null;
    var year = parseInt(match[1], 10);
    var month = parseInt(match[2], 10) - 1;
    return new Month(year, month);
};

/**
 * @param {!number} value
 * @return {!Month}
 */
Month.createFromValue = function(monthsSinceEpoch) {
    return new Month(1970, monthsSinceEpoch)
};

/**
 * @param {!Date} date
 * @return {!Month}
 */
Month.createFromDate = function(date) {
    if (isNaN(date.valueOf()))
        throw "Invalid date";
    return new Month(date.getUTCFullYear(), date.getUTCMonth());
};

/**
 * @param {!Day} day
 * @return {!Month}
 */
Month.createFromDay = function(day) {
    return new Month(day.year, day.month);
};

/**
 * @return {!Month}
 */
Month.createFromToday = function() {
    var now = new Date();
    return new Month(now.getFullYear(), now.getMonth());
};

/**
 * @return {!boolean}
 */
Month.prototype.containsDay = function(day) {
    return this.year === day.year && this.month === day.month;
};

/**
 * @param {!Month} other
 * @return {!boolean}
 */
Month.prototype.equals = function(other) {
    return other instanceof Month && this.year === other.year && this.month === other.month;
};

/**
 * @param {!number=} offset
 * @return {!Month}
 */
Month.prototype.previous = function(offset) {
    if (typeof offset === "undefined")
        offset = 1;
    return new Month(this.year, this.month - offset);
};

/**
 * @param {!number=} offset
 * @return {!Month}
 */
Month.prototype.next = function(offset) {
    if (typeof offset === "undefined")
        offset = 1;
    return new Month(this.year, this.month + offset);
};

/**
 * @return {!Date}
 */
Month.prototype.startDate = function() {
    return createUTCDate(this.year, this.month, 1);
};

/**
 * @return {!Date}
 */
Month.prototype.endDate = function() {
    if (this.equals(Month.Maximum))
        return Day.Maximum.startDate();
    return this.next().startDate();
};

/**
 * @return {!Day}
 */
Month.prototype.firstDay = function() {
    return new Day(this.year, this.month, 1);
};

/**
 * @return {!Day}
 */
Month.prototype.middleDay = function() {
    return new Day(this.year, this.month, this.month === 2 ? 14 : 15);
};

/**
 * @return {!Day}
 */
Month.prototype.lastDay = function() {
    if (this.equals(Month.Maximum))
        return Day.Maximum;
    return this.next().firstDay().previous();
};

/**
 * @return {!number}
 */
Month.prototype.valueOf = function() {
    return (this.year - 1970) * MonthsPerYear + this.month;
};

/**
 * @return {!string}
 */
Month.prototype.toString = function() {
    var yearString = String(this.year);
    if (yearString.length < 4)
        yearString = ("000" + yearString).substr(-4, 4);
    return yearString + "-" + ("0" + (this.month + 1)).substr(-2, 2);
};

/**
 * @return {!string}
 */
Month.prototype.toLocaleString = function() {
    if (global.params.locale === "ja")
        return "" + this.year + "\u5e74" + formatJapaneseImperialEra(this.year, this.month) + " " + (this.month + 1) + "\u6708";
    return window.pagePopupController.formatMonth(this.year, this.month);
};

/**
 * @return {!string}
 */
Month.prototype.toShortLocaleString = function() {
    return window.pagePopupController.formatShortMonth(this.year, this.month);
};

// ----------------------------------------------------------------
// Initialization

/**
 * @param {Event} event
 */
function handleMessage(event) {
    if (global.argumentsReceived)
        return;
    global.argumentsReceived = true;
    initialize(JSON.parse(event.data));
}

/**
 * @param {!Object} params
 */
function setGlobalParams(params) {
    var name;
    for (name in global.params) {
        if (typeof params[name] === "undefined")
            console.warn("Missing argument: " + name);
    }
    for (name in params) {
        global.params[name] = params[name];
    }
};

/**
 * @param {!Object} args
 */
function initialize(args) { 
    setGlobalParams(args);
    if (global.params.suggestionValues && global.params.suggestionValues.length)
        openSuggestionPicker();
    else
        openCalendarPicker();
}

function closePicker() {
    if (global.picker)
        global.picker.cleanup();
    var main = $("main");
    main.innerHTML = "";
    main.className = "";
};

function openSuggestionPicker() {
    closePicker();
    global.picker = new SuggestionPicker($("main"), global.params);
};

function openCalendarPicker() {
    closePicker();
    global.picker = new CalendarPicker(global.params.mode, global.params);
    global.picker.attachTo($("main"));
};

// Parameter t should be a number between 0 and 1.
var AnimationTimingFunction = {
    Linear: function(t){
        return t;
    },
    EaseInOut: function(t){
        t *= 2;
        if (t < 1)
            return Math.pow(t, 3) / 2;
        t -= 2;
        return Math.pow(t, 3) / 2 + 1;
    }
};

/**
 * @constructor
 * @extends EventEmitter
 */
function AnimationManager() {
    EventEmitter.call(this);

    this._isRunning = false;
    this._runningAnimatorCount = 0;
    this._runningAnimators = {};
    this._animationFrameCallbackBound = this._animationFrameCallback.bind(this);
}

AnimationManager.prototype = Object.create(EventEmitter.prototype);

AnimationManager.EventTypeAnimationFrameWillFinish = "animationFrameWillFinish";

AnimationManager.prototype._startAnimation = function() {
    if (this._isRunning)
        return;
    this._isRunning = true;
    window.requestAnimationFrame(this._animationFrameCallbackBound);
};

AnimationManager.prototype._stopAnimation = function() {
    if (!this._isRunning)
        return;
    this._isRunning = false;
};

/**
 * @param {!Animator} animator
 */
AnimationManager.prototype.add = function(animator) {
    if (this._runningAnimators[animator.id])
        return;
    this._runningAnimators[animator.id] = animator;
    this._runningAnimatorCount++;
    if (this._needsTimer())
        this._startAnimation();
};

/**
 * @param {!Animator} animator
 */
AnimationManager.prototype.remove = function(animator) {
    if (!this._runningAnimators[animator.id])
        return;
    delete this._runningAnimators[animator.id];
    this._runningAnimatorCount--;
    if (!this._needsTimer())
        this._stopAnimation();
};

AnimationManager.prototype._animationFrameCallback = function(now) {
    if (this._runningAnimatorCount > 0) {
        for (var id in this._runningAnimators) {
            this._runningAnimators[id].onAnimationFrame(now);
        }
    }
    this.dispatchEvent(AnimationManager.EventTypeAnimationFrameWillFinish);
    if (this._isRunning)
        window.requestAnimationFrame(this._animationFrameCallbackBound);
};

/**
 * @return {!boolean}
 */
AnimationManager.prototype._needsTimer = function() {
    return this._runningAnimatorCount > 0 || this.hasListener(AnimationManager.EventTypeAnimationFrameWillFinish);
};

/**
 * @param {!string} type
 * @param {!Function} callback
 * @override
 */
AnimationManager.prototype.on = function(type, callback) {
    EventEmitter.prototype.on.call(this, type, callback);
    if (this._needsTimer())
        this._startAnimation();
};

/**
 * @param {!string} type
 * @param {!Function} callback
 * @override
 */
AnimationManager.prototype.removeListener = function(type, callback) {
    EventEmitter.prototype.removeListener.call(this, type, callback);
    if (!this._needsTimer())
        this._stopAnimation();
};

AnimationManager.shared = new AnimationManager();

/**
 * @constructor
 * @extends EventEmitter
 */
function Animator() {
    EventEmitter.call(this);

    /**
     * @type {!number}
     * @const
     */
    this.id = Animator._lastId++;
    /**
     * @type {!number}
     */
    this.duration = 100;
    /**
     * @type {?function}
     */
    this.step = null;
    /**
     * @type {!boolean}
     * @protected
     */
    this._isRunning = false;
    /**
     * @type {!number}
     */
    this.currentValue = 0;
    /**
     * @type {!number}
     * @protected
     */
    this._lastStepTime = 0;
}

Animator.prototype = Object.create(EventEmitter.prototype);

Animator._lastId = 0;

Animator.EventTypeDidAnimationStop = "didAnimationStop";

/**
 * @return {!boolean}
 */
Animator.prototype.isRunning = function() {
    return this._isRunning;
};

Animator.prototype.start = function() {
    this._lastStepTime = performance.now();
    this._isRunning = true;
    AnimationManager.shared.add(this);
};

Animator.prototype.stop = function() {
    if (!this._isRunning)
        return;
    this._isRunning = false;
    AnimationManager.shared.remove(this);
    this.dispatchEvent(Animator.EventTypeDidAnimationStop, this);
};

/**
 * @param {!number} now
 */
Animator.prototype.onAnimationFrame = function(now) {
    this._lastStepTime = now;
    this.step(this);
};

/**
 * @constructor
 * @extends Animator
 */
function TransitionAnimator() {
    Animator.call(this);
    /**
     * @type {!number}
     * @protected
     */
    this._from = 0;
    /**
     * @type {!number}
     * @protected
     */
    this._to = 0;
    /**
     * @type {!number}
     * @protected
     */
    this._delta = 0;
    /**
     * @type {!number}
     */
    this.progress = 0.0;
    /**
     * @type {!function}
     */
    this.timingFunction = AnimationTimingFunction.Linear;
}

TransitionAnimator.prototype = Object.create(Animator.prototype);

/**
 * @param {!number} value
 */
TransitionAnimator.prototype.setFrom = function(value) {
    this._from = value;
    this._delta = this._to - this._from;
};

TransitionAnimator.prototype.start = function() {
    console.assert(isFinite(this.duration));
    this.progress = 0.0;
    this.currentValue = this._from;
    Animator.prototype.start.call(this);
};

/**
 * @param {!number} value
 */
TransitionAnimator.prototype.setTo = function(value) {
    this._to = value;
    this._delta = this._to - this._from;
};

/**
 * @param {!number} now
 */
TransitionAnimator.prototype.onAnimationFrame = function(now) {
    this.progress += (now - this._lastStepTime) / this.duration;
    this.progress = Math.min(1.0, this.progress);
    this._lastStepTime = now;
    this.currentValue = this.timingFunction(this.progress) * this._delta + this._from;
    this.step(this);
    if (this.progress === 1.0) {
        this.stop();
        return;
    }
};

/**
 * @constructor
 * @extends Animator
 * @param {!number} initialVelocity
 * @param {!number} initialValue
 */
function FlingGestureAnimator(initialVelocity, initialValue) {
    Animator.call(this);
    /**
     * @type {!number}
     */
    this.initialVelocity = initialVelocity;
    /**
     * @type {!number}
     */
    this.initialValue = initialValue;
    /**
     * @type {!number}
     * @protected
     */
    this._elapsedTime = 0;
    var startVelocity = Math.abs(this.initialVelocity);
    if (startVelocity > this._velocityAtTime(0))
        startVelocity = this._velocityAtTime(0);
    if (startVelocity < 0)
        startVelocity = 0;
    /**
     * @type {!number}
     * @protected
     */
    this._timeOffset = this._timeAtVelocity(startVelocity);
    /**
     * @type {!number}
     * @protected
     */
    this._positionOffset = this._valueAtTime(this._timeOffset);
    /**
     * @type {!number}
     */
    this.duration = this._timeAtVelocity(0);
}

FlingGestureAnimator.prototype = Object.create(Animator.prototype);

// Velocity is subject to exponential decay. These parameters are coefficients
// that determine the curve.
FlingGestureAnimator._P0 = -5707.62;
FlingGestureAnimator._P1 = 0.172;
FlingGestureAnimator._P2 = 0.0037;

/**
 * @param {!number} t
 */
FlingGestureAnimator.prototype._valueAtTime = function(t) {
    return FlingGestureAnimator._P0 * Math.exp(-FlingGestureAnimator._P2 * t) - FlingGestureAnimator._P1 * t - FlingGestureAnimator._P0;
};

/**
 * @param {!number} t
 */
FlingGestureAnimator.prototype._velocityAtTime = function(t) {
    return -FlingGestureAnimator._P0 * FlingGestureAnimator._P2 * Math.exp(-FlingGestureAnimator._P2 * t) - FlingGestureAnimator._P1;
};

/**
 * @param {!number} v
 */
FlingGestureAnimator.prototype._timeAtVelocity = function(v) {
    return -Math.log((v + FlingGestureAnimator._P1) / (-FlingGestureAnimator._P0 * FlingGestureAnimator._P2)) / FlingGestureAnimator._P2;
};

FlingGestureAnimator.prototype.start = function() {
    this._lastStepTime = performance.now();
    Animator.prototype.start.call(this);
};

/**
 * @param {!number} now
 */
FlingGestureAnimator.prototype.onAnimationFrame = function(now) {
    this._elapsedTime += now - this._lastStepTime;
    this._lastStepTime = now;
    if (this._elapsedTime + this._timeOffset >= this.duration) {
        this.stop();
        return;
    }
    var position = this._valueAtTime(this._elapsedTime + this._timeOffset) - this._positionOffset;
    if (this.initialVelocity < 0)
        position = -position;
    this.currentValue = position + this.initialValue;
    this.step(this);
};

/**
 * @constructor
 * @extends EventEmitter
 * @param {?Element} element
 * View adds itself as a property on the element so we can access it from Event.target.
 */
function View(element) {
    EventEmitter.call(this);
    /**
     * @type {Element}
     * @const
     */
    this.element = element || createElement("div");
    this.element.$view = this;
    this.bindCallbackMethods();
}

View.prototype = Object.create(EventEmitter.prototype);

/**
 * @param {!Element} ancestorElement
 * @return {?Object}
 */
View.prototype.offsetRelativeTo = function(ancestorElement) {
    var x = 0;
    var y = 0;
    var element = this.element;
    while (element) {
        x += element.offsetLeft  || 0;
        y += element.offsetTop || 0;
        element = element.offsetParent;
        if (element === ancestorElement)
            return {x: x, y: y};
    }
    return null;
};

/**
 * @param {!View|Node} parent
 * @param {?View|Node=} before
 */
View.prototype.attachTo = function(parent, before) {
    if (parent instanceof View)
        return this.attachTo(parent.element, before);
    if (typeof before === "undefined")
        before = null;
    if (before instanceof View)
        before = before.element;
    parent.insertBefore(this.element, before);
};

View.prototype.bindCallbackMethods = function() {
    for (var methodName in this) {
        if (!/^on[A-Z]/.test(methodName))
            continue;
        if (this.hasOwnProperty(methodName))
            continue;
        var method = this[methodName];
        if (!(method instanceof Function))
            continue;
        this[methodName] = method.bind(this);
    }
};

/**
 * @constructor
 * @extends View
 */
function ScrollView() {
    View.call(this, createElement("div", ScrollView.ClassNameScrollView));
    /**
     * @type {Element}
     * @const
     */
    this.contentElement = createElement("div", ScrollView.ClassNameScrollViewContent);
    this.element.appendChild(this.contentElement);
    /**
     * @type {number}
     */
    this.minimumContentOffset = -Infinity;
    /**
     * @type {number}
     */
    this.maximumContentOffset = Infinity;
    /**
     * @type {number}
     * @protected
     */
    this._contentOffset = 0;
    /**
     * @type {number}
     * @protected
     */
    this._width = 0;
    /**
     * @type {number}
     * @protected
     */
    this._height = 0;
    /**
     * @type {Animator}
     * @protected
     */
    this._scrollAnimator = null;
    /**
     * @type {?Object}
     */
    this.delegate = null;
    /**
     * @type {!number}
     */
    this._lastTouchPosition = 0;
    /**
     * @type {!number}
     */
    this._lastTouchVelocity = 0;
    /**
     * @type {!number}
     */
    this._lastTouchTimeStamp = 0;

    this.element.addEventListener("mousewheel", this.onMouseWheel, false);
    this.element.addEventListener("touchstart", this.onTouchStart, false);

    /**
     * The content offset is partitioned so the it can go beyond the CSS limit
     * of 33554433px.
     * @type {number}
     * @protected
     */
    this._partitionNumber = 0;
}

ScrollView.prototype = Object.create(View.prototype);

ScrollView.PartitionHeight = 100000;
ScrollView.ClassNameScrollView = "scroll-view";
ScrollView.ClassNameScrollViewContent = "scroll-view-content";

/**
 * @param {!Event} event
 */
ScrollView.prototype.onTouchStart = function(event) {
    var touch = event.touches[0];
    this._lastTouchPosition = touch.clientY;
    this._lastTouchVelocity = 0;
    this._lastTouchTimeStamp = event.timeStamp;
    if (this._scrollAnimator)
        this._scrollAnimator.stop();
    window.addEventListener("touchmove", this.onWindowTouchMove, false);
    window.addEventListener("touchend", this.onWindowTouchEnd, false);
};

/**
 * @param {!Event} event
 */
ScrollView.prototype.onWindowTouchMove = function(event) {
    var touch = event.touches[0];
    var deltaTime = event.timeStamp - this._lastTouchTimeStamp;
    var deltaY = this._lastTouchPosition - touch.clientY;
    this.scrollBy(deltaY, false);
    this._lastTouchVelocity = deltaY / deltaTime;
    this._lastTouchPosition = touch.clientY;
    this._lastTouchTimeStamp = event.timeStamp;
    event.stopPropagation();
    event.preventDefault();
};

/**
 * @param {!Event} event
 */
ScrollView.prototype.onWindowTouchEnd = function(event) {
    if (Math.abs(this._lastTouchVelocity) > 0.01) {
        this._scrollAnimator = new FlingGestureAnimator(this._lastTouchVelocity, this._contentOffset);
        this._scrollAnimator.step = this.onFlingGestureAnimatorStep;
        this._scrollAnimator.start();
    }
    window.removeEventListener("touchmove", this.onWindowTouchMove, false);
    window.removeEventListener("touchend", this.onWindowTouchEnd, false);
};

/**
 * @param {!Animator} animator
 */
ScrollView.prototype.onFlingGestureAnimatorStep = function(animator) {
    this.scrollTo(animator.currentValue, false);
};

/**
 * @return {!Animator}
 */
ScrollView.prototype.scrollAnimator = function() {
    return this._scrollAnimator;
};

/**
 * @param {!number} width
 */
ScrollView.prototype.setWidth = function(width) {
    console.assert(isFinite(width));
    if (this._width === width)
        return;
    this._width = width;
    this.element.style.width = this._width + "px";
};

/**
 * @return {!number}
 */
ScrollView.prototype.width = function() {
    return this._width;
};

/**
 * @param {!number} height
 */
ScrollView.prototype.setHeight = function(height) {
    console.assert(isFinite(height));
    if (this._height === height)
        return;
    this._height = height;
    this.element.style.height = height + "px";
    if (this.delegate)
        this.delegate.scrollViewDidChangeHeight(this);
};

/**
 * @return {!number}
 */
ScrollView.prototype.height = function() {
    return this._height;
};

/**
 * @param {!Animator} animator
 */
ScrollView.prototype.onScrollAnimatorStep = function(animator) {
    this.setContentOffset(animator.currentValue);
};

/**
 * @param {!number} offset
 * @param {?boolean} animate
 */
ScrollView.prototype.scrollTo = function(offset, animate) {
    console.assert(isFinite(offset));
    if (!animate) {
        this.setContentOffset(offset);
        return;
    }
    if (this._scrollAnimator)
        this._scrollAnimator.stop();
    this._scrollAnimator = new TransitionAnimator();
    this._scrollAnimator.step = this.onScrollAnimatorStep;
    this._scrollAnimator.setFrom(this._contentOffset);
    this._scrollAnimator.setTo(offset);
    this._scrollAnimator.duration = 300;
    this._scrollAnimator.start();
};

/**
 * @param {!number} offset
 * @param {?boolean} animate
 */
ScrollView.prototype.scrollBy = function(offset, animate) {
    this.scrollTo(this._contentOffset + offset, animate);
};

/**
 * @return {!number}
 */
ScrollView.prototype.contentOffset = function() {
    return this._contentOffset;
};

/**
 * @param {?Event} event
 */
ScrollView.prototype.onMouseWheel = function(event) {
    this.setContentOffset(this._contentOffset - event.wheelDelta / 30);
    event.stopPropagation();
    event.preventDefault();
};


/**
 * @param {!number} value
 */
ScrollView.prototype.setContentOffset = function(value) {
    console.assert(isFinite(value));
    value = Math.min(this.maximumContentOffset - this._height, Math.max(this.minimumContentOffset, Math.floor(value)));
    if (this._contentOffset === value)
        return;
    this._contentOffset = value;
    this._updateScrollContent();
    if (this.delegate)
        this.delegate.scrollViewDidChangeContentOffset(this);
};

ScrollView.prototype._updateScrollContent = function() {
    var newPartitionNumber = Math.floor(this._contentOffset / ScrollView.PartitionHeight);
    var partitionChanged = this._partitionNumber !== newPartitionNumber;
    this._partitionNumber = newPartitionNumber;
    this.contentElement.style.webkitTransform = "translate(0, " + (-this.contentPositionForContentOffset(this._contentOffset)) + "px)";
    if (this.delegate && partitionChanged)
        this.delegate.scrollViewDidChangePartition(this);
};

/**
 * @param {!View|Node} parent
 * @param {?View|Node=} before
 * @override
 */
ScrollView.prototype.attachTo = function(parent, before) {
    View.prototype.attachTo.call(this, parent, before);
    this._updateScrollContent();
};

/**
 * @param {!number} offset
 */
ScrollView.prototype.contentPositionForContentOffset = function(offset) {
    return offset - this._partitionNumber * ScrollView.PartitionHeight;
};

/**
 * @constructor
 * @extends View
 */
function ListCell() {
    View.call(this, createElement("div", ListCell.ClassNameListCell));
    
    /**
     * @type {!number}
     */
    this.row = NaN;
    /**
     * @type {!number}
     */
    this._width = 0;
    /**
     * @type {!number}
     */
    this._position = 0;
}

ListCell.prototype = Object.create(View.prototype);

ListCell.DefaultRecycleBinLimit = 64;
ListCell.ClassNameListCell = "list-cell";
ListCell.ClassNameHidden = "hidden";

/**
 * @return {!Array} An array to keep thrown away cells.
 */
ListCell.prototype._recycleBin = function() {
    console.assert(false, "NOT REACHED: ListCell.prototype._recycleBin needs to be overridden.");
    return [];
};

ListCell.prototype.throwAway = function() {
    this.hide();
    var limit = typeof this.constructor.RecycleBinLimit === "undefined" ? ListCell.DefaultRecycleBinLimit : this.constructor.RecycleBinLimit;
    var recycleBin = this._recycleBin();
    if (recycleBin.length < limit)
        recycleBin.push(this);
};

ListCell.prototype.show = function() {
    this.element.classList.remove(ListCell.ClassNameHidden);
};

ListCell.prototype.hide = function() {
    this.element.classList.add(ListCell.ClassNameHidden);
};

/**
 * @return {!number} Width in pixels.
 */
ListCell.prototype.width = function(){
    return this._width;
};

/**
 * @param {!number} width Width in pixels.
 */
ListCell.prototype.setWidth = function(width){
    if (this._width === width)
        return;
    this._width = width;
    this.element.style.width = this._width + "px";
};

/**
 * @return {!number} Position in pixels.
 */
ListCell.prototype.position = function(){
    return this._position;
};

/**
 * @param {!number} y Position in pixels.
 */
ListCell.prototype.setPosition = function(y) {
    if (this._position === y)
        return;
    this._position = y;
    this.element.style.webkitTransform = "translate(0, " + this._position + "px)";
};

/**
 * @param {!boolean} selected
 */
ListCell.prototype.setSelected = function(selected) {
    if (this._selected === selected)
        return;
    this._selected = selected;
    if (this._selected)
        this.element.classList.add("selected");
    else
        this.element.classList.remove("selected");
};

/**
 * @constructor
 * @extends View
 */
function ListView() {
    View.call(this, createElement("div", ListView.ClassNameListView));
    this.element.tabIndex = 0;
    this.element.setAttribute("role", "grid");

    /**
     * @type {!number}
     * @private
     */
    this._width = 0;
    /**
     * @type {!Object}
     * @private
     */
    this._cells = {};

    /**
     * @type {!number}
     */
    this.selectedRow = ListView.NoSelection;

    /**
     * @type {!ScrollView}
     */
    this.scrollView = new ScrollView();
    this.scrollView.delegate = this;
    this.scrollView.minimumContentOffset = 0;
    this.scrollView.setWidth(0);
    this.scrollView.setHeight(0);
    this.scrollView.attachTo(this);

    this.element.addEventListener("click", this.onClick, false);

    /**
     * @type {!boolean}
     * @private
     */
    this._needsUpdateCells = false;
}

ListView.prototype = Object.create(View.prototype);

ListView.NoSelection = -1;
ListView.ClassNameListView = "list-view";

ListView.prototype.onAnimationFrameWillFinish = function() {
    if (this._needsUpdateCells)
        this.updateCells();
};

/**
 * @param {!boolean} needsUpdateCells
 */
ListView.prototype.setNeedsUpdateCells = function(needsUpdateCells) {
    if (this._needsUpdateCells === needsUpdateCells)
        return;
    this._needsUpdateCells = needsUpdateCells;
    if (this._needsUpdateCells)
        AnimationManager.shared.on(AnimationManager.EventTypeAnimationFrameWillFinish, this.onAnimationFrameWillFinish);
    else
        AnimationManager.shared.removeListener(AnimationManager.EventTypeAnimationFrameWillFinish, this.onAnimationFrameWillFinish);
};

/**
 * @param {!number} row
 * @return {?ListCell}
 */
ListView.prototype.cellAtRow = function(row) {
    return this._cells[row];
};

/**
 * @param {!number} offset Scroll offset in pixels.
 * @return {!number}
 */
ListView.prototype.rowAtScrollOffset = function(offset) {
    console.assert(false, "NOT REACHED: ListView.prototype.rowAtScrollOffset needs to be overridden.");
    return 0;
};

/**
 * @param {!number} row
 * @return {!number} Scroll offset in pixels.
 */
ListView.prototype.scrollOffsetForRow = function(row) {
    console.assert(false, "NOT REACHED: ListView.prototype.scrollOffsetForRow needs to be overridden.");
    return 0;
};

/**
 * @param {!number} row
 * @return {!ListCell}
 */
ListView.prototype.addCellIfNecessary = function(row) {
    var cell = this._cells[row];
    if (cell)
        return cell;
    cell = this.prepareNewCell(row);
    cell.attachTo(this.scrollView.contentElement);
    cell.setWidth(this._width);
    cell.setPosition(this.scrollView.contentPositionForContentOffset(this.scrollOffsetForRow(row)));
    this._cells[row] = cell;
    return cell;
};

/**
 * @param {!number} row
 * @return {!ListCell}
 */
ListView.prototype.prepareNewCell = function(row) {
    console.assert(false, "NOT REACHED: ListView.prototype.prepareNewCell should be overridden.");
    return new ListCell();
};

/**
 * @param {!ListCell} cell
 */
ListView.prototype.throwAwayCell = function(cell) {
    delete this._cells[cell.row];
    cell.throwAway();
};

/**
 * @return {!number}
 */
ListView.prototype.firstVisibleRow = function() {
    return this.rowAtScrollOffset(this.scrollView.contentOffset());
};

/**
 * @return {!number}
 */
ListView.prototype.lastVisibleRow = function() {
    return this.rowAtScrollOffset(this.scrollView.contentOffset() + this.scrollView.height() - 1);
};

/**
 * @param {!ScrollView} scrollView
 */
ListView.prototype.scrollViewDidChangeContentOffset = function(scrollView) {
    this.setNeedsUpdateCells(true);
};

/**
 * @param {!ScrollView} scrollView
 */
ListView.prototype.scrollViewDidChangeHeight = function(scrollView) {
    this.setNeedsUpdateCells(true);
};

/**
 * @param {!ScrollView} scrollView
 */
ListView.prototype.scrollViewDidChangePartition = function(scrollView) {
    this.setNeedsUpdateCells(true);
};

ListView.prototype.updateCells = function() {
    var firstVisibleRow = this.firstVisibleRow();
    var lastVisibleRow = this.lastVisibleRow();
    console.assert(firstVisibleRow <= lastVisibleRow);
    for (var c in this._cells) {
        var cell = this._cells[c];
        if (cell.row < firstVisibleRow || cell.row > lastVisibleRow)
            this.throwAwayCell(cell);
    }
    for (var i = firstVisibleRow; i <= lastVisibleRow; ++i) {
        var cell = this._cells[i];
        if (cell)
            cell.setPosition(this.scrollView.contentPositionForContentOffset(this.scrollOffsetForRow(cell.row)));
        else
            this.addCellIfNecessary(i);
    }
    this.setNeedsUpdateCells(false);
};

/**
 * @return {!number} Width in pixels.
 */
ListView.prototype.width = function() {
    return this._width;
};

/**
 * @param {!number} width Width in pixels.
 */
ListView.prototype.setWidth = function(width) {
    if (this._width === width)
        return;
    this._width = width;
    this.scrollView.setWidth(this._width);
    for (var c in this._cells) {
        this._cells[c].setWidth(this._width);
    }
    this.element.style.width = this._width + "px";
    this.setNeedsUpdateCells(true);
};

/**
 * @return {!number} Height in pixels.
 */
ListView.prototype.height = function() {
    return this.scrollView.height();
};

/**
 * @param {!number} height Height in pixels.
 */
ListView.prototype.setHeight = function(height) {
    this.scrollView.setHeight(height);
};

/**
 * @param {?Event} event
 */
ListView.prototype.onClick = function(event) {
    var clickedCellElement = enclosingNodeOrSelfWithClass(event.target, ListCell.ClassNameListCell);
    if (!clickedCellElement)
        return;
    var clickedCell = clickedCellElement.$view;
    if (clickedCell.row !== this.selectedRow)
        this.select(clickedCell.row);
};

/**
 * @param {!number} row
 */
ListView.prototype.select = function(row) {
    if (this.selectedRow === row)
        return;
    this.deselect();
    if (row === ListView.NoSelection)
        return;
    this.selectedRow = row;
    var selectedCell = this._cells[this.selectedRow];
    if (selectedCell)
        selectedCell.setSelected(true);
};

ListView.prototype.deselect = function() {
    if (this.selectedRow === ListView.NoSelection)
        return;
    var selectedCell = this._cells[this.selectedRow];
    if (selectedCell)
        selectedCell.setSelected(false);
    this.selectedRow = ListView.NoSelection;
};

/**
 * @param {!number} row
 * @param {!boolean} animate
 */
ListView.prototype.scrollToRow = function(row, animate) {
    this.scrollView.scrollTo(this.scrollOffsetForRow(row), animate);
};

/**
 * @constructor
 * @extends View
 * @param {!ScrollView} scrollView
 */
function ScrubbyScrollBar(scrollView) {
    View.call(this, createElement("div", ScrubbyScrollBar.ClassNameScrubbyScrollBar));

    /**
     * @type {!Element}
     * @const
     */
    this.thumb = createElement("div", ScrubbyScrollBar.ClassNameScrubbyScrollThumb);
    this.element.appendChild(this.thumb);

    /**
     * @type {!ScrollView}
     * @const
     */
    this.scrollView = scrollView;

    /**
     * @type {!number}
     * @protected
     */
    this._height = 0;
    /**
     * @type {!number}
     * @protected
     */
    this._thumbHeight = 0;
    /**
     * @type {!number}
     * @protected
     */
    this._thumbPosition = 0;

    this.setHeight(0);
    this.setThumbHeight(ScrubbyScrollBar.ThumbHeight);

    /**
     * @type {?Animator}
     * @protected
     */
    this._thumbStyleTopAnimator = null;

    /** 
     * @type {?number}
     * @protected
     */
    this._timer = null;
    
    this.element.addEventListener("mousedown", this.onMouseDown, false);
    this.element.addEventListener("touchstart", this.onTouchStart, false);
}

ScrubbyScrollBar.prototype = Object.create(View.prototype);

ScrubbyScrollBar.ScrollInterval = 16;
ScrubbyScrollBar.ThumbMargin = 2;
ScrubbyScrollBar.ThumbHeight = 30;
ScrubbyScrollBar.ClassNameScrubbyScrollBar = "scrubby-scroll-bar";
ScrubbyScrollBar.ClassNameScrubbyScrollThumb = "scrubby-scroll-thumb";

/**
 * @param {?Event} event
 */
ScrubbyScrollBar.prototype.onTouchStart = function(event) {
    var touch = event.touches[0];
    this._setThumbPositionFromEventPosition(touch.clientY);
    if (this._thumbStyleTopAnimator)
        this._thumbStyleTopAnimator.stop();
    this._timer = setInterval(this.onScrollTimer, ScrubbyScrollBar.ScrollInterval);
    window.addEventListener("touchmove", this.onWindowTouchMove, false);
    window.addEventListener("touchend", this.onWindowTouchEnd, false);
    event.stopPropagation();
    event.preventDefault();
};

/**
 * @param {?Event} event
 */
ScrubbyScrollBar.prototype.onWindowTouchMove = function(event) {
    var touch = event.touches[0];
    this._setThumbPositionFromEventPosition(touch.clientY);
    event.stopPropagation();
    event.preventDefault();
};

/**
 * @param {?Event} event
 */
ScrubbyScrollBar.prototype.onWindowTouchEnd = function(event) {
    this._thumbStyleTopAnimator = new TransitionAnimator();
    this._thumbStyleTopAnimator.step = this.onThumbStyleTopAnimationStep;
    this._thumbStyleTopAnimator.setFrom(this.thumb.offsetTop);
    this._thumbStyleTopAnimator.setTo((this._height - this._thumbHeight) / 2);
    this._thumbStyleTopAnimator.timingFunction = AnimationTimingFunction.EaseInOut;
    this._thumbStyleTopAnimator.duration = 100;
    this._thumbStyleTopAnimator.start();

    window.removeEventListener("touchmove", this.onWindowTouchMove, false);
    window.removeEventListener("touchend", this.onWindowTouchEnd, false);
    clearInterval(this._timer);
};

/**
 * @return {!number} Height of the view in pixels.
 */
ScrubbyScrollBar.prototype.height = function() {
    return this._height;
};

/**
 * @param {!number} height Height of the view in pixels.
 */
ScrubbyScrollBar.prototype.setHeight = function(height) {
    if (this._height === height)
        return;
    this._height = height;
    this.element.style.height = this._height + "px";
    this.thumb.style.top = ((this._height - this._thumbHeight) / 2) + "px";
    this._thumbPosition = 0;
};

/**
 * @param {!number} height Height of the scroll bar thumb in pixels.
 */
ScrubbyScrollBar.prototype.setThumbHeight = function(height) {
    if (this._thumbHeight === height)
        return;
    this._thumbHeight = height;
    this.thumb.style.height = this._thumbHeight + "px";
    this.thumb.style.top = ((this._height - this._thumbHeight) / 2) + "px";
    this._thumbPosition = 0;
};

/**
 * @param {number} position
 */
ScrubbyScrollBar.prototype._setThumbPositionFromEventPosition = function(position) {
    var thumbMin = ScrubbyScrollBar.ThumbMargin;
    var thumbMax = this._height - this._thumbHeight - ScrubbyScrollBar.ThumbMargin * 2;
    var y = position - this.element.getBoundingClientRect().top - this.element.clientTop + this.element.scrollTop;
    var thumbPosition = y - this._thumbHeight / 2;
    thumbPosition = Math.max(thumbPosition, thumbMin);
    thumbPosition = Math.min(thumbPosition, thumbMax);
    this.thumb.style.top = thumbPosition + "px";
    this._thumbPosition = 1.0 - (thumbPosition - thumbMin) / (thumbMax - thumbMin) * 2;
};

/**
 * @param {?Event} event
 */
ScrubbyScrollBar.prototype.onMouseDown = function(event) {
    this._setThumbPositionFromEventPosition(event.clientY);

    window.addEventListener("mousemove", this.onWindowMouseMove, false);
    window.addEventListener("mouseup", this.onWindowMouseUp, false);
    if (this._thumbStyleTopAnimator)
        this._thumbStyleTopAnimator.stop();
    this._timer = setInterval(this.onScrollTimer, ScrubbyScrollBar.ScrollInterval);
    event.stopPropagation();
    event.preventDefault();
};

/**
 * @param {?Event} event
 */
ScrubbyScrollBar.prototype.onWindowMouseMove = function(event) {
    this._setThumbPositionFromEventPosition(event.clientY);
};

/**
 * @param {?Event} event
 */
ScrubbyScrollBar.prototype.onWindowMouseUp = function(event) {
    this._thumbStyleTopAnimator = new TransitionAnimator();
    this._thumbStyleTopAnimator.step = this.onThumbStyleTopAnimationStep;
    this._thumbStyleTopAnimator.setFrom(this.thumb.offsetTop);
    this._thumbStyleTopAnimator.setTo((this._height - this._thumbHeight) / 2);
    this._thumbStyleTopAnimator.timingFunction = AnimationTimingFunction.EaseInOut;
    this._thumbStyleTopAnimator.duration = 100;
    this._thumbStyleTopAnimator.start();
    
    window.removeEventListener("mousemove", this.onWindowMouseMove, false);
    window.removeEventListener("mouseup", this.onWindowMouseUp, false);
    clearInterval(this._timer);
};

/**
 * @param {!Animator} animator
 */
ScrubbyScrollBar.prototype.onThumbStyleTopAnimationStep = function(animator) {
    this.thumb.style.top = animator.currentValue + "px";
};

ScrubbyScrollBar.prototype.onScrollTimer = function() {
    var scrollAmount = Math.pow(this._thumbPosition, 2) * 10;
    if (this._thumbPosition > 0)
        scrollAmount = -scrollAmount;
    this.scrollView.scrollBy(scrollAmount, false);
};

/**
 * @constructor
 * @extends ListCell
 * @param {!Array} shortMonthLabels
 */
function YearListCell(shortMonthLabels) {
    ListCell.call(this);
    this.element.classList.add(YearListCell.ClassNameYearListCell);
    this.element.style.height = YearListCell.Height + "px";

    /**
     * @type {!Element}
     * @const
     */
    this.label = createElement("div", YearListCell.ClassNameLabel, "----");
    this.element.appendChild(this.label);
    this.label.style.height = (YearListCell.Height - YearListCell.BorderBottomWidth) + "px";
    this.label.style.lineHeight = (YearListCell.Height - YearListCell.BorderBottomWidth) + "px";

    /**
     * @type {!Array} Array of the 12 month button elements.
     * @const
     */
    this.monthButtons = [];
    var monthChooserElement = createElement("div", YearListCell.ClassNameMonthChooser);
    for (var r = 0; r < YearListCell.ButtonRows; ++r) {
        var buttonsRow = createElement("div", YearListCell.ClassNameMonthButtonsRow);
        buttonsRow.setAttribute("role", "row");
        for (var c = 0; c < YearListCell.ButtonColumns; ++c) {
            var month = c + r * YearListCell.ButtonColumns;
            var button = createElement("div", YearListCell.ClassNameMonthButton, shortMonthLabels[month]);
            button.setAttribute("role", "gridcell");
            button.dataset.month = month;
            buttonsRow.appendChild(button);
            this.monthButtons.push(button);
        }
        monthChooserElement.appendChild(buttonsRow);
    }
    this.element.appendChild(monthChooserElement);

    /**
     * @type {!boolean}
     * @private
     */
    this._selected = false;
    /**
     * @type {!number}
     * @private
     */
    this._height = 0;
}

YearListCell.prototype = Object.create(ListCell.prototype);

YearListCell.Height = hasInaccuratePointingDevice() ? 31 : 25;
YearListCell.BorderBottomWidth = 1;
YearListCell.ButtonRows = 3;
YearListCell.ButtonColumns = 4;
YearListCell.SelectedHeight = hasInaccuratePointingDevice() ? 127 : 121;
YearListCell.ClassNameYearListCell = "year-list-cell";
YearListCell.ClassNameLabel = "label";
YearListCell.ClassNameMonthChooser = "month-chooser";
YearListCell.ClassNameMonthButtonsRow = "month-buttons-row";
YearListCell.ClassNameMonthButton = "month-button";
YearListCell.ClassNameHighlighted = "highlighted";

YearListCell._recycleBin = [];

/**
 * @return {!Array}
 * @override
 */
YearListCell.prototype._recycleBin = function() {
    return YearListCell._recycleBin;
};

/**
 * @param {!number} row
 */
YearListCell.prototype.reset = function(row) {
    this.row = row;
    this.label.textContent = row + 1;
    for (var i = 0; i < this.monthButtons.length; ++i) {
        this.monthButtons[i].classList.remove(YearListCell.ClassNameHighlighted);
    }
    this.show();
};

/**
 * @return {!number} The height in pixels.
 */
YearListCell.prototype.height = function() {
    return this._height;
};

/**
 * @param {!number} height Height in pixels.
 */
YearListCell.prototype.setHeight = function(height) {
    if (this._height === height)
        return;
    this._height = height;
    this.element.style.height = this._height + "px";
};

/**
 * @constructor
 * @extends ListView
 * @param {!Month} minimumMonth
 * @param {!Month} maximumMonth
 */
function YearListView(minimumMonth, maximumMonth) {
    ListView.call(this);
    this.element.classList.add("year-list-view");

    /**
     * @type {?Month}
     */
    this.highlightedMonth = null;
    /**
     * @type {!Month}
     * @const
     * @protected
     */
    this._minimumMonth = minimumMonth;
    /**
     * @type {!Month}
     * @const
     * @protected
     */
    this._maximumMonth = maximumMonth;

    this.scrollView.minimumContentOffset = (this._minimumMonth.year - 1) * YearListCell.Height;
    this.scrollView.maximumContentOffset = (this._maximumMonth.year - 1) * YearListCell.Height + YearListCell.SelectedHeight;
    
    /**
     * @type {!Object}
     * @const
     * @protected
     */
    this._runningAnimators = {};
    /**
     * @type {!Array}
     * @const
     * @protected
     */
    this._animatingRows = [];
    /**
     * @type {!boolean}
     * @protected
     */
    this._ignoreMouseOutUntillNextMouseOver = false;
    
    /**
     * @type {!ScrubbyScrollBar}
     * @const
     */
    this.scrubbyScrollBar = new ScrubbyScrollBar(this.scrollView);
    this.scrubbyScrollBar.attachTo(this);
    
    this.element.addEventListener("mouseover", this.onMouseOver, false);
    this.element.addEventListener("mouseout", this.onMouseOut, false);
    this.element.addEventListener("keydown", this.onKeyDown, false);
    this.element.addEventListener("touchstart", this.onTouchStart, false);
}

YearListView.prototype = Object.create(ListView.prototype);

YearListView.Height = YearListCell.SelectedHeight - 1;
YearListView.EventTypeYearListViewDidHide = "€€